!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("FourCorners",[],t):"object"==typeof exports?exports.FourCorners=t():e.FourCorners=t()}(window,function(){return function(n){var r={};function a(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}return a.m=n,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,n){e.exports=n(2)},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(1);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),console.log(e),this.elems={},this.opts=t,this.corners=["context","links","copyright","backstory"],this.elems.embed=e,this.elems.embed.classList.add("fc-init"),this.data=m(this),this.elems.photo=c(this),this.elems.panels=s(this),this.elems.corners=l(this)}var e,t,n;return e=o,(t=[{key:"init",value:function(e){var r=this;r.embeds=[];var a=Object.assign({selector:".fc-embed:not(.fc-init)",cornerStroke:"6px",cornerSize:"25px",cornerColor:"white",cornerActiveColor:"blue",cornerHoverColor:"red",posDur:.2,transDur:.1},e),t=Array.from(document.querySelectorAll(a.selector));return console.log(document.querySelectorAll(".fc-embed")),t.forEach(function(e,t){var n=new o(e,a);r.embeds.push(n)}),r.embeds}},{key:"openCorner",value:function(n){var r=this,e=this.corners,t=this.elems.embed,a=this.elems.corners[n],o=this.elems.panels[n];a&&o&&(t.dataset.active=n,t.classList.add("fc-active"),a.classList.add("fc-active"),o.classList.add("fc-active")),e.forEach(function(e,t){e!=n&&r.closeCorner(e)})}},{key:"closeCorner",value:function(e){var t=this.elems.embed;e||(e=t.dataset.active);var n=this.elems.corners[e],r=this.elems.panels[e];e==t.dataset.active&&(t.dataset.active="",t.classList.remove("fc-active")),n&&n.classList.remove("fc-active"),r&&r.classList.remove("fc-active")}}])&&r(e.prototype,t),n&&r(e,n),o}(),c=function(e){var t=e.elems.embed,n=document.createElement("img");n.classList.add("fc-img");var r="",a=".fc-photo";if(t.querySelector(a))r=t.querySelector(a);else{(r=document.createElement("div")).classList.add("fc-photo");var o=new Image,c=e.data.img;o.onload=function(e){n.src=c,r.classList.add("fc-loaded")},o.onerror=function(e){console.log(e)},o.src=c,r.appendChild(n)}return t.appendChild(r),r},s=function(s){var i={},l=s.elems.embed;return s.corners.forEach(function(e,t){var n="",r='.fc-panel[data-slug="'+e+'"]';if(l.querySelector(r))n=l.querySelector(r);else{(n=document.createElement("div")).classList.add("fc-panel"),n.dataset.slug=e;var c=document.createElement("div");c.classList.add("fc-inner");var a=document.createElement("div");if(a.classList.add("fc-panel-title"),a.innerHTML=e,n.appendChild(a),s.data){var o=s.data[e];Object.entries(o).forEach(function(e){var t=d(e,2),n=t[0],r=t[1];if(r){var a=document.createElement("div");if(a.classList.add("fc-row","fc-"+n),!["media","links"].includes(n)){var o=document.createElement("div");o.className="fc-label",o.innerHTML=n,a.appendChild(o)}"media"==n?a.append(u(r)):"links"==n?a.append(f(r)):(r=E(r),a.innerHTML+=r),c.appendChild(a)}})}n.appendChild(c),l.appendChild(n)}i[e]=n}),i},u=function(e){var o=document.createElement("div");return o.className="fc-sub-rows",e.forEach(function(e,t){var n=document.createElement("div");if(n.className="fc-sub-row","image"==e.type){var r=document.createElement("img");r.src=e.url,n.appendChild(r)}else i(e,n);if(e.credit){var a=document.createElement("div");a.className="fc-sub-credit",a.innerHTML=e.credit,n.appendChild(a)}o.appendChild(n)}),o},i=function(e,r){var t="";switch(e.type){case"youtube":t="https://www.youtube.com/oembed?url="+e.url;break;case"vimeo":t="https://vimeo.com/api/oembed.json?url="+e.url;break;case"soundcloud":t="https://soundcloud.com/oembed?format=json&url="+e.url;break;default:return!1}fetch(t).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){var t=document.createElement("div");if(t.className="fc-media-wrap",t.innerHTML=e.html,Number.isInteger(e.width,e.height)){var n=e.height/e.width;t.classList.add("fc-responsive"),t.style.paddingBottom=100*n+"%"}r.prepend(t)}).catch(function(e){console.log(e)})},f=function(e){var o=document.createElement("div");return o.className="fc-sub-rows",e.forEach(function(e,t){var n=document.createElement("a");if(n.className="fc-sub-row",n.href=e.url,n.target="_blank",e.title){var r=document.createElement("div");r.className="fc-sub-title",r.innerHTML=e.title,n.appendChild(r)}if(e.url){var a=document.createElement("div");a.className="fc-sub-url",a.innerHTML=e.url,n.appendChild(a)}o.appendChild(n)}),o},l=function(a){var o={},c=a.elems.embed,e=a.elems.photo;return c.addEventListener("mouseenter",function(e){p(e,a)}),c.addEventListener("mouseleave",function(e){v(e,a)}),e&&e.addEventListener("click",function(e){g(e,a)}),a.corners.forEach(function(e,t){var n='.fc-corner[data-slug="'+e+'"]';if(!c.querySelector(n)){var r=document.createElement("div");r&&(r.classList.add("fc-corner"),r.dataset.slug=e,r.addEventListener("mouseenter",function(e){h(e,a)}),r.addEventListener("mouseleave",function(e){b(e,a)}),r.addEventListener("click",function(e){y(e,a)}),o[e]=r,c.appendChild(r))}}),o},m=function(e){var t=e.elems.embed.dataset.fc;if(t)return t=t,delete e.elems.embed.dataset.fc,JSON.parse(t)},p=function(e,t){t.elems.embed,t.elems.corners,t.css,t.opts.posDur},v=function(e,t){t.elems.embed,t.elems.corners,t.css,t.opts.posDur},h=function(e,t){e.target.classList.add("fc-hover")},b=function(e,t){e.target.classList.remove("fc-hover")},y=function(e,t){var n=e.target.dataset.slug,r=t.elems.embed.dataset.active;n&&(n==r?t.closeCorner(n):t.openCorner(n))},g=function(e,t){t.closeCorner()},E=function(e){return e.replace(/(?:(?:https?|ftp):\/\/)?(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\x{00a1}\-\x{ffff}0-9]+-?)*[a-z\x{00a1}\-\x{ffff}0-9]+)(?:\.(?:[a-z\x{00a1}\-\x{ffff}0-9]+-?)*[a-z\x{00a1}\-\x{ffff}0-9]+)*(?:\.(?:[a-z\x{00a1}\-\x{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?/gi,function(e){return'<a href="'+(/^(?:(?:https?|ftp):\/\/)/i.test(e)?e:"http://"+e)+'" target="_blank">'+e+"</a>"})},o=a;t.default=o}])});
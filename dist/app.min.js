!function(e){function t(t){for(var n,i,o=t[0],c=t[1],l=t[2],h=0,p=[];h<o.length;h++)i=o[h],s[i]&&p.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(d&&d(t);p.length;)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},s={0:0},r=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;r.push([375,1]),a()}({153:function(e,t,a){window,e.exports=function(e){var t={};function a(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){e.exports=a(2)},function(e,t,a){},function(e,t,a){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,s=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(s)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}a.r(t),a(1);var r=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elems={},this.opts=a,this.corners=["context","links","authorship","backstory"],this.cornerTitles=["Image Context","Links","Authorship","Backstory"],this.elems.embed=t,this.data=b(this),this.elems.photo=l(this),this.elems.panels=d(this),this.elems.corners=v(this),this.elems.caption=E(this),i(this)}var t,a;return t=e,(a=[{key:"init",value:function(t){var a=this;a.embeds=[];var n=Object.assign({selector:".fc-embed:not(.fc-init)",interactive:!0,active:null,cutline:!0,posDur:.2,transDur:.1},t);return Array.from(document.querySelectorAll(n.selector)).forEach(function(t,s){var r=new e(t,n);a.embeds.push(r)}),a.embeds}},{key:"openCorner",value:function(e){var t=this,a=this.corners,n=this.elems.embed,s=this.elems.corners[e],r=this.elems.panels[e];n.classList.remove("fc-full"),n&&s&&r&&(n.dataset.fcActive=e,n.classList.add("fc-active"),s.classList.add("fc-active"),r.classList.add("fc-active")),a.forEach(function(a,n){a!=e&&t.closeCorner(a)})}},{key:"closeCorner",value:function(e){var t=this.elems.embed;e||(e=t.dataset.fcActive);var a=this.elems.corners[e],n=this.elems.panels[e];e==t.dataset.fcActive&&(t.dataset.fcActive="",t.classList.remove("fc-active")),a&&a.classList.remove("fc-active"),n&&n.classList.remove("fc-active")}},{key:"toggleExpandPanel",value:function(){this.elems.embed.classList.toggle("fc-full")}}])&&s(t.prototype,a),e}(),i=function(e){var t=e.elems.embed;t.classList.add("fc-init"),e.data&&e.data.opts&&e.data.opts.dark&&t.classList.add("fc-dark"),e.opts.interactive&&(window.addEventListener("resize",function(t){o(t,e)}),window.addEventListener("click",function(t){var a=N(t.target,e.elems.panels),n=N(t.target,e.elems.corners),s=N(t.target,Array.from(document.querySelectorAll("#creator")));a||n||s||e.closeCorner()})),o(null,e)},o=function(e,t){var a=t.elems.panels;a&&Object.keys(a).forEach(function(e,t){c(a[e])})},c=function(e){var t=e.querySelector(".fc-scroll");t&&(t.scrollHeight>t.clientHeight?e.classList.add("fc-overflow"):e.classList.remove("fc-overflow"))},l=function(e){var t=e.elems.embed;if(e.data){var a,n,s=".fc-photo";return t.querySelector(s)?a=t.querySelector(s):((a=document.createElement("div")).classList.add("fc-photo"),t.appendChild(a)),(n=t.querySelector(".fc-img"))&&(a.classList.add("fc-loaded"),a.appendChild(n)),a}},d=function(e){var t={},a=e.elems.embed;return e.corners.forEach(function(s,r){var i=e.opts.active,o='.fc-panel[data-fc-slug="'+s+'"]',c=a.querySelector(o);if(!c){(c=document.createElement("div")).dataset.fcSlug=s,c.classList.add("fc-panel"),c.classList.add("fc-"+s),s==i&&c.classList.add("fc-active");var l=document.createElement("div");l.classList.add("fc-scroll");var d=document.createElement("div");d.classList.add("fc-inner");var m=document.createElement("div");m.classList.add("fc-panel-title");var f=document.createElement("span"),g=e.cornerTitles[e.corners.indexOf(s)];f.innerHTML=g,m.appendChild(f);var v=document.createElement("div");v.className="fc-icon fc-expand",v.addEventListener("click",function(t){e.toggleExpandPanel(t,e)}),m.appendChild(v);var E=document.createElement("div");if(E.className="fc-icon fc-close",E.addEventListener("click",function(t){x(t,e)}),m.appendChild(E),d.appendChild(m),e.data){var b=e.data[s];Object.keys(b),Object.entries(b).forEach(function(e){var t=n(e,2),a=t[0],s=t[1];if(s){var r=document.createElement("div");if(r.classList.add("fc-row","fc-"+a),"media"==a){var i=h(s);i&&r.appendChild(i)}else if("links"==a){var o=p(s);o&&r.appendChild(o)}else if("license"==a){var c=u(s);c&&r.appendChild(c)}else if("ethics"==a)r.innerHTML=s;else if("copyright"==a)r.innerHTML="&copy; "+s;else if("text"==a){var l=S(s);l&&r.appendChild(l)}else r.innerHTML+=s;var m={credit:"Photography by",ethics:"Code of ethics",caption:"Caption"}[a];if(r.childNodes.length){if(m){var f=document.createElement("div");f.classList.add("fc-row-label"),f.innerHTML=m,r.childNodes?r.insertBefore(f,r.childNodes[0]):r.appendChild(f)}d.appendChild(r)}}}),Object.keys(b).length||c.classList.add("fc-empty")}l.appendChild(d),c.appendChild(l),a.appendChild(c)}t[s]=c}),t},h=function(e){var t=["youtube","vimeo","soundcloud"],a=document.createElement("div");if(a.className="fc-row-inner",e.forEach(function(e,n){if(Object.keys(e).length){var s=document.createElement("div");if(s.className="fc-sub-row",0<=t.indexOf(e.source)?f(e,s):m(e,s),e.caption){var r=document.createElement("div");r.className="fc-sub-caption",r.innerHTML=e.caption,s.appendChild(r)}a.appendChild(s)}}),a.childNodes.length)return a},p=function(e){var t=document.createElement("div");return t.className="fc-sub-rows",e.forEach(function(e,a){if(e){var n=document.createElement("div");n.className="fc-sub-row";var s=document.createElement("a");s.href=e.url,s.target="_blank",e.title&&(s.innerHTML=e.title),n.appendChild(s);var r=g(e.url);if(r){var i=document.createElement("div");i.className="fc-sub-url",i.innerHTML=r,n.appendChild(i)}t.appendChild(n)}}),t},u=function(e){var t=document.createElement("a");t.href=e,t.target="_blank",t.innerHTML=e;var a=document.createTextNode("License this photo: "),n=document.createElement("span");return n.appendChild(a),n.appendChild(t),n},m=function(e,t){var a=document.createElement("div");if(a.className="fc-media",e.url){var n=new Image;n.onload=function(n){var s=document.createElement("img");s.src=e.url,a.appendChild(s),t.appendChild(a),t.childNodes?t.insertBefore(a,t.childNodes[0]):t.appendChild(a)},n.onerror=function(t){console.warn("Four Corners cannot load this as an image: "+e.url,t)},n.src=e.url}},f=function(e,t){var a="";switch(e.source){case"youtube":a="https://noembed.com/embed?url="+e.url;break;case"vimeo":a="https://vimeo.com/api/oembed.json?url="+e.url;break;case"soundcloud":a="https://soundcloud.com/oembed?format=json&url="+e.url;break;default:return!1}fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){var a=document.createElement("div");if(a.className="fc-media",a.innerHTML=e.html,Number.isInteger(e.width,e.height)){var n=e.height/e.width;a.classList.add("fc-responsive"),a.style.paddingBottom=100*n+"%"}t.childNodes?t.insertBefore(a,t.childNodes[0]):t.appendChild(a)}).catch(function(e){t.remove(),console.warn("Four Corners cannot load this media source: "+src,e)})},g=function(e){if(!e)return!1;var t,a=!!(t=e)&&(-1<t.indexOf("//")?t.split("/")[2]:t.split("/")[0]).split(":")[0].split("?")[0],n=a.split("."),s=n.length;return 2<s&&(a=n[s-2]+"."+n[s-1],2==n[s-2].length&&2==n[s-1].length&&(a=n[s-3]+"."+a)),a},v=function(e){var t,a={},n=e.elems.embed,s=(e.elems.photo,e.opts.active);return e.corners.forEach(function(r,i){var o='.fc-corner[data-fc-slug="'+r+'"]';if(!n.querySelector(o)){var c=document.createElement("div");c.dataset.fcSlug=r,c.classList.add("fc-corner"),c.classList.add("fc-"+r),r==s&&c.classList.add("fc-active"),e.data&&((t=e.data[r])&&Object.keys(t).length||c.classList.add("fc-empty")),e.opts.interactive&&(c.addEventListener("mouseenter",function(t){C(t,e)}),c.addEventListener("mouseleave",function(t){y(t,e)}),c.addEventListener("click",function(t){k(t,e)})),a[r]=c,n.appendChild(c)}}),a},E=function(e){if(e.data&&e.opts.cutline){var t=e.data.authorship;if(t&&Object.keys(t).length){var a=e.elems.embed,n=document.createElement("div");n.classList.add("fc-cutline");var s=[];t.credit&&s.push(t.credit),s.push('<a href="#" class="fc">Four Corners</a>');var r=s.join(" ");n.innerHTML=r,a.parentNode.insertBefore(n,a.nextSibling)}}},b=function(e){if(e.elems.embed){var t=e.elems.embed.dataset.fc;if(t)return t=t,delete e.elems.embed.dataset.fc,JSON.parse(t)}},C=function(e,t){e.target.classList.add("fc-hover")},y=function(e,t){e.target.classList.remove("fc-hover")},k=function(e,t){var a=e.target.dataset.fcSlug,n=t.elems.embed.dataset.fcActive;a&&(a==n?t.closeCorner(a):t.openCorner(a))},x=function(e,t){t.closeCorner()},N=function(e,t){var a=!1;return Object.entries(t).forEach(function(t){var s=n(t,2);s[0],s[1].contains(e)&&(a=!0)}),a},S=function(e){var t=e.split(/\n/g),a=document.createElement("div");return a.className="fc-row-inner",t.forEach(function(e,t){var n=document.createElement("p");n.innerHTML=e,a.appendChild(n)}),a},w=r;t.default=w}])},201:function(e,t){},372:function(e,t){},373:function(e,t,a){},375:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(31),i=a(62),o=a(378),c=a(379),l=a(380),d=a(377),h=a(97),p=a(151),u=a.n(p),m=a(152),f=a.n(m);h.a.use(u.a).use(f.a).use(i.b).init({fallbackLng:"en",debug:!0,react:{wait:!0,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"},detection:{order:["path","querystring","cookie","localStorage","navigator","htmlTag","subdomain"],lookupQuerystring:"lang",lookupCookie:"i18n",lookupLocalStorage:"i18nextLng"},backend:{loadPath:SiteSettings.url.api+"{{ns}}/{{lng}}"}});var g=h.a;var v=class extends s.a.Component{constructor(e){super(e),this.state={lang:"en",langs:{},menu:[]},this.onLanguageChanged=this.onLanguageChanged.bind(this)}componentDidMount(){let e=this,t=(g.language,SiteSettings.url.api+"get_langs");fetch(t).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){e.setState({langs:JSON.parse(t)})});let a=SiteSettings.url.api+"menu";fetch(a).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){e.setState({menu:t})})}componentWillUnmount(){g.off("languageChanged",this.onLanguageChanged)}onLanguageChanged(e){this.setState({lang:e})}renderLangList(){const e=this.state.langs;return s.a.createElement("select",{onChange:this.changeLang.bind(this),className:"form-control"},Object.keys(this.state.langs).map(function(t,a){const n=e[t];return s.a.createElement("option",{key:t,value:t},n.name)}))}changeLang(e){}renderMenu(){let e=[];const t=this.state.menu;return this.state.lang,t&&(e=t.map((e,t)=>s.a.createElement(d.a,{to:SiteSettings.path+e.slug,key:t},e.title))),s.a.createElement("nav",{id:"nav"},e)}render(){return this.state.lang,s.a.createElement("header",{className:"header"},s.a.createElement("div",{className:"max-width"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col col-12 col-sm-6 col-md-7 left"},s.a.createElement("div",{className:"col-content"},s.a.createElement("div",{id:"title"},s.a.createElement("h1",{id:"site-title"},s.a.createElement(d.a,{to:SiteSettings.path},"Four Corners"))))),s.a.createElement("div",{className:"col col-12 col-sm-6 col-md-5 right"},s.a.createElement("div",{className:"col-content"},this.state?this.renderMenu():null)))))}};var E=()=>s.a.createElement("footer",{className:"footer"},s.a.createElement("div",{className:"max-width"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col col-12 col-sm-12 col-md-6 left"},s.a.createElement("div",{className:"col-content"},"Four Corners ",(new Date).getFullYear())),s.a.createElement("div",{className:"col col-12 col-sm-12 col-md-6 right"}))));var b=class extends s.a.Component{constructor(e){super(e),this.state={page:{}}}componentDidMount(){let e=this,t=g.language,a=SiteSettings.url.api+"page?slug=home&lang="+t;fetch(a).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){t&&e.setState({page:t})}),g.on("languageChanged",this.onLanguageChanged)}renderHome(){if(this.state.page)return s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"card-text",dangerouslySetInnerHTML:{__html:this.state.page.post_content}}))}render(){return s.a.createElement("main",{id:"home"},s.a.createElement("div",{className:"max-width"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col col-12 col-sm-6 col-md-7"},this.state.page?this.renderHome():null))))}},C=a(96),y=a.n(C),k=a(153),x=a.n(k);var N=class extends s.a.Component{constructor(e){super(e),this.state={lang:"en",page:{},embeds:{},embedHtmls:{}},this.slugs=["authorship","backstory","context","links"],this.onLanguageChanged=this.onLanguageChanged.bind(this)}componentDidMount(){let e=this,t=g.language,a=SiteSettings.url.api+"page?slug=how&lang="+t;fetch(a).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){t&&(e.setState({page:t}),e.initEmbeds())}),g.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){g.off("languageChanged",this.onLanguageChanged)}componentDidUpdate(){}onLanguageChanged(e){this.setState({lang:e})}initEmbeds(){this.slugs.forEach((e,t)=>{if(this.state.page&&this.state.page.acf){const t=this.state.page.acf,a=y()(t[e+"_embed"]);let n=this.state.embedHtmls;n[e]=a,this.setState({embedHtmls:n}),x.a.prototype.init({cutline:!1,active:e})}})}renderRow(e,t){const a="row explainer"+(t%2==0?"":" reverse"),n=this.state.page;let r={};return["title","desc","embed"].forEach((t,a)=>{n&&n.acf&&n.acf[e+"_"+t]?r[t]=y()(n.acf[e+"_"+t]):r[t]=""}),s.a.createElement("div",{className:a,key:t},s.a.createElement("div",{className:"col col-5"},s.a.createElement("div",{className:"col-content"},s.a.createElement("h2",null,r.title),r.desc)),s.a.createElement("div",{className:"col col-7"},s.a.createElement("div",{className:"col-content"},this.state.embedHtmls[e])))}render(){this.state.lang,this.state.page;let e=[];return this.slugs.forEach((t,a)=>{e.push(this.renderRow(t,a))}),s.a.createElement("main",{id:"how"},s.a.createElement("div",{className:"max-width"},e))}};a(108),a(368);var S={photo:{fields:{file:{type:"file"}}},authorship:{fields:{credit:{type:"text"},caption:{type:"textarea",rows:2},ethics:{type:"select",customize:!0},bio:{type:"textarea"},website:{type:"text"},website:{type:"text"},contact:{type:"group",fields:{info:{type:"text"},rights:{type:"text"}}}}},backstory:{fields:{text:{type:"textarea"},audio:{type:"blocks",fields:{url:{type:"text",format:"uri"},caption:{type:"text"}}}}},context:{fields:{media:{type:"blocks",fields:{url:{type:"text",format:"uri"},caption:{type:"text"}}}}},links:{fields:{links:{type:"blocks",fields:{title:{type:"text"},url:{type:"text",format:"uri"}}}}},opts:{fields:{dark:{type:"checkbox"}}}};a(1);var w=class extends s.a.Component{constructor(e){super(e),this.state={opened:!1}}onClick(e){this.setState({opened:!this.state.opened})}renderToggle(){return this.props.strings.desc?s.a.createElement("div",{className:"toggle-desc",onClick:this.onClick.bind(this)},"?"):null}render(){const e=this.props.strings,t="field-desc desc"+(this.state.opened?" opened":"");return s.a.createElement("div",{className:"field-label"},e&&e.label?s.a.createElement("label",{name:this.props.id,htmlFor:this.props.id},e.label,this.renderToggle()):null,e&&e.desc?s.a.createElement("div",{className:t},e.desc):null)}};var D=class extends s.a.Component{constructor(e){super(e),this.state={value:""}}onChange(e){const t=e.target.name,a=e.target.value;this.props.onChange(t,a)}render(){const e=this.props.id,t=this.props.data.text,a=[this.props.fieldset,e].join("_");return s.a.createElement("div",{className:"field input"},s.a.createElement(w,{strings:t,fieldId:e}),s.a.createElement("input",{name:a,className:"form-elem",onChange:this.onChange.bind(this)}))}};var L=class extends s.a.Component{constructor(e){super(e),this.state={value:""}}onChange(e){const t=e.target.name,a=e.target.value;this.props.onChange(t,a)}render(){const e=this.props.id,t=this.props.data.text,a=t.placeholder,n=this.props.fieldset,r=this.props.data.rows,i=[n,e].join("_");return s.a.createElement("div",{className:"field input"},s.a.createElement(w,{strings:t,fieldId:e}),s.a.createElement("textarea",{name:i,className:"form-elem",rows:r||6,placeholder:a,onChange:this.onChange.bind(this)}))}};var j=class extends s.a.Component{constructor(e){super(e),this.state={imgSrc:"",imgLoaded:!1}}componentDidUpdate(){}onChangeSrc(e){let t,a=new Image;a.onload=(a=>{t={imgSrc:e,imgLoaded:!0},this.setState(t),this.props.sendImgData(t)}),a.onerror=(e=>{const a=SiteSettings.url.theme+"/assets/images/placeholder.svg";t={imgSrc:a,imgLoaded:!1},this.setState(t),this.props.sendImgData(t)}),a.src=e}render(){const e=this.props.id,t=this.props.data.text,a=[this.props.fieldset,e].join("_");return s.a.createElement("div",{className:"field file"},s.a.createElement(w,{strings:t,fieldId:e}),s.a.createElement("input",{id:e,name:a,type:"url",className:"form-control",placeholder:"https://sample.org/photo.jpg",onChange:e=>{this.onChangeSrc(e.target.value)}}))}};a(8);var F=class extends s.a.Component{constructor(e){super(e),this.state={custom:!1,customText:""},this.selectRef=s.a.createRef()}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(e,t,a){}onClick(e){const t=e.currentTarget.classList.contains("custom"),a=e.currentTarget.dataset.value;this.setState({value:a,custom:t});const n=this.selectRef.current.name;this.props.onChange(n,a)}onChange(){}onChangeCustom(e){const t=e.currentTarget.value;this.setState({customText:t,value:t});const a=this.selectRef.current.name;this.props.onChange(a,t)}render(){const e=this.props.id,t=this.props.data.text,a=[this.props.fieldset,e].join("_"),n=this.props.data.options,r=this.state.value,i=this.props.data.customize;return s.a.createElement("div",{className:"field select"},s.a.createElement(w,{strings:t,fieldId:e}),s.a.createElement("select",{name:a,className:"form-elem",value:this.state.value,ref:this.selectRef,onChange:this.onChange},n.map(({desc:e,label:t},a)=>s.a.createElement("option",{key:a,value:e},t+(e?": "+e:"")))),s.a.createElement("div",{"data-id":e,className:"select-widget form-elem","data-value":void 0===r?"":r},n.map(({desc:e,label:t},n)=>{const o=i&&0==n;o&&(e=this.state.customText);let c=r===e?"option selected":"option";return c+=o?" custom":"",s.a.createElement("div",{key:n,className:c,"data-value":e,onClick:this.onClick.bind(this)},s.a.createElement("div",{className:"option-label"},t),e?s.a.createElement("div",{className:"option-desc"},e):"",o?s.a.createElement("textarea",{name:a+"Custom",className:"form-elem desc",onChange:this.onChangeCustom.bind(this)}):"")})))}};const _=a(95);var O=class extends s.a.Component{constructor(e){super(e),this.state={value:"",blocks:[],mediaData:[]}}onChange(e){const t=e.target,a=t.name,n=t.value,s=a.split("_"),r=s[0],i=s[1],o=s[2],c=[r,i].join("_"),l=Number(t.parentElement.parentElement.dataset.index);let d=this.state.blocks;d[l],d[l][o]=n,d[l].url&&this.getMediaData(d[l],r,l),this.setState({blocks:d}),this.props.onChange(c,d)}getMediaData(e,t,a){const n=e.url,s=e.source,r=encodeURIComponent(n),i=Object.assign({},this.state.mediaData);let o="";switch(i[t]=[],s){case"youtube":o="https://noembed.com/embed?url="+r;break;case"vimeo":o="https://vimeo.com/api/oembed.json?url="+r;break;case"soundcloud":o="https://soundcloud.com/oembed?format=json&url="+r;break;default:return!1}const c=new Headers;fetch(o,{method:"GET",headers:c,mode:"cors",cache:"default"}).then(e=>{if(!e.ok)throw Error(e.statusText);return e.json()}).then(e=>{i[t][a]={html:e.html,width:e.width,height:e.height},this.setState({mediaData:i}),this.props.sendMediaData(i)}).catch(function(e){console.log(e)})}renderBlocks(){let e=[];return this.state.blocks.map((t,a)=>{e.push(this.renderBlock(t,a))}),e}renderBlock(e,t){const a=this.props.fieldset,n=this.props.id,r=this.props.data;if(!r.types)return null;const i=r.types[e.source];if(!i)return null;i.slug=_(i.label,{lower:!0}),i.name=[a,n,"source"].join("_");const o=r.fields;let c=[];return Object.keys(o).map((e,t)=>{const a=o[e],n=this.renderField(e,a,i,t);c.push(n)}),s.a.createElement("div",{className:"block-widget","data-slug":e.sourceSlug,"data-index":t,key:t},s.a.createElement("input",{name:i.name,type:"hidden",value:i.slug,onChange:this.onChange.bind(this)}),c,s.a.createElement("div",{className:"delete-block","data-index":t,onClick:this.deleteBlock.bind(this)}))}renderField(e,t,a,n){const r=this.props.fieldset,i=this.props.id,o=(this.props.data,[r,i,e].join("_"));let c=Object.assign({},t.text);return"url"==e&&(c=a),s.a.createElement("div",{className:"field input",key:n},s.a.createElement(w,{strings:c,fieldId:i}),s.a.createElement("input",{name:o,type:"text",placeholder:c.placeholder,className:"form-elem",onChange:this.onChange.bind(this)}))}renderButtons(){const e=this.props.data.types;if(!e)return;let t=[];return Object.keys(e).map((a,n)=>{let s=e[a];const r=this.renderButton(s,a);t.push(r)}),t}renderButton(e,t){return s.a.createElement("div",{className:"button add-block","data-slug":t,key:t,onClick:this.addBlock.bind(this)},"Add ",e.label)}addBlock(e){e.preventDefault();let t=this.state.blocks;t.push({source:e.target.dataset.slug}),this.setState({blocks:t}),this.props.sendActiveCorner(this.props.fieldset)}deleteBlock(e){let t=this.state.blocks;const a=e.target.dataset.index;t.splice(a,1),this.setState({blocks:t})}render(){const e=this.props.id;return this.props.data.text,[this.props.fieldset,e].join("_"),s.a.createElement("div",{className:"field input"},s.a.createElement("div",{className:"blocks-widget"},this.renderBlocks()),s.a.createElement("div",{className:"blocks-buttons"},this.renderButtons()))}};a(95);var M=class extends s.a.Component{constructor(e){super(e),this.state={value:"",mediaData:[]}}onChange(e){const t=e.target,a=t.name;t.value,a.split("_")[0]}renderGroup(){const e=this.props.data;if(!e)return;const t=e.fields;let a=[];return Object.keys(t).map((e,n)=>{const s=t[e],r=this.renderField(e,s,n);a.push(r)}),a}renderField(e,t,a){const n=this.props.fieldset,r=this.props.id,i=(this.props.data.text,[n,r,e].join("_"));return s.a.createElement("div",{className:"field input",key:a},s.a.createElement(w,{strings:t,id:r}),s.a.createElement("input",{name:i,type:"text",placeholder:t.placeholder,className:"form-elem",onChange:this.onChange.bind(this)}))}render(){const e=this.props.id;return[this.props.fieldset,e].join("_"),s.a.createElement("div",{className:"fields-group"},this.renderGroup())}};var T=class extends s.a.Component{constructor(e){super(e),this.state={value:""}}onChange(e){const t=e.target.name,a=e.target.checked;this.props.onChange(t,a)}render(){const e=this.props.id,t=this.props.data.text,a=[this.props.fieldset,e].join("_");return s.a.createElement("div",{className:"field input"},s.a.createElement("div",{className:"checkbox-widget"},s.a.createElement("input",{className:"toggle",id:e,name:a,type:"checkbox",defaultChecked:!1,onChange:this.onChange.bind(this)}),s.a.createElement("label",{className:"checkbox",htmlFor:e},s.a.createElement("div",{className:"label-inner"},t&&t.label?s.a.createElement("span",null,t.label):""))),t&&t.desc?s.a.createElement("div",{className:"desc"},t.desc):"")}};var A=class extends s.a.Component{constructor(e){super(e),this.state={expand:!1}}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(){}toggleExpand(){}onToggle(){const e=this.props.id,t=e==this.props.activeFieldset?null:e;t&&this.props.sendActiveCorner(t),this.props.sendActiveFieldset(t)}renderFields(){const e=this.props.data.fields,t=Object.keys(e),a=[];for(let n of t){const t=e[n];switch(t.type){case"text":a.push(s.a.createElement(D,{id:n,fieldset:this.props.id,data:t,key:a.length,onChange:this.props.onChange}));break;case"textarea":a.push(s.a.createElement(L,{id:n,fieldset:this.props.id,data:t,key:a.length,onChange:this.props.onChange}));break;case"checkbox":a.push(s.a.createElement(T,{id:n,fieldset:this.props.id,data:t,key:a.length,onChange:this.props.onChange}));break;case"select":a.push(s.a.createElement(F,{id:n,fieldset:this.props.id,data:t,key:a.length,onChange:this.props.onChange}));break;case"file":a.push(s.a.createElement(j,{id:n,fieldset:this.props.id,data:t,key:a.length,onChange:this.props.onChange,sendImgData:this.props.sendImgData}));break;case"blocks":a.push(s.a.createElement(O,{id:n,fieldset:this.props.id,data:t,key:a.length,onChange:this.props.onChange,sendActiveCorner:this.props.sendActiveCorner,sendMediaData:this.props.sendMediaData}));break;case"group":a.push(s.a.createElement(M,{id:n,fieldset:this.props.id,data:t,key:a.length,onChange:this.props.onChange,sendMediaData:this.props.sendMediaData}))}}return a}render(){const e=this.props.data.text,t=this.props.id==this.props.activeFieldset;return s.a.createElement("fieldset",{id:this.props.id,className:t?"expand":"collapse"},s.a.createElement("legend",{onClick:this.onToggle.bind(this)},s.a.createElement("span",null,e.title)),s.a.createElement("div",{className:"fieldset-inner"},e.desc?s.a.createElement("div",{className:"fieldset-desc desc"},e.desc):"",this.renderFields()))}};const P=a(95);var R=class extends s.a.Component{constructor(e){super(e),this.state={mediaData:this.props.mediaData,formData:{authorship:{},backstory:{},context:{},links:{},opts:{}},imgSrc:null}}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(e,t,a){}onFocus(e){const t=e.target.name.split("_")[0];this.props.sendActiveCorner(t),this.props.sendActiveFieldset(t)}onBlur(e){}onChange(e,t){const a=this.state.formData,n=e.split("_");let s=n[0],r=n[1];a[s]&&(a[s][r]=t,this.setState({formData:a}),this.props.sendFormData(a))}onToggle(e){}onError(e){}renderSchema(){this.state.lang;const e=this.props.creator.acf,t=Object.keys(S);let a=[];for(let n of t){const t=S[n].fields,r=Object.keys(t);S[n].text={title:e[[n,"title"].join("_")],desc:e[[n,"desc"].join("_")]};for(let a of r){let s=t[a];if(s){if(S[n].fields[a].text={label:e[[n,a,"label"].join("_")],desc:e[[n,a,"desc"].join("_")],placeholder:e[[n,a,"placeholder"].join("_")]},"select"==s.type){const t=e[[n,a,"options"].join("_")];S[n].fields[a].options=t}if("blocks"==s.type||"group"==s.type){const t="blocks"==s.type?"types":"fields",r=S[n].fields[a].fields,i=Object.keys(r);for(let s of i){const r=e[[n,a,"types"].join("_")];if(S[n].fields[a][t]={},r)for(let e of r){let s=e.slug||P(e.label,{lower:!0});S[n].fields[a][t][s]=e}S[n].fields[a].fields[s].text={label:e[[n,a,s,"label"].join("_")],placeholder:e[[n,a,s,"placeholder"].join("_")],desc:e[[n,a,s,"desc"].join("_")]}}}}}const i=s.a.createElement(A,{id:n,data:S[n],key:n,onChange:this.onChange.bind(this),activeCorner:this.props.activeCorner,activeFieldset:this.props.activeFieldset,sendActiveCorner:this.props.sendActiveCorner,sendActiveFieldset:this.props.sendActiveFieldset,sendMediaData:this.props.sendMediaData,sendImgData:this.props.sendImgData});a.push(i)}return a}render(){return s.a.createElement("div",{className:"col-inner"},s.a.createElement("div",{id:"forms",className:"col-content"},s.a.createElement("form",{onFocus:this.onFocus.bind(this)},this.renderSchema())))}};a(376),a(147);var H=class extends s.a.Component{constructor(e){super(e),this.state={}}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(e,t,a){}renderText(e){if(this.props.cornerSlug,this.props.fieldSlug,!this.props.fieldData)return;let t=[];return this.props.fieldData.split(/\n/g).forEach(function(e,a){t.push(s.a.createElement("p",{key:a},e))}),s.a.createElement("div",{className:"fc-row-inner"},t)}renderMedia(){const e=[];if(this.props.cornerSlug,this.props.fieldSlug,this.props.fieldData)return this.props.fieldData.forEach((t,a)=>{let n="";if("image"!=t.source&&t.source){const e=this.props.mediaData[a];n=e?s.a.createElement("div",{className:"fc-media",dangerouslySetInnerHTML:{__html:e.html}}):null}else n=t.url?s.a.createElement("img",{src:t.url,alt:""}):null;const r=t.caption?s.a.createElement("div",{className:"fc-sub-caption"},t.caption):null;if(n||r){const t=s.a.createElement("div",{className:"fc-sub-row",key:a},n,r);e.push(t)}}),e.length?s.a.createElement("div",{className:"fc-row-inner"},e):null}extractHostname(e){let t;return!!e&&(t=(t=(t=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0]).split("?")[0])}extractRootDomain(e){if(!e)return!1;let t=this.extractHostname(e),a=t.split("."),n=a.length;return n>2&&(t=a[n-2]+"."+a[n-1],2==a[n-2].length&&2==a[n-1].length&&(t=a[n-3]+"."+t)),t}renderLinks(){const e=[];return this.props.fieldData.forEach((t,a)=>{const n=s.a.createElement("div",{className:"fc-sub-row",key:a},s.a.createElement("a",{href:t.url,target:"_blank"},t.title),t.url?s.a.createElement("div",{className:"fc-sub-url"},this.extractRootDomain(t.url)):"");e.push(n)}),s.a.createElement("div",{className:"fc-row-inner"},e)}renderLicense(){const e=this.props.fieldData;return s.a.createElement("span",null,"License this photo"," ",s.a.createElement("a",{href:e,target:"_blank"},e))}renderEntry(){switch(this.props.fieldSlug){case"media":return this.renderMedia();case"links":return this.renderLinks();case"license":return this.renderLicense();case"text":return this.renderText();default:return this.props.fieldData}}render(){this.props.cornerSlug;const e=this.props.fieldSlug,t=this.props.fieldData?this.renderEntry():null;return t?s.a.createElement("div",{className:"fc-row fc-"+e},t):null}};var I=class extends s.a.Component{constructor(e){super(e),this.corners=["context","links","authorship","backstory"],this.state={fourCorners:null,formData:{},expandPanel:!1}}componentDidMount(){const e=FourCorners.default.prototype.init();e&&(this.fourCorners=e[0])}componentDidUpdate(e,t,a){}onChangeOpts(e){let t={formData:this.props.formData};t[e.target.id]=e.target.checked,this.setState(t)}onFocus(e){e.target.setSelectionRange(0,e.target.value.length)}onBlur(e){}onError(e){console.log("Error",e)}onScroll(e){}openPanel(e){const t=e.target.dataset.fcSlug;this.props.sendActiveCorner(t),this.setState({expandPanel:!1})}toggleExpandPanel(){this.setState({expandPanel:!this.state.expandPanel})}collapsePanel(){this.props.sendActiveCorner(null),this.setState({expandPanel:!1})}renderPanels(){const e={};Object.entries(this.props.formData).map(t=>this.corners.includes(t[0])?e[t[0]]=t[1]:"");const t=[],a=this.props.creator.acf;return Object.entries(e).forEach((e,n)=>{const r=e[0],i=[r,"title"].join("_"),o=a[i],c=e[1],l=[];Object.entries(c).forEach((e,t)=>{const n=e[0],i=e[1];let o="";if(!["media","links"].includes(n)){const e=[r,n,"label"].join("_");o=a[e]}const c=this.props.mediaData[r];i&&l.push(s.a.createElement(H,{cornerSlug:r,fieldLabel:o,fieldSlug:n,fieldData:i,mediaData:c,key:t}))});let d="fc-panel fc-"+r;this.props.activeCorner==r&&(d+=" fc-active"),t.push(s.a.createElement("div",{className:d,"data-fc-slug":r,key:n},s.a.createElement("div",{className:"fc-scroll"},s.a.createElement("div",{className:"fc-inner"},s.a.createElement("div",{className:"fc-panel-title"},s.a.createElement("span",null,o),s.a.createElement("div",{className:"fc-icon fc-expand",onClick:this.toggleExpandPanel.bind(this)}),s.a.createElement("div",{className:"fc-icon fc-close",onClick:this.collapsePanel.bind(this)})),l))))}),t}renderCorners(){const e=[];return this.corners.forEach((t,a)=>{let n="fc-corner fc-"+t;this.props.activeCorner==t&&(n+=" fc-active"),e.push(s.a.createElement("div",{key:a,className:n,"data-fc-slug":t,onClick:this.openPanel.bind(this)}))}),e}render(){const e=this.props.imgData,t=e?e.imgSrc:null,a=e?e.imgLoaded:null;let n="fc-embed";this.props.formData.opts&&this.props.formData.opts.dark&&(n+=" fc-dark"),this.state.expandPanel&&(n+=" fc-full"),t&&(n+=" fc-loaded");const r=this.props.activeCorner;return s.a.createElement("div",{className:n,"data-fc-active":this.corners.includes(r)?r:""},a?"":s.a.createElement("div",{className:"no-photo"},s.a.createElement("h2",null,"No photo")),s.a.createElement("div",{className:t?"fc-photo fc-loaded":"fc-photo"},s.a.createElement("img",{src:t,className:"fc-img"})),this.renderCorners(),this.renderPanels())}};var B=class extends s.a.Component{constructor(e){super(e),this.state={includeCss:!1,includeJs:!1,stickyStyle:{},expand:!1},this.imgInputRef=s.a.createRef(),this.outputRef=s.a.createRef(),this.includeJSRef=s.a.createRef(),this.includeCSSRef=s.a.createRef(),this.stickyRef=s.a.createRef()}componentDidMount(){document.body.addEventListener("scroll",this.onScroll.bind(this)),window.addEventListener("resize",this.onScroll.bind(this))}componentWillUnmount(){document.body.removeEventListener("scroll",this.onScroll.bind(this)),window.removeEventListener("resize",this.onScroll.bind(this))}shouldComponentUpdate(e,t){return!0}componentDidUpdate(e){}onChangeOpts(e){let t={formData:this.props.formData};"checkbox"==e.target.type&&(t[e.target.name]=e.target.checked),this.setState(t)}onFocus(e){e.target.setSelectionRange(0,e.target.value.length)}onBlur(e){}onError(e){console.log("Error",e)}toggleExpand(e){e.preventDefault(),this.setState({expand:!this.state.expand})}onScroll(e){const t=this.stickyRef.current;if(!t)return;const a=t.parentElement.getBoundingClientRect(),n=a.top,s=a.left,r=a.width,i=a.height,o=window.innerHeight;let c={};n<=0&&i>=o&&(c={width:r+"px",height:"100%",position:"fixed",top:0,left:s+"px"}),this.setState({stickyStyle:c})}embedCode(e){const t=this.props.imgData;let a={lang:g.language},n=Object.assign(e,a),s="<div class='fc-embed' data-fc='"+JSON.stringify(n).replace(/'/g,"&apos;")+"'>"+(t.imgLoaded?"<img class='fc-img' src='"+t.imgSrc+"'/>":"")+"</div>";return s+=this.state.includeCss?'<link href="https://cdn.jsdelivr.net/gh/four-corners/four-corners.js/dist/four-corners.min.css" rel="stylesheet" type="text/css">':"",s+=this.state.includeJs?'<script src="https://cdn.jsdelivr.net/gh/four-corners/four-corners.js/dist/four-corners.min.js" type="text/javascript"><\/script>':""}render(){this.props.creator.acf;const e=this.props.imgLoaded?"has-image":"";return s.a.createElement("div",{className:"col-inner"},s.a.createElement("div",{className:"sticky",style:this.state.stickyStyle,ref:this.stickyRef},s.a.createElement("div",{className:"col-content"},s.a.createElement("div",{id:"preview",className:e},s.a.createElement(I,{creator:this.props.creator,formData:this.props.formData,imgData:this.props.imgData,mediaData:this.props.mediaData,activeCorner:this.props.activeCorner,activeFieldset:this.props.activeFieldset,sendActiveCorner:this.props.sendActiveCorner,sendActiveFieldset:this.props.sendActiveFieldset}),s.a.createElement("div",{id:"embed-output"},s.a.createElement("form",{name:"embed",onChange:this.onChangeOpts.bind(this)},s.a.createElement("fieldset",{className:this.state.expand?"expand":"collapse"},s.a.createElement("legend",{onClick:this.toggleExpand.bind(this)},s.a.createElement("span",null,this.props.creator.acf.embed_title)),s.a.createElement("div",{className:"fieldset-inner"},s.a.createElement("div",{className:"field"},s.a.createElement("textarea",{className:"output form-elem",id:"json",readOnly:!0,ref:this.outputRef,rows:3,value:this.embedCode(this.props.formData),onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this)})),s.a.createElement("div",{className:"desc"},"Paste this into your website.")))))))))}};var U=class extends s.a.Component{constructor(e){super(e),this.state={creator:{},lang:"en",formData:{context:{},links:{},authorship:{},backstory:{}},imgData:{},mediaData:{context:[]},activeCorner:null,activeFieldset:null},this.corners=["context","links","authorship","backstory"],this.onLanguageChanged=this.onLanguageChanged.bind(this),this.outputRef=s.a.createRef()}componentDidMount(){let e=this,t=g.language,a=SiteSettings.url.api+"creators?lang="+t;fetch(a).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){if(!t.length)return!1;e.setState({creator:t[0]})}).catch(function(e){console.log(e)}),g.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){g.off("languageChanged",this.onLanguageChanged)}componentDidUpdate(){}onLanguageChanged(e){this.setState({lang:e})}setFormData(e){this.setState({formData:e})}setMediaData(e){this.setState({mediaData:e})}setActiveCorner(e){e||(e=""),this.setState({activeCorner:e})}setActiveFieldset(e){e||(e=""),this.setState({activeFieldset:e})}setImgData(e){const t=e;this.setState({imgData:t})}renderFormCol(){return s.a.createElement(R,{lang:this.state.lang,creator:this.state.creator,formData:this.state.formData,activeCorner:this.state.activeCorner,activeFieldset:this.state.activeFieldset,sendActiveCorner:this.setActiveCorner.bind(this),sendActiveFieldset:this.setActiveFieldset.bind(this),sendFormData:this.setFormData.bind(this),sendMediaData:this.setMediaData.bind(this),sendImgData:this.setImgData.bind(this)})}renderPreviewCol(){return s.a.createElement(B,{lang:this.state.lang,creator:this.state.creator,formData:this.state.formData,mediaData:this.state.mediaData,imgData:this.state.imgData,activeCorner:this.state.activeCorner,activeFieldset:this.state.activeFieldset,sendActiveCorner:this.setActiveCorner.bind(this),sendActiveFieldset:this.setActiveFieldset.bind(this)})}render(){return this.state.lang,this.state.creator&&this.state.creator.ID?s.a.createElement("main",{id:"creator"},s.a.createElement("div",{className:"max-width"},s.a.createElement("div",{className:"row","data-sticky-container":!0},s.a.createElement("div",{className:"col col-12 col-sm-6 col-md-7 left col-preview"},s.a.createElement("div",{className:"desc"},"Fill in the content for each of the Four Corners below. You can begin working on whichever corner that you prefer. Although it is not required to fill in information for all of the Four Corners, it is highly recommended for a better experience by the reader.  Only the corners that are utilized will appear to the viewer."),this.renderPreviewCol()),s.a.createElement("div",{className:"col col-12 col-sm-6 col-md-5 right col-form"},this.renderFormCol())))):null}};var q=class extends s.a.Component{constructor(e){super(e),this.state={page:{}}}componentDidMount(){var e=this,t=window.location.href.split("/"),a=t.pop()||t.pop();fetch(SiteSettings.url.api+"pages?slug="+a).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){e.setState({page:t[0]})})}renderPage(){if(this.state.page.title)return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",null,this.state.page.title.rendered),s.a.createElement("p",{className:"card-text",dangerouslySetInnerHTML:{__html:this.state.page.content.rendered}}))}render(){return s.a.createElement("main",{id:"home"},s.a.createElement("div",{className:"max-width"},this.state.page?this.renderPage():null))}};a(372),a(373);const J=s.a.createElement(i.a,null,e=>s.a.createElement(o.a,null,s.a.createElement(s.a.Fragment,null,s.a.createElement(v,null),s.a.createElement(c.a,null,s.a.createElement(l.a,{exact:!0,path:SiteSettings.path,component:b}),s.a.createElement(l.a,{path:SiteSettings.path+"create",component:U}),s.a.createElement(l.a,{path:SiteSettings.path+"how",component:N}),s.a.createElement(l.a,{path:"*",component:q})),s.a.createElement(E,null))));Object(r.render)(J,document.getElementById("page"))}});
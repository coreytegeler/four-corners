!function(e){function t(t){for(var n,o,i=t[0],c=t[1],l=t[2],m=0,u=[];m<i.length;m++)o=i[m],r[o]&&u.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(d&&d(t);u.length;)u.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={0:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=c;s.push([376,1]),a()}({202:function(e,t){},232:function(e,t){},373:function(e,t){},374:function(e,t,a){},376:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(51),o=a(63),i=a(378),c=a(380),l=a(379),d=a(377),m=a(98),u=a(152),p=a.n(u),h=a(153),f=a.n(h);m.a.use(p.a).use(f.a).use(o.b).init({fallbackLng:"en",debug:!0,react:{wait:!0,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"},detection:{order:["path","querystring","cookie","localStorage","navigator","htmlTag","subdomain"],lookupQuerystring:"lang",lookupCookie:"i18n",lookupLocalStorage:"i18nextLng"},backend:{loadPath:SiteSettings.url.api+"{{ns}}/{{lng}}"}});var g=m.a;var v=class extends r.a.Component{constructor(e){super(e),this.state={lang:"en",langs:{}},this.onLanguageChanged=this.onLanguageChanged.bind(this)}componentDidMount(){let e=this,t=(g.language,SiteSettings.url.api+"get_langs");fetch(t).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){e.setState({langs:JSON.parse(t)})}),g.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){g.off("languageChanged",this.onLanguageChanged)}onLanguageChanged(e){this.setState({lang:e})}renderLangList(){const e=this.state.langs;return r.a.createElement("select",{onChange:this.changeLang.bind(this),className:"form-control"},Object.keys(this.state.langs).map(function(t,a){const n=e[t];return r.a.createElement("option",{key:t,value:t},n.name)}))}changeLang(e){console.log(e)}render(){return this.state.lang,r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"max-width"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-12 col-sm-12 col-md-6 left"},r.a.createElement("div",{className:"col-content"},r.a.createElement("div",{className:"site-title"},r.a.createElement(d.a,{to:SiteSettings.path},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("h1",null,"Four Corners"))))),r.a.createElement("div",{className:"col col-12 col-sm-12 col-md-6 right"},r.a.createElement("div",{className:"col-content"},r.a.createElement("nav",{className:"site-nav"},r.a.createElement(d.a,{to:"#"},"About"),r.a.createElement(d.a,{to:SiteSettings.path+"creator"},"Create"),r.a.createElement(d.a,{to:"#"},"How-to"),r.a.createElement(d.a,{to:"#"},"Inquires"),r.a.createElement(d.a,{to:"#"},"Showcase"),r.a.createElement(d.a,{to:"#"},"Contribute")))))))}};var b=a(64),E=a.n(b),y=(a(232),a(60)),C=a.n(y);var k=class extends r.a.Component{constructor(e){super(e),this.state={lang:"en",homeData:{},embeds:{},embedHtmls:{}},this.slugs=["authorship","backstory","context","links"],this.onLanguageChanged=this.onLanguageChanged.bind(this)}componentDidMount(){let e=this,t=(window.location.href.split("/"),g.language),a=SiteSettings.url.api+"page?slug=home&lang="+t;fetch(a).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){t&&(e.setState({homeData:t}),e.initEmbeds())}),g.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){g.off("languageChanged",this.onLanguageChanged)}componentDidUpdate(){}onLanguageChanged(e){this.setState({lang:e})}initEmbeds(){this.slugs.forEach((e,t)=>{if(this.state.homeData&&this.state.homeData.acf){const t=this.state.homeData.acf,a=E()(t[e+"_embed"]);let n=this.state.embedHtmls;n[e]=a,this.setState({embedHtmls:n}),console.log(e),C.a.prototype.init({cutline:!1,active:e})}})}renderRow(e,t){const a="row explainer"+(t%2==0?"":" reverse"),n=this.state.homeData;let s={};return["title","desc","embed"].forEach((t,a)=>{n&&n.acf&&n.acf[e+"_"+t]?s[t]=E()(n.acf[e+"_"+t]):s[t]=""}),r.a.createElement("div",{className:a,key:t},r.a.createElement("div",{className:"col col-5"},r.a.createElement("div",{className:"col-content"},r.a.createElement("h2",null,s.title),s.desc)),r.a.createElement("div",{className:"col col-7"},r.a.createElement("div",{className:"col-content"},this.state.embedHtmls[e])))}render(){this.state.lang;const e=this.state.homeData;let t="";e.post_content&&(t=r.a.createElement("div",{className:"intro-text"},E()(e.post_content)));let a=[];return this.slugs.forEach((e,t)=>{a.push(this.renderRow(e,t))}),r.a.createElement("main",{id:"home"},r.a.createElement("div",{className:"max-width"},a))}},S=a(97),N=a.n(S),x=a(154),w=a.n(x);var L={title:"",type:"object",properties:{photo:{title:"",type:"object",required:[],properties:{file:{type:"string"}}},authorship:{title:"",type:"object",required:[],properties:{credit:{type:"string"},caption:{type:"string"},ethics:{type:"string",enum:[]},copyright:{type:"string"},license:{type:"string"}}},backstory:{title:"",type:"object",required:[],properties:{story:{type:"string"},media:{title:"",type:"array",items:{type:"object",properties:{type:{type:"string",enum:["image","youtube","vimeo","soundcloud"],enumNames:["Image","YouTube","Vimeo","SoundCloud"]},url:{type:"string",format:"uri"},credit:{type:"string"}}}}}},context:{title:"",type:"object",required:[],properties:{story:{type:"string"},media:{title:"",type:"array",items:{type:"object",properties:{type:{type:"string",enum:["image","youtube","vimeo","soundcloud"],enumNames:["Image","YouTube","Vimeo","SoundCloud"]},url:{type:"string",format:"uri"},credit:{type:"string"}}}}}},links:{title:"",type:"object",required:[],properties:{links:{type:"array",minItems:0,items:{type:"object",properties:{title:{type:"string"},url:{type:"string",format:"uri"}}}}}}}};var D={photo:{file:{"ui:widget":"customUploadWidget",noValidate:!1}},authorship:{caption:{"ui:widget":"textarea","ui:options":{rows:5}},copyright:{"ui:widget":"customToggleWidget","ui:placeholder":"Creative Commons"},license:{"ui:widget":"customToggleWidget","ui:placeholder":"name@email.com"},ethics:{"ui:widget":"customSelectWidget"}},backstory:{story:{"ui:widget":"textarea","ui:options":{rows:5,label:!1}},media:{"ui:options":{label:!1}}},context:{custom:{"ui:widget":"myCustomWidget"},story:{"ui:widget":"textarea","ui:options":{rows:5,label:!1}},media:{"ui:options":{label:!1}}}};var j=function(e,t){return t},M=(a(1),a(3));class O extends r.a.Component{constructor(e){super(e),this.state={value:"",isCustom:!1,customText:""};const{schema:t,id:a,options:n,value:r,required:s,disabled:o,readonly:i,autofocus:c,onChange:l,onBlur:d,onFocus:m,onClick:u,placeholder:p}=e}processValue({type:e,items:t},a){const n=new Set(["number","integer"]);if(""!==a&&"empty"!==a)return"array"===e&&t&&n.has(t.type)?a.map(M.asNumber):"boolean"===e?"true"===a:"number"===e?Object(M.asNumber)(a):a}getValue(e,t){return e.target.value}onChange(e){}render(){const{enumOptions:e,enumDisabled:t}=this.props.options,a=this.props.id,n=this.props.schema;return r.a.createElement("div",{className:"select-widget"},r.a.createElement("select",{id:a,name:a,required:this.props.required,value:this.state.value,onChange:e=>{const t=e.currentTarget.value;this.setState({value:t}),this.props.onChange(this.processValue(n,t))}},e.map(({value:e,label:t},a)=>r.a.createElement("option",{key:a,value:e},t+(e&&"empty"!=e?": "+e:"")))),r.a.createElement("div",{"data-id":a,className:"select-widget-dropdown form-control","data-value":"undefined"==typeof value?"":value},e.map(({value:e,label:t},a)=>r.a.createElement("div",{className:this.state.value===e||this.state.value===t?"option selected":"option","data-value":e,key:a,onClick:e=>{const t=e.currentTarget.dataset.value;this.setState({value:t,isCustom:"Write your own"==t}),this.props.onChange(this.processValue(n,t))}},r.a.createElement("div",{className:"option-label"},t),e&&"empty"!=e?r.a.createElement("div",{className:"option-desc"},e):""))),r.a.createElement("textarea",{className:this.state.isCustom?"form-control":"hidden",onChange:e=>{const t=e.target.value;this.setState({customText:t}),this.props.onChange(this.processValue(n,t))}}))}}O.defaultProps={autofocus:!1};var T=O;class F extends r.a.Component{constructor(e){super(e),this.state={value:"",isTrue:!0,customText:""};const{schema:t,id:a,options:n,value:r,required:s,disabled:o,readonly:i,autofocus:c,onChange:l,onBlur:d,onFocus:m,onClick:u,placeholder:p}=e}processValue({type:e,items:t},a){const n=new Set(["number","integer"]);if(""!==a)return"array"===e&&t&&n.has(t.type)?a.map(M.asNumber):"boolean"===e?"true"===a:"number"===e?Object(M.asNumber)(a):a}render(){const e=this.props.schema,t=this.props.id+"Check";return r.a.createElement("div",{className:"toggle-widget"},r.a.createElement("div",{className:"toggle-checkbox"},r.a.createElement("input",{className:"toggle",id:t,name:t,type:"checkbox",noValidate:!0,defaultChecked:!0,onClick:e=>{this.setState({isTrue:e.target.checked})}}),r.a.createElement("label",{className:"control-label checkbox",htmlFor:t})),r.a.createElement("div",{className:"toggle-input"},r.a.createElement("input",{id:this.props.id,name:this.props.id,className:"form-control",disabled:!this.state.isTrue,placeholder:this.props.placeholder,onChange:t=>{const a=t.target.value;this.setState({value:a}),this.props.onChange(this.processValue(e,a))},onFocus:t=>{const a=t.target.value;this.setState({value:a}),this.props.onChange(this.processValue(e,a))}})))}}F.defaultProps={autofocus:!1};var _=F;a(148);const P=SiteSettings.url.theme+"/assets/images/placeholder.svg";class R extends r.a.Component{constructor(e){super(e),this.state={imgSrc:"",srcMode:"urlMode",urlSrc:"",fileSrc:"",properSrc:!1,isLoaded:!1};const{schema:t,id:a,options:n,value:r,required:s,disabled:o,readonly:i,autofocus:c,onChange:l,onBlur:d,onFocus:m,onClick:u,placeholder:p}=e}updateSrcMode(e){const t=e.replace("Mode","Src");if(!t)return;const a=this.state[t];this.setState({srcMode:e,imgSrc:a,properSrc:"urlMode"==e&&a}),this.props.onChange(a)}onChangeSrc(e,t){let a=null;if("urlMode"==t){let n=new Image;a=e,n.onload=(e=>{this.setState({urlSrc:a,imgSrc:a,isLoaded:!0}),this.updateSrcMode(t),this.props.onChange(a)}),n.onerror=(e=>{this.setState({urlSrc:P,imgSrc:P,isLoaded:!1}),this.props.onChange(P)}),n.src=a}else"fileMode"==t&&(a=URL.createObjectURL(e),this.updateSrcMode(t),this.setState({fileSrc:a,imgSrc:a,isLoaded:!0}),this.props.onChange(a))}render(){this.props.schema;const e=this.props.id,t=e+"Url",a=e+"File";return r.a.createElement("div",{className:"upload-widget"},r.a.createElement("input",{className:"",id:e,name:"imgSrc",value:this.state.imgSrc,type:"hidden",onChange:e=>{this.props.onChange()}}),r.a.createElement("label",{className:"control-label",htmlFor:"urlMode"},"From a URL"),r.a.createElement("div",{className:"checkbox-widget form-group"},r.a.createElement("input",{className:"",id:"urlMode",name:"photo",value:"",type:"radio",checked:"urlMode"==this.state.srcMode,onChange:e=>{const t=e.target.id;this.updateSrcMode(t)}}),r.a.createElement("label",{className:"control-label checkbox",htmlFor:"urlMode"}),r.a.createElement("div",{className:"checkbox-content"},r.a.createElement("input",{id:t,name:t,type:"url",className:"form-control",placeholder:"https://sample.org/photo.jpg",onChange:e=>{this.onChangeSrc(e.target.value,"urlMode")}}))),r.a.createElement("label",{className:"control-label",htmlFor:"fileMode"},"From a file (temporary)"),r.a.createElement("div",{className:"checkbox-widget form-group"},r.a.createElement("input",{className:"",id:"fileMode",name:"photo",value:"",type:"radio",checked:"fileMode"==this.state.srcMode,onChange:e=>{this.updateSrcMode("fileMode")}}),r.a.createElement("label",{className:"control-label checkbox",htmlFor:"fileMode"}),r.a.createElement("div",{className:"checkbox-content"},r.a.createElement("label",{className:"control-label btn",htmlFor:a},"Browse file"),r.a.createElement("input",{id:a,name:a,type:"file",className:"form-control",onChange:e=>{e.target.files&&this.onChangeSrc(e.target.files[0],"fileMode")}}))))}}R.defaultProps={autofocus:!1};var U=R;var q=function(e){return r.a.createElement("div",{className:e.className},e.items&&e.items.map(e=>r.a.createElement("div",{className:"card",key:e.index},e.children,e.hasMoveDown&&r.a.createElement("button",{onClick:e.onReorderClick(e.index,e.index+1)},"Down"),e.hasMoveUp&&r.a.createElement("button",{onClick:e.onReorderClick(e.index,e.index-1)},"Up"),r.a.createElement("button",{onClick:e.onDropIndexClick(e.index)},"Delete"))),e.canAdd&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-3 col-xs-offset-9 array-item-add text-right"},r.a.createElement("button",{onClick:e.onAddClick,type:"button"},e.schema.add))))};var H=class extends r.a.Component{constructor(e){super(e),this.state={mediaData:this.props.mediaData,imgSrc:null},this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this)}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(e,t,a){}onFocus(e){const t=e.split("_")[1];this.props.sendActiveCorner(t)}onBlur(e){}getMediaData(e,t,a,n){if(!w()(e))return;const r=encodeURIComponent(e),s=Object.assign({},this.state.mediaData);let o="";switch(t){case"youtube":o="https://noembed.com/embed?url="+r;break;case"vimeo":o="https://vimeo.com/api/oembed.json?url="+r;break;case"soundcloud":o="https://soundcloud.com/oembed?format=json&url="+r;break;default:return!1}const i=new Headers;fetch(o,{method:"GET",headers:i,mode:"cors",cache:"default"}).then(e=>{if(!e.ok)throw Error(e.statusText);return e.json()}).then(e=>{s[a][n]={html:e.html,width:e.width,height:e.height},this.setState({mediaData:s}),this.props.sendMediaData(s)}).catch(function(e){console.log(e)})}onChange(e){const t=e.formData,a=Object.keys(t),n=Object.assign({},this.props.mediaData);for(let e of a)if(t[e]&&t[e].media)for(let a of t[e].media.keys()){const r=t[e].media[a],s=r.url,o=r.type;n[e]||(n[e]=[]),n[e][a]||(n[e][a]="",this.setState({mediaData:n})),s&&o&&this.getMediaData(s,o,e,a)}const r=Object.assign(this.props.formData,t);this.props.sendFormData(r)}onError(e){}translateSchema(e){this.state.lang;const t=Object.assign({},e),a=Object.keys(e.properties),n=this.props.creator.acf;for(let r of a){let a=e.properties[r];const s=[r,"title"].join("_");a.title=n[s];const o=[r,"desc"].join("_");a.description=n[o];const i=a.properties;if(i){const e=Object.keys(i);for(let t of e){const e=[r,t,"label"].join("_");if(n.hasOwnProperty(e)){const r=n[e];a.properties[t].title=r}const s=[r,t,"desc"].join("_");if(n.hasOwnProperty(s)){const e=n[s];a.properties[t].description=e}if(i[t].hasOwnProperty("enum")){const e=n[[r,t,"options"].join("_")];if(a.properties[t].enum=[],a.properties[t].enumNames=[],e)for(let n of e)a.properties[t].enum.push(n.desc?n.desc:n.label),a.properties[t].enumNames.push(n.label);const s=n[[r,t,"custom"].join("_")];a.properties[t].enum.unshift(s),a.properties[t].enumNames.unshift(s);const o=n[[r,t,"empty"].join("_")];a.properties[t].enum.unshift("empty"),a.properties[t].enumNames.unshift(o)}if("array"==i[t].type){const e=n[[r,t,"add"].join("_")];a.properties[t].add=e;const s=i[t].items.properties,o=Object.keys(s);for(let e of o){const s=[r,e,"label"].join("_");if(n.hasOwnProperty(s)){const r=n[s];a.properties[t].items.properties[e].title=r}}}}}t.properties[r]=a}return t}renderForm(){const e={customSelectWidget:T,customToggleWidget:_,customUploadWidget:U};return r.a.createElement("div",{className:"col-inner"},r.a.createElement("div",{id:"forms",className:"col-content"},r.a.createElement(N.a,{formData:this.props.formData,schema:this.translateSchema(L),uiSchema:D,ArrayFieldTemplate:q,widgets:e,validate:j,liveValidate:!0,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,onError:this.onError},r.a.createElement("button",{type:"submit",hidden:!0}))))}render(){return r.a.createElement(r.a.Fragment,null,this.renderForm())}};a(147);var A=class extends r.a.Component{constructor(e){super(e),this.state={embedData:{authorship:{},backstory:{},context:{},links:{}}}}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(e,t,a){}renderMedia(){const e=[],t=this.props.cornerSlug,a=(this.props.fieldSlug,Object.assign({},this.state.embedData[t]),Object.assign({},this.props.mediaData));if(this.props.fieldData)return this.props.fieldData.forEach((t,n)=>{let s="";if("image"==t.type)s=!!t.url&&r.a.createElement("img",{src:t.url,alt:""});else if(a&&a[n]){const e=a[n];s=!!e&&r.a.createElement("div",{className:"fc-media",dangerouslySetInnerHTML:{__html:e.html}})}const o=t.credit?r.a.createElement("div",{className:"fc-sub-credit"},t.credit):"",i=r.a.createElement("div",{className:"fc-sub-row",key:n},s,o);e.push(i)}),r.a.createElement("div",{className:"fc-sub-rows"},e)}renderLinks(){const e=[];return this.props.fieldData.forEach((t,a)=>{if(!t.url)return;const n=r.a.createElement("div",{className:"fc-sub-row",key:a},t.title?r.a.createElement("div",{className:"fc-sub-title"},t.title):"",r.a.createElement("div",{className:"fc-sub-url"},t.url));e.push(n)}),r.a.createElement("div",{className:"fc-sub-rows"},e)}renderLicense(){const e=this.props.fieldData;return r.a.createElement("span",null,"License this photo"," ",r.a.createElement("a",{href:e,target:"_blank"},e))}renderEntry(){switch(this.props.fieldSlug){case"media":return this.renderMedia();case"links":return this.renderLinks();case"license":return this.renderLicense();default:return this.props.fieldData}}render(){this.props.cornerSlug;const e=this.props.fieldSlug;return r.a.createElement("div",{className:"fc-row fc-"+e},this.props.fieldData?this.renderEntry():"")}};var I=class extends r.a.Component{constructor(e){super(e),this.corners=["context","links","authorship","backstory"],this.state={fourCorners:null,formData:{},expandPanel:!1}}componentDidMount(){let e=this;this.props.activeCorner,setTimeout(function(){e.fourCorners=C.a.prototype.init({noPanels:!0})[0]})}componentDidUpdate(e){const t=this.props.activeCorner;e.activeCorner,t&&this.fourCorners.openCorner(t)}onChangeOpts(e){let t={formData:this.props.formData};t[e.target.id]=e.target.checked,this.setState(t)}onFocus(e){e.target.setSelectionRange(0,e.target.value.length)}onBlur(e){}onError(e){console.log("Error",e)}onScroll(e){}toggleExpandPanel(){this.fourCorners.toggleExpandPanel()}renderPanels(){const e={};Object.entries(this.props.formData).map(t=>this.corners.includes(t[0])?e[t[0]]=t[1]:"");const t=[],a=this.props.creator.acf;return Object.entries(e).forEach((e,n)=>{const s=e[0],o=[s,"title"].join("_"),i=a[o],c=e[1],l=[];Object.entries(c).forEach((e,t)=>{const n=e[0],o=e[1];let i="";if(!["media","links"].includes(n)){const e=[s,n,"label"].join("_");i=a[e]}const c=this.props.mediaData[s];o&&l.push(r.a.createElement(A,{cornerSlug:s,fieldLabel:i,fieldSlug:n,fieldData:o,mediaData:c,key:t}))});let d="fc-panel fc-"+s;this.props.activeCorner==s&&(d+=" fc-active"),t.push(r.a.createElement("div",{className:d,"data-slug":s,key:n},r.a.createElement("div",{className:"fc-scroll"},r.a.createElement("div",{className:"fc-inner"},r.a.createElement("div",{className:"fc-panel-title"},r.a.createElement("span",null,i),r.a.createElement("div",{className:"fc-icon fc-expand",onClick:this.toggleExpandPanel.bind(this)}),r.a.createElement("div",{className:"fc-icon fc-close",onClick:this.props.setActiveCorner.bind(this)})),l))))}),t}render(){const e=this.props.formData.photo,t=e?e.file:"";let a="fc-embed";return"true"==this.props.darkMode&&(a+=" fc-dark"),this.state.expandPanel&&(a+=" fc-full"),t&&(a+=" fc-loaded"),r.a.createElement("div",{className:a,"data-active":this.props.activeCorner},t?"":r.a.createElement("div",{className:"no-photo"},r.a.createElement("h2",null,"No photo")),r.a.createElement("div",{className:t?"fc-photo fc-loaded":"fc-photo"},r.a.createElement("img",{src:t,className:"fc-img"})),this.renderPanels())}};var B=class extends r.a.Component{constructor(e){super(e),this.state={includeCss:!1,includeJs:!1,darkMode:!1,stickyStyle:{}},this.imgInputRef=r.a.createRef(),this.outputRef=r.a.createRef(),this.includeJSRef=r.a.createRef(),this.includeCSSRef=r.a.createRef(),this.stickyRef=r.a.createRef()}componentDidMount(){document.body.addEventListener("scroll",this.onScroll.bind(this)),window.addEventListener("resize",this.onScroll.bind(this))}componentWillUnmount(){document.body.removeEventListener("scroll",this.onScroll.bind(this)),window.removeEventListener("resize",this.onScroll.bind(this))}shouldComponentUpdate(e,t){return!0}componentDidUpdate(e){}onChangeOpts(e){let t={formData:this.props.formData};"checkbox"==e.target.type?t[e.target.name]=e.target.checked:"dark"==e.target.name&&(t.darkMode=e.target.value,"true"===e.target.value?t.formData[e.target.name]=e.target.value:delete t.formData[e.target.name]),this.setState(t)}onFocus(e){e.target.setSelectionRange(0,e.target.value.length)}onBlur(e){}onError(e){console.log("Error",e)}onScroll(e){const t=this.stickyRef.current.parentElement.getBoundingClientRect(),a=t.top,n=t.left,r=t.width;window.innerHeight;let s={};a<=0&&(s={width:r+"px",height:"100%",position:"fixed",top:0,left:n+"px",paddingTop:"0px"}),this.setState({stickyStyle:s})}embedCode(e){let t={lang:g.language,img:this.props.imgLoaded?this.props.imgSrc:void 0},a=Object.assign(e,t),n="<div class='fc-embed' data-fc='"+JSON.stringify(a).replace(/'/g,"&apos;")+"'></div>";return n+=this.state.includeJs?'<script src=https://cdn.jsdelivr.net/gh/four-corners/four-corners.js/dist/four-corners.min.js type="text/javascript"><\/script>':"",n+=this.state.includeCss?'<link href="https://cdn.jsdelivr.net/gh/four-corners/four-corners.js/dist/four-corners.min.css" rel="stylesheet" type="text/css">':""}render(){this.props.creator.acf;const e=this.props.imgLoaded?"has-image":"",t="form-group card"+(this.props.imgFocus?" focus":"");return r.a.createElement("div",{className:"col-inner"},r.a.createElement("div",{className:"sticky",style:this.state.stickyStyle,ref:this.stickyRef},r.a.createElement("div",{className:"col-content"},r.a.createElement("legend",null,"Create your own"),r.a.createElement("div",{id:"embedder"},r.a.createElement("fieldset",null,r.a.createElement("div",{className:"form-group field field-object"},r.a.createElement("div",{id:"embed-input",className:e},r.a.createElement("div",{className:t},r.a.createElement(I,{creator:this.props.creator,imgLoaded:this.props.imgLoaded,darkMode:this.state.darkMode,formData:this.props.formData,mediaData:this.props.mediaData,activeCorner:this.props.activeCorner,setActiveCorner:this.props.setActiveCorner}))),r.a.createElement("div",{id:"embed-output"},r.a.createElement("legend",null,this.props.creator.acf.embed_title),r.a.createElement("textarea",{className:"output form-control",id:"json",readOnly:!0,ref:this.outputRef,rows:3,value:this.embedCode(this.props.formData),onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this)}),r.a.createElement("form",{className:"form-cols",name:"embed-opts",onChange:this.onChangeOpts.bind(this)},r.a.createElement("div",{className:"form-group form-col"},r.a.createElement("label",{className:"control-label"},"Color Options"),r.a.createElement("div",{className:"embed-opts checkboxes"},r.a.createElement("div",{className:"checkbox-widget form-group"},r.a.createElement("input",{className:"embed-opt",id:"lightMode",name:"dark",value:!1,type:"radio",defaultChecked:!0}),r.a.createElement("label",{className:"control-label checkbox",htmlFor:"lightMode"},r.a.createElement("div",{className:"label-inner"},r.a.createElement("span",null,"Light mode")))),r.a.createElement("div",{className:"checkbox-widget form-group"},r.a.createElement("input",{className:"embed-opt",id:"darkMode",name:"dark",value:!0,type:"radio",defaultChecked:!1}),r.a.createElement("label",{className:"control-label checkbox",htmlFor:"darkMode"},r.a.createElement("div",{className:"label-inner"},r.a.createElement("span",null,"Dark mode")))))),r.a.createElement("div",{className:"form-group form-col"},r.a.createElement("label",{className:"control-label"},"Embed Options"),r.a.createElement("div",{className:"embed-opts checkboxes"},r.a.createElement("div",{className:"checkbox-widget form-group"},r.a.createElement("input",{className:"embed-opt",id:"includeJs",name:"includeJs",type:"checkbox",defaultChecked:this.state.includeJs}),r.a.createElement("label",{className:"control-label checkbox",htmlFor:"includeJs"},r.a.createElement("div",{className:"label-inner"},r.a.createElement("span",null,"Include JavaScript file")))),r.a.createElement("div",{className:"checkbox-widget form-group"},r.a.createElement("input",{className:"embed-opt",id:"includeCss",name:"includeCss",type:"checkbox",defaultChecked:this.state.includeJs}),r.a.createElement("label",{className:"control-label checkbox",htmlFor:"includeCss"},r.a.createElement("div",{className:"label-inner"},r.a.createElement("span",null,"Include CSS file"))))))))))))))}};var W=class extends r.a.Component{constructor(e){super(e),this.state={creator:{},lang:"en",formData:{},mediaData:{context:[],backstory:[]},activeCorner:null},this.onLanguageChanged=this.onLanguageChanged.bind(this),this.outputRef=r.a.createRef()}componentDidMount(){let e=this,t=(window.location.href.split("/"),g.language),a=SiteSettings.url.api+"creators?lang="+t;fetch(a).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){e.setState({creator:t[0]})}),g.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){g.off("languageChanged",this.onLanguageChanged)}componentDidUpdate(){}onLanguageChanged(e){this.setState({lang:e})}getEmbedId(e,t){e&&isUrl(e)}setFormData(e){this.setState({formData:e})}setMediaData(e){this.setState({mediaData:e})}setActiveCorner(e){console.log(e),this.setState({activeCorner:e})}renderFormCol(){return r.a.createElement(H,{lang:this.state.lang,creator:this.state.creator,formData:this.state.formData,sendActiveCorner:this.setActiveCorner.bind(this),sendFormData:this.setFormData.bind(this),sendMediaData:this.setMediaData.bind(this)})}renderEmbedCol(){return r.a.createElement(B,{lang:this.state.lang,creator:this.state.creator,formData:this.state.formData,mediaData:this.state.mediaData,setActiveCorner:this.setActiveCorner.bind(this),activeCorner:this.state.activeCorner})}render(){return this.state.lang,this.state.creator&&this.state.creator.ID?r.a.createElement("main",{id:"creator"},r.a.createElement("div",{className:"max-width"},r.a.createElement("div",{className:"row","data-sticky-container":!0},r.a.createElement("div",{className:"col col-12 col-sm-6 left"},this.renderEmbedCol()),r.a.createElement("div",{className:"col col-12 col-sm-6 right"},this.renderFormCol())))):null}};var J=()=>React.createElement("div",null,React.createElement("div",{className:"container"},React.createElement("h1",null,"Not Found")));a(373),a(374);const V=r.a.createElement(o.a,null,(console.log(SiteSettings.path+"creator"),e=>r.a.createElement(i.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(v,null),r.a.createElement(c.a,null,r.a.createElement(l.a,{exact:!0,path:SiteSettings.path,component:k}),r.a.createElement(l.a,{path:SiteSettings.path+"creator",component:W}),r.a.createElement(l.a,{path:"*",component:J}))))));Object(s.render)(V,document.getElementById("page"))},60:function(e,t,a){window,e.exports=function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){e.exports=a(2)},function(e,t,a){},function(e,t,a){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}a.r(t),a(1);var s=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elems={},this.opts=a,this.corners=["context","links","authorship","backstory"],this.elems.embed=t,this.data=E(this),this.elems.photo=l(this),this.elems.panels=d(this),this.elems.corners=v(this),this.elems.caption=b(this),o(this)}var t,a;return t=e,(a=[{key:"init",value:function(t){var a=this,n=(a.embeds=[],Object.assign({selector:".fc-embed:not(.fc-init)",interactive:!0,active:null,cutline:!0,noPanels:!1,noCorners:!1,posDur:.2,transDur:.1},t));return Array.from(document.querySelectorAll(n.selector)).forEach(function(t,r){var s=new e(t,n);a.embeds.push(s)}),a.embeds}},{key:"openCorner",value:function(e){var t=this,a=this.corners,n=this.elems.embed,r=this.elems.corners[e],s=this.elems.panels[e];n.classList.remove("fc-full"),r&&s&&(n.dataset.active=e,n.classList.add("fc-active"),r.classList.add("fc-active"),s.classList.add("fc-active")),a.forEach(function(a,n){a!=e&&t.closeCorner(a)})}},{key:"closeCorner",value:function(e){var t=this.elems.embed;e||(e=t.dataset.active);var a=this.elems.corners[e],n=this.elems.panels[e];e==t.dataset.active&&(t.dataset.active="",t.classList.remove("fc-active")),a&&a.classList.remove("fc-active"),n&&n.classList.remove("fc-active")}},{key:"toggleExpandPanel",value:function(){this.elems.embed.classList.toggle("fc-full")}}])&&r(t.prototype,a),e}(),o=function(e){var t=e.elems.embed;t.classList.add("fc-init"),e.data&&e.data.dark&&t.classList.add("fc-dark"),e.opts.interactive&&(t.addEventListener("mouseenter",function(t){y(t,e)}),t.addEventListener("mouseleave",function(t){C(t,e)}),window.addEventListener("resize",function(t){i(t,e)}),window.addEventListener("click",function(t){var a=w(t.target,e.elems.panels),n=w(t.target,e.elems.corners),r=w(t.target,Array.from(document.querySelectorAll("#creator")));a||n||r||e.closeCorner()})),i(null,e)},i=function(e,t){var a=t.elems.panels;a&&Object.keys(a).forEach(function(e,t){c(a[e])})},c=function(e){var t=e.querySelector(".fc-scroll");t&&(t.scrollHeight>t.clientHeight?e.classList.add("fc-overflow"):e.classList.remove("fc-overflow"))},l=function(e){var t=e.elems.embed,a=e.data;if(a){var n=document.createElement("img");n.classList.add("fc-img");var r="",s=".fc-photo";if(t.querySelector(s))r=t.querySelector(s);else{(r=document.createElement("div")).classList.add("fc-photo");var o=new Image,i=a.photo;if(!i)return;var c=i.file;o.onload=function(e){n.src=c,r.classList.add("fc-loaded")},o.onerror=function(e){console.log(e)},o.src=c,r.appendChild(n)}return t.appendChild(r),r}},d=function(e){var t={},a=e.elems.embed;return e.corners.forEach(function(r,s){var o=null;if(e.data){o=e.data[r];var i=Object.keys(o);if(!o||!i.length)return}var c,l=e.opts.active,d='.fc-panel[data-slug="'+r+'"]';if(a.querySelector(d))c=a.querySelector(d);else{(c=document.createElement("div")).classList.add("fc-panel"),c.classList.add("fc-"+r),r==l&&c.classList.add("fc-active"),c.dataset.fcSlug=r;var h=document.createElement("div");h.classList.add("fc-scroll");var f=document.createElement("div");f.classList.add("fc-inner");var g=document.createElement("div");g.classList.add("fc-panel-title");var v=document.createElement("span");v.innerHTML=r,g.appendChild(v);var b=document.createElement("div");b.className="fc-icon fc-expand",b.addEventListener("click",function(t){e.toggleExpandPanel(t,e)}),g.appendChild(b);var E=document.createElement("div");E.className="fc-icon fc-close",E.addEventListener("click",function(t){x(t,e)}),g.appendChild(E),f.appendChild(g),o&&Object.entries(o).forEach(function(e){var t=n(e,2),a=t[0],r=t[1];if(r){var s=document.createElement("div");s.classList.add("fc-row","fc-"+a),"media"==a?s.append(m(r)):"links"==a?s.append(u(r)):"license"==a?s.append(p(r)):"ethics"==a?s.innerHTML="<strong>Code of ethics</strong>: "+r:"copyright"==a?s.innerHTML="&copy; "+r:(r=L(r),s.innerHTML+=r),f.appendChild(s)}}),h.appendChild(f),c.appendChild(h),a.appendChild(c)}t[r]=c}),t},m=function(e){var t=document.createElement("div");return t.className="fc-sub-rows",e.forEach(function(e,a){var n=document.createElement("div");if(n.className="fc-sub-row","image"==e.type?h(e,n):f(e,n),e.credit){var r=document.createElement("div");r.className="fc-sub-credit",r.innerHTML=e.credit,n.appendChild(r)}t.appendChild(n)}),t},u=function(e){var t=document.createElement("div");return t.className="fc-sub-rows",e.forEach(function(e,a){var n=document.createElement("div");n.className="fc-sub-row";var r=document.createElement("a");r.href=e.url,r.target="_blank",e.title&&(r.innerHTML=e.title),n.appendChild(r);var s=g(e.url);if(s){var o=document.createElement("div");o.className="fc-sub-url",o.innerHTML=s,n.appendChild(o)}t.appendChild(n)}),t},p=function(e){var t=document.createElement("a");t.href=e,t.target="_blank",t.innerHTML=e;var a=document.createTextNode("License this photo: "),n=document.createElement("span");return n.append(a),n.append(t),n},h=function(e,t){var a=document.createElement("div");a.className="fc-media";var n=document.createElement("img");n.src=e.url,a.appendChild(n),t.prepend(a)},f=function(e,t){var a="";switch(e.type){case"youtube":a="https://noembed.com/embed?url="+e.url;break;case"vimeo":a="https://vimeo.com/api/oembed.json?url="+e.url;break;case"soundcloud":a="https://soundcloud.com/oembed?format=json&url="+e.url;break;default:return!1}console.log(a),fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){console.log(e);var a=document.createElement("div");if(a.className="fc-media",a.innerHTML=e.html,Number.isInteger(e.width,e.height)){var n=e.height/e.width;a.classList.add("fc-responsive"),a.style.paddingBottom=100*n+"%"}t.prepend(a)}).catch(function(e){t.remove(),console.log(e)})},g=function(e){if(!e)return!1;var t,a=!!(t=e)&&(-1<t.indexOf("//")?t.split("/")[2]:t.split("/")[0]).split(":")[0].split("?")[0],n=a.split("."),r=n.length;return 2<r&&(a=n[r-2]+"."+n[r-1],2==n[r-2].length&&2==n[r-1].length&&(a=n[r-3]+"."+a)),a},v=function(e){var t,a={},n=e.elems.embed,r=(e.elems.photo,e.opts.active);return e.corners.forEach(function(s,o){var i='.fc-corner[data-fc-slug="'+s+'"]';if(!n.querySelector(i)){var c=document.createElement("div");c.dataset.fcSlug=s,c.classList.add("fc-corner"),c.classList.add("fc-"+s),s==r&&c.classList.add("fc-active"),e.data&&((t=e.data[s])&&Object.keys(t).length||c.classList.add("fc-inactive")),e.opts.interactive&&(c.addEventListener("mouseenter",function(t){k(t,e)}),c.addEventListener("mouseleave",function(t){S(t,e)}),c.addEventListener("click",function(t){N(t,e)})),a[s]=c,n.appendChild(c)}}),a},b=function(e){if(e.data&&e.opts.cutline){var t=e.data.authorship;if(t&&Object.keys(t).length){var a=e.elems.embed,n=document.createElement("div");n.classList.add("fc-cutline");var r=[];t.credit&&r.push(t.credit),r.push('<a href="#" class="fc">Four Corners</a>');var s=r.join(" ");n.innerHTML=s,a.parentNode.insertBefore(n,a.nextSibling)}}},E=function(e){var t=e.elems.embed.dataset.fc;if(t)return t=t,delete e.elems.embed.dataset.fc,JSON.parse(t)},y=function(e,t){t.elems.embed,t.elems.corners,t.css,t.opts.posDur},C=function(e,t){t.elems.embed,t.elems.corners,t.css,t.opts.posDur},k=function(e,t){e.target.classList.add("fc-hover")},S=function(e,t){e.target.classList.remove("fc-hover")},N=function(e,t){var a=e.target.dataset.fcSlug,n=t.elems.embed.dataset.active;a&&(a==n?t.closeCorner(a):t.openCorner(a))},x=function(e,t){t.closeCorner()},w=function(e,t){var a=!1;return Object.entries(t).forEach(function(t){var r=n(t,2);r[0],r[1].contains(e)&&(a=!0)}),a},L=function(e){return e.replace(/(?:(?:https?|ftp):\/\/)?(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\x{00a1}\-\x{ffff}0-9]+-?)*[a-z\x{00a1}\-\x{ffff}0-9]+)(?:\.(?:[a-z\x{00a1}\-\x{ffff}0-9]+-?)*[a-z\x{00a1}\-\x{ffff}0-9]+)*(?:\.(?:[a-z\x{00a1}\-\x{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?/gi,function(e){return'<a href="'+(/^(?:(?:https?|ftp):\/\/)/i.test(e)?e:"http://"+e)+'" target="_blank">'+e+"</a>"})},D=s;t.default=D}])}});
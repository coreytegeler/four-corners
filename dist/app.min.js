!function(e){function t(t){for(var r,o,i=t[0],c=t[1],l=t[2],m=0,u=[];m<i.length;m++)o=i[m],n[o]&&u.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(d&&d(t);u.length;)u.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={0:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=c;s.push([319,1]),a()}({138:function(e,t,a){window,e.exports=function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){e.exports=a(2)},function(e,t,a){},function(e,t,a){"use strict";function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a.r(t),a(1);var n=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elems={},this.opts=a,this.corners=["context","links","authorship","backstory"],this.elems.embed=t,this.data=u(this),this.elems.photo=c(this),this.elems.panels=l(this),this.elems.corners=d(this),this.elems.caption=m(this),s(this)}var t,a;return t=e,(a=[{key:"init",value:function(t){var a=this,r=(a.embeds=[],Object.assign({selector:".fc-embed:not(.fc-init)",noPanels:!1,noCorners:!1,cornerStroke:"6px",cornerSize:"25px",cornerColor:"white",cornerActiveColor:"blue",cornerHoverColor:"red",posDur:.2,transDur:.1},t));return Array.from(document.querySelectorAll(r.selector)).forEach(function(t,n){var s=new e(t,r);a.embeds.push(s)}),a.embeds}},{key:"openCorner",value:function(e){var t=this,a=this.corners,r=this.elems.embed,n=this.elems.corners[e],s=this.elems.panels[e];n&&s&&(r.dataset.active=e,r.classList.add("fc-active"),n.classList.add("fc-active"),s.classList.add("fc-active")),a.forEach(function(a,r){a!=e&&t.closeCorner(a)})}},{key:"closeCorner",value:function(e){var t=this.elems.embed;e||(e=t.dataset.active);var a=this.elems.corners[e],r=this.elems.panels[e];e==t.dataset.active&&(t.dataset.active="",t.classList.remove("fc-active")),a&&a.classList.remove("fc-active"),r&&r.classList.remove("fc-active")}}])&&r(t.prototype,a),e}(),s=function(e){var t=e.elems.embed;t.classList.add("fc-init"),e.data&&e.data.dark&&t.classList.add("fc-dark"),t.addEventListener("mouseenter",function(t){p(t,e)}),t.addEventListener("mouseleave",function(t){h(t,e)}),window.addEventListener("resize",function(t){o(t,e)}),window.addEventListener("click",function(t){var a=b(t.target,e.elems.panels),r=b(t.target,e.elems.corners),n=b(t.target,Array.from(document.querySelectorAll("#creator")));a||r||n||e.closeCorner()}),o(null,e)},o=function(e,t){var a=t.elems.panels;a&&Object.keys(a).forEach(function(e,t){i(a[e])})},i=function(e){var t=e.querySelector(".fc-scroll");t&&(t.scrollHeight>t.clientHeight?e.classList.add("fc-overflow"):e.classList.remove("fc-overflow"))},c=function(e){var t=e.elems.embed,a=document.createElement("img");a.classList.add("fc-img");var r="",n=".fc-photo";if(t.querySelector(n))r=t.querySelector(n);else{(r=document.createElement("div")).classList.add("fc-photo");var s=new Image,o=e.data.img;s.onload=function(e){a.src=o,r.classList.add("fc-loaded")},s.onerror=function(e){console.log(e)},s.src=o,r.appendChild(a)}return t.appendChild(r),r},l=function(e){var t={},a=e.elems.embed;return e.corners.forEach(function(r,n){if(e.data){var s=e.data[r];if(!s||!Object.keys(s).length)return}var o,i='.fc-panel[data-slug="'+r+'"]';if(a.querySelector(i))o=a.querySelector(i);else{(o=document.createElement("div")).classList.add("fc-panel"),o.dataset.slug=r;var c=document.createElement("div");c.classList.add("fc-scroll");var l=document.createElement("div");l.classList.add("fc-inner");var d=document.createElement("div");d.classList.add("fc-panel-title"),l.appendChild(d),d.innerHTML=r,c.appendChild(l),o.appendChild(c),a.appendChild(o)}t[r]=o}),t},d=function(e){var t,a={},r=e.elems.embed;return e.elems.photo,e.corners.forEach(function(n,s){var o='.fc-corner[data-slug="'+n+'"]';if(!r.querySelector(o)){var i=document.createElement("div");i.dataset.slug=n,i.classList.add("fc-corner"),e.data&&((t=e.data[n])&&Object.keys(t).length||i.classList.add("fc-inactive")),i.addEventListener("mouseenter",function(t){f(t,e)}),i.addEventListener("mouseleave",function(t){g(t,e)}),i.addEventListener("click",function(t){v(t,e)}),a[n]=i,r.appendChild(i)}}),a},m=function(e){if(e.data){var t=e.data.authorship;if(t&&Object.keys(t).length){var a=e.elems.embed,r=document.createElement("div");r.classList.add("fc-caption");var n=[];t.credit&&n.push(t.credit),t.copyright&&n.push("&copy;"),n.push('<a href="#">Four Corners</a>');var s=n.join(" ");r.innerHTML=s,a.parentNode.insertBefore(r,a.nextSibling)}}},u=function(e){var t=e.elems.embed.dataset.fc;if(t)return t=t,delete e.elems.embed.dataset.fc,JSON.parse(t)},p=function(e,t){t.elems.embed,t.elems.corners,t.css,t.opts.posDur},h=function(e,t){t.elems.embed,t.elems.corners,t.css,t.opts.posDur},f=function(e,t){e.target.classList.add("fc-hover")},g=function(e,t){e.target.classList.remove("fc-hover")},v=function(e,t){var a=e.target.dataset.slug,r=t.elems.embed.dataset.active;a&&(a==r?t.closeCorner(a):t.openCorner(a))},b=function(e,t){var a=!1;return Object.entries(t).forEach(function(t){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,s=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw s}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(t,2);r[0],r[1].contains(e)&&(a=!0)}),a},E=n;t.default=E}])},316:function(e,t){},317:function(e,t,a){},319:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(54),o=a(58),i=a(321),c=a(323),l=a(322),d=a(320),m=a(90),u=a(134),p=a.n(u),h=a(135),f=a.n(h);m.a.use(p.a).use(f.a).use(o.b).init({fallbackLng:"en",debug:!0,react:{wait:!0,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"},detection:{order:["path","querystring","cookie","localStorage","navigator","htmlTag","subdomain"],lookupQuerystring:"lang",lookupCookie:"i18n",lookupLocalStorage:"i18nextLng"},backend:{loadPath:SiteSettings.url.api+"{{ns}}/{{lng}}"}});var g=m.a;var v=class extends n.a.Component{constructor(e){super(e),this.state={lang:"en",langs:{}},this.onLanguageChanged=this.onLanguageChanged.bind(this)}componentDidMount(){let e=this,t=(g.language,SiteSettings.url.api+"get_langs");fetch(t).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){e.setState({langs:JSON.parse(t)})}),g.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){g.off("languageChanged",this.onLanguageChanged)}onLanguageChanged(e){this.setState({lang:e})}renderLangList(){const e=this.state.langs;return n.a.createElement("select",{onChange:this.changeLang.bind(this),className:"form-control"},Object.keys(this.state.langs).map(function(t,a){const r=e[t];return n.a.createElement("option",{key:t,value:t},r.name)}))}changeLang(e){console.log(e)}render(){return this.state.lang,n.a.createElement("header",{className:"header"},n.a.createElement("div",{className:"max-width"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col col-12 col-sm-12 col-md-6 left"},n.a.createElement("div",{className:"col-content"},n.a.createElement("h1",{className:"site-title"},n.a.createElement(d.a,{to:SiteSettings.path},"Four Corners")))),n.a.createElement("div",{className:"col col-12 col-sm-12 col-md-6 right"},n.a.createElement("div",{className:"col-content"},n.a.createElement("nav",{className:"site-nav"},n.a.createElement(d.a,{to:"#"},"About"),n.a.createElement(d.a,{to:"#"},"Create"),n.a.createElement(d.a,{to:"#"},"How-to"),n.a.createElement(d.a,{to:"#"},"Inquires"),n.a.createElement(d.a,{to:"#"},"Showcase"),n.a.createElement(d.a,{to:"#"},"Contribute")))))))}};var b=a(89),E=a.n(b),y=a(136),C=a.n(y);var S={title:"",type:"object",properties:{photo:{title:"",type:"object",required:[],properties:{file:{type:"string"}}},authorship:{title:"",type:"object",required:[],properties:{credit:{type:"string"},caption:{type:"string"},copyright:{type:"string"},ethics:{type:"string",enum:[]}}},backstory:{title:"",type:"object",required:[],properties:{story:{type:"string"},media:{title:"",type:"array",items:{type:"object",properties:{type:{type:"string",enum:["image","youtube","vimeo","soundcloud"],enumNames:["Image","YouTube","Vimeo","SoundCloud"]},url:{type:"string",format:"uri"},credit:{type:"string"}}}}}},context:{title:"",type:"object",required:[],properties:{story:{type:"string"},media:{title:"",type:"array",items:{type:"object",properties:{type:{type:"string",enum:["image","youtube","vimeo","soundcloud"],enumNames:["Image","YouTube","Vimeo","SoundCloud"]},url:{type:"string",format:"uri"},credit:{type:"string"}}}}}},links:{title:"",type:"object",required:[],properties:{links:{type:"array",minItems:0,items:{type:"object",properties:{title:{type:"string"},url:{type:"string",format:"uri"}}}}}}}};var k={photo:{file:{"ui:widget":"customUploadWidget",noValidate:!1}},authorship:{caption:{"ui:widget":"textarea","ui:options":{rows:5}},copyright:{"ui:widget":"customToggleWidget"},ethics:{"ui:widget":"customSelectWidget"}},backstory:{story:{"ui:widget":"textarea","ui:options":{rows:5,label:!1}},media:{"ui:options":{label:!1}}},context:{custom:{"ui:widget":"myCustomWidget"},story:{"ui:widget":"textarea","ui:options":{rows:5,label:!1}},media:{"ui:options":{label:!1}}}};var N=function(e,t){return t},w=(a(1),a(3));class x extends n.a.Component{constructor(e){super(e),this.state={value:"",isCustom:!1,customText:""};const{schema:t,id:a,options:r,value:n,required:s,disabled:o,readonly:i,autofocus:c,onChange:l,onBlur:d,onFocus:m,onClick:u,placeholder:p}=e}processValue({type:e,items:t},a){const r=new Set(["number","integer"]);if(""!==a&&"empty"!==a)return"array"===e&&t&&r.has(t.type)?a.map(w.asNumber):"boolean"===e?"true"===a:"number"===e?Object(w.asNumber)(a):a}getValue(e,t){return e.target.value}onChange(e){}render(){const{enumOptions:e,enumDisabled:t}=this.props.options,a=this.props.id,r=this.props.schema;return n.a.createElement("div",{className:"select-widget"},n.a.createElement("select",{id:a,name:a,required:this.props.required,value:this.state.value,onChange:e=>{const t=e.currentTarget.value;this.setState({value:t}),this.props.onChange(this.processValue(r,t))}},e.map(({value:e,label:t},a)=>n.a.createElement("option",{key:a,value:e},t+(e&&"empty"!=e?": "+e:"")))),n.a.createElement("div",{"data-id":a,className:"select-widget-dropdown form-control","data-value":"undefined"==typeof value?"":value},e.map(({value:e,label:t},a)=>n.a.createElement("div",{className:this.state.value===e||this.state.value===t?"option selected":"option","data-value":e,key:a,onClick:e=>{const t=e.currentTarget.dataset.value;this.setState({value:t,isCustom:"Write your own"==t}),this.props.onChange(this.processValue(r,t))}},n.a.createElement("div",{className:"option-label"},t),e&&"empty"!=e?n.a.createElement("div",{className:"option-desc"},e):""))),n.a.createElement("textarea",{className:this.state.isCustom?"form-control":"hidden",onChange:e=>{const t=e.target.value;this.setState({customText:t}),this.props.onChange(this.processValue(r,t))}}))}}x.defaultProps={autofocus:!1};var D=x;class j extends n.a.Component{constructor(e){super(e),this.state={value:"",isTrue:!0,customText:""};const{schema:t,id:a,options:r,value:n,required:s,disabled:o,readonly:i,autofocus:c,onChange:l,onBlur:d,onFocus:m,onClick:u,placeholder:p}=e}processValue({type:e,items:t},a){const r=new Set(["number","integer"]);if(""!==a)return"array"===e&&t&&r.has(t.type)?a.map(w.asNumber):"boolean"===e?"true"===a:"number"===e?Object(w.asNumber)(a):a}render(){const e=this.props.schema,t=this.props.id+"Check";return n.a.createElement("div",{className:"toggle-widget"},n.a.createElement("div",{className:"toggle-checkbox"},n.a.createElement("input",{className:"toggle",id:t,name:t,type:"checkbox",noValidate:!0,defaultChecked:!0,onClick:e=>{this.setState({isTrue:e.target.checked})}}),n.a.createElement("label",{className:"control-label checkbox",htmlFor:t})),n.a.createElement("div",{className:"toggle-input"},n.a.createElement("input",{id:this.props.id,name:this.props.id,className:"form-control",disabled:!this.state.isTrue,onChange:t=>{const a=t.target.value;this.setState({value:a}),this.props.onChange(this.processValue(e,a))},onFocus:t=>{const a=t.target.value;this.setState({value:a}),this.props.onChange(this.processValue(e,a))}})))}}j.defaultProps={autofocus:!1};var L=j;a(130);const M=SiteSettings.url.theme+"/assets/images/placeholder.svg";class O extends n.a.Component{constructor(e){super(e),this.state={imgSrc:"",srcMode:"urlMode",urlSrc:"",fileSrc:"",properSrc:!1,isLoaded:!1};const{schema:t,id:a,options:r,value:n,required:s,disabled:o,readonly:i,autofocus:c,onChange:l,onBlur:d,onFocus:m,onClick:u,placeholder:p}=e}changeSrcMode(e){const t=e.replace("Mode","Src");if(!t)return;const a=this.state[t];this.setState({srcMode:e,imgSrc:a,properSrc:"urlMode"==e&&a}),this.props.onChange(a)}onChangeSrc(e,t){let a=null;if("urlMode"==t){let t=new Image;a=e,t.onload=(e=>{this.setState({urlSrc:a,imgSrc:a,isLoaded:!0}),this.props.onChange(a)}),t.onerror=(e=>{this.setState({urlSrc:M,imgSrc:M,isLoaded:!1}),this.props.onChange(M)}),t.src=a}else"fileMode"==t&&(a=URL.createObjectURL(e),this.setState({fileSrc:a,imgSrc:a,isLoaded:!0}),this.props.onChange(a));this.changeSrcMode(t)}render(){this.props.schema;const e=this.props.id,t=e+"Url",a=e+"File";return n.a.createElement("div",{className:"upload-widget"},n.a.createElement("input",{className:"",id:e,name:"imgSrc",value:this.state.imgSrc,type:"hidden",onChange:e=>{this.props.onChange()}}),n.a.createElement("label",{className:"control-label",htmlFor:"urlMode"},"From a URL"),n.a.createElement("div",{className:"checkbox-widget form-group"},n.a.createElement("input",{className:"",id:"urlMode",name:"photo",value:"",type:"radio",checked:"urlMode"==this.state.srcMode,onChange:e=>{const t=e.target.id;this.changeSrcMode(t)}}),n.a.createElement("label",{className:"control-label checkbox",htmlFor:"urlMode"}),n.a.createElement("div",{className:"checkbox-content"},n.a.createElement("input",{id:t,name:t,type:"url",className:"form-control",placeholder:"https://sample.org/photo.jpg",onChange:e=>{this.onChangeSrc(e.target.value,"urlMode")}}))),n.a.createElement("label",{className:"control-label",htmlFor:"fileMode"},"From a file (temporary)"),n.a.createElement("div",{className:"checkbox-widget form-group"},n.a.createElement("input",{className:"",id:"fileMode",name:"photo",value:"",type:"radio",checked:"fileMode"==this.state.srcMode,onChange:e=>{this.changeSrcMode("fileMode")}}),n.a.createElement("label",{className:"control-label checkbox",htmlFor:"fileMode"}),n.a.createElement("div",{className:"checkbox-content"},n.a.createElement("label",{className:"control-label btn",htmlFor:a},"Browse file"),n.a.createElement("input",{id:a,name:a,type:"file",className:"form-control",onChange:e=>{e.target.files&&this.onChangeSrc(e.target.files[0],"fileMode")}}),n.a.createElement("p",{className:"field-description"},"Four Corners does not host files, this upload is just for preview. Before embedding on your site, please paste a URL to your image."))))}}O.defaultProps={autofocus:!1};var F=O;var _=function(e){return n.a.createElement("div",{className:e.className},e.items&&e.items.map(e=>n.a.createElement("div",{className:"card",key:e.index},e.children,e.hasMoveDown&&n.a.createElement("button",{onClick:e.onReorderClick(e.index,e.index+1)},"Down"),e.hasMoveUp&&n.a.createElement("button",{onClick:e.onReorderClick(e.index,e.index-1)},"Up"),n.a.createElement("button",{onClick:e.onDropIndexClick(e.index)},"Delete"))),e.canAdd&&n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-3 col-xs-offset-9 array-item-add text-right"},n.a.createElement("button",{onClick:e.onAddClick,type:"button"},e.schema.add))))};var T=class extends n.a.Component{constructor(e){super(e),this.state={mediaData:this.props.mediaData,imgSrc:null},this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this)}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(e,t,a){}onFocus(e){const t=e.split("_")[1];this.props.sendActiveCorner(t)}onBlur(e){}getMediaData(e,t,a,r){if(!C()(e))return;const n=encodeURIComponent(e),s=Object.assign({},this.state.mediaData);let o="";switch(t){case"youtube":o="https://www.youtube.com/oembed?url="+n;break;case"vimeo":o="https://vimeo.com/api/oembed.json?url="+n;break;case"soundcloud":o="https://soundcloud.com/oembed?format=json&url="+n;break;default:return!1}const i=new Headers;fetch(o,{method:"GET",headers:i,mode:"cors",cache:"default"}).then(e=>{if(!e.ok)throw Error(e.statusText);return e.json()}).then(e=>{s[a][r]={html:e.html,width:e.width,height:e.height},this.setState({mediaData:s}),this.props.sendMediaData(s)}).catch(function(e){console.log(e)})}onChange(e){const t=e.formData,a=Object.keys(t),r=Object.assign({},this.props.mediaData);for(let e of a)if(t[e]&&t[e].media)for(let a of t[e].media.keys()){const n=t[e].media[a],s=n.url,o=n.type;r[e]||(r[e]=[]),r[e][a]||(r[e][a]="",this.setState({mediaData:r})),s&&o&&this.getMediaData(s,o,e,a)}const n=Object.assign(this.props.formData,t);this.props.sendFormData(n)}onError(e){}translateSchema(e){this.state.lang;const t=Object.assign({},e),a=Object.keys(e.properties),r=this.props.creator.acf;for(let n of a){let a=e.properties[n];const s=[n,"title"].join("_");a.title=r[s];const o=[n,"desc"].join("_");a.description=r[o];const i=a.properties;if(i){const e=Object.keys(i);for(let t of e){const e=[n,t,"label"].join("_");if(r.hasOwnProperty(e)){const n=r[e];a.properties[t].title=n}const s=[n,t,"desc"].join("_");if(r.hasOwnProperty(s)){const e=r[s];a.properties[t].description=e}if(i[t].hasOwnProperty("enum")){const e=r[[n,t,"options"].join("_")];if(a.properties[t].enum=[],a.properties[t].enumNames=[],e)for(let r of e)a.properties[t].enum.push(r.desc?r.desc:r.label),a.properties[t].enumNames.push(r.label);const s=r[[n,t,"custom"].join("_")];a.properties[t].enum.unshift(s),a.properties[t].enumNames.unshift(s);const o=r[[n,t,"empty"].join("_")];a.properties[t].enum.unshift("empty"),a.properties[t].enumNames.unshift(o)}if("array"==i[t].type){const e=r[[n,t,"add"].join("_")];a.properties[t].add=e;const s=i[t].items.properties,o=Object.keys(s);for(let e of o){const s=[n,e,"label"].join("_");if(r.hasOwnProperty(s)){const n=r[s];a.properties[t].items.properties[e].title=n}}}}}t.properties[n]=a}return t}renderForm(){const e={customSelectWidget:D,customToggleWidget:L,customUploadWidget:F};return n.a.createElement("div",{className:"col-inner"},n.a.createElement("div",{id:"forms",className:"col-content"},n.a.createElement(E.a,{schema:this.translateSchema(S),uiSchema:k,widgets:e,ArrayFieldTemplate:_,formData:this.props.formData,validate:N,liveValidate:!0,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,onError:this.onError},n.a.createElement("button",{type:"submit",hidden:!0}))))}render(){return n.a.createElement(n.a.Fragment,null,this.renderForm())}};a(129);var R=class extends n.a.Component{constructor(e){super(e),this.state={embedData:{authorship:{},backstory:{},context:{},links:{}}}}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(e,t,a){}renderMedia(){const e=[],t=this.props.cornerSlug,a=(this.props.fieldSlug,Object.assign({},this.state.embedData[t]),Object.assign({},this.props.mediaData));if(this.props.fieldData)return this.props.fieldData.forEach((t,r)=>{let s="";if("image"==t.type)s=!!t.url&&n.a.createElement("img",{src:t.url,alt:""});else if(a&&a[r]){const e=a[r];s=!!e&&n.a.createElement("div",{className:"fc-media",dangerouslySetInnerHTML:{__html:e.html}})}const o=t.credit?n.a.createElement("div",{className:"fc-sub-credit"},t.credit):"",i=n.a.createElement("div",{className:"fc-sub-row",key:r},s,o);e.push(i)}),n.a.createElement("div",{className:"fc-sub-rows"},e)}renderLinks(){const e=[];return this.props.fieldData.forEach((t,a)=>{if(!t.url)return;n.a.createElement("img",{src:t.url,alt:""});const r=n.a.createElement("div",{className:"fc-sub-row",key:a},t.title?n.a.createElement("div",{className:"fc-sub-title"},t.title):"",n.a.createElement("div",{className:"fc-sub-url"},t.url));e.push(r)}),n.a.createElement("div",{className:"fc-sub-rows"},e)}renderEntry(){switch(this.props.fieldSlug){case"media":return this.renderMedia();case"links":return this.renderLinks();default:return this.props.fieldData}}render(){return this.props.cornerSlug,this.props.fieldSlug,n.a.createElement("div",{className:"fc-row"},this.props.fieldData?n.a.createElement("div",{className:"fc-value"},this.renderEntry()):"")}},P=a(138),U=a.n(P);var q=class extends n.a.Component{constructor(e){super(e),this.corners=["context","links","authorship","backstory"],this.state={fourCorners:null,formData:{}}}componentDidMount(){let e=this;this.props.activeCorner,setTimeout(function(){e.fourCorners=U.a.prototype.init({noPanels:!0})[0]})}componentDidUpdate(e){const t=this.props.activeCorner;e.activeCorner,t&&this.fourCorners.openCorner(t)}onChangeOpts(e){let t={formData:this.props.formData};t[e.target.id]=e.target.checked,this.setState(t)}onFocus(e){e.target.setSelectionRange(0,e.target.value.length)}onBlur(e){}onError(e){console.log("Error",e)}onScroll(e){}renderPanels(){const e={};Object.entries(this.props.formData).map(t=>this.corners.includes(t[0])?e[t[0]]=t[1]:"");const t=[],a=this.props.creator.acf;return Object.entries(e).forEach((e,r)=>{const s=e[0],o=[s,"title"].join("_"),i=a[o],c=e[1],l=[];Object.entries(c).forEach((e,t)=>{const r=e[0],o=e[1];let i="";if(!["media","links"].includes(r)){const e=[s,r,"label"].join("_");i=a[e]}const c=this.props.mediaData[s];o&&l.push(n.a.createElement(R,{cornerSlug:s,fieldLabel:i,fieldSlug:r,fieldData:o,mediaData:c,key:t}))});let d="fc-panel";this.props.activeCorner==s&&(d+=" fc-active"),t.push(n.a.createElement("div",{className:d,"data-slug":s,key:r},n.a.createElement("div",{className:"fc-panel-title"},i),n.a.createElement("div",{className:"fc-inner"},l)))}),t}render(){const e=this.props.formData.photo,t=e?e.file:"";return n.a.createElement("div",{className:(this.props.imgLoaded?"fc-embed card":"fc-embed")+("true"==this.props.darkMode?" fc-dark":"")},n.a.createElement("div",{className:t?"fc-photo fc-loaded":"fc-photo"},n.a.createElement("img",{src:t,className:"fc-img"})),this.renderPanels())}};var B=class extends n.a.Component{constructor(e){super(e),this.state={includeCss:!1,includeJs:!1,darkMode:!1,stickyStyle:{}},this.imgInputRef=n.a.createRef(),this.outputRef=n.a.createRef(),this.includeJSRef=n.a.createRef(),this.includeCSSRef=n.a.createRef(),this.stickyRef=n.a.createRef()}componentDidMount(){document.body.addEventListener("scroll",this.onScroll.bind(this)),window.addEventListener("resize",this.onScroll.bind(this))}componentWillUnmount(){document.body.removeEventListener("scroll",this.onScroll.bind(this)),window.removeEventListener("resize",this.onScroll.bind(this))}shouldComponentUpdate(e,t){return!0}componentDidUpdate(e){}onDropLoad(e){}onDropError(e){}onChangeOpts(e){let t={formData:this.props.formData};"checkbox"==e.target.type?t[e.target.name]=e.target.checked:"dark"==e.target.name&&(t.darkMode=e.target.value,"true"===e.target.value?t.formData[e.target.name]=e.target.value:delete t.formData[e.target.name]),this.setState(t)}onFocus(e){e.target.setSelectionRange(0,e.target.value.length)}onBlur(e){}onError(e){console.log("Error",e)}onScroll(e){const t=this.stickyRef.current.parentElement.getBoundingClientRect(),a=t.top,r=t.left,n=t.width;window.innerHeight;let s={};a<=0&&(s={width:n+"px",height:"100%",position:"fixed",top:0,left:r+"px",paddingTop:"0px"}),this.setState({stickyStyle:s})}embedCode(e){let t={lang:g.language,img:this.props.imgLoaded?this.props.imgSrc:void 0},a=Object.assign(e,t),r="<div class='fc-embed' data-fc='"+JSON.stringify(a).replace(/'/g,"&apos;")+"'></div>";return r+=this.state.includeJs?'<script src=https://cdn.jsdelivr.net/gh/four-corners/four-corners.js/dist/four-corners.min.js type="text/javascript"><\/script>':"",r+=this.state.includeCss?'<link href="https://cdn.jsdelivr.net/gh/four-corners/four-corners.js/dist/four-corners.min.css" rel="stylesheet" type="text/css">':""}render(){const e=this.props.creator.acf,t=this.props.imgLoaded?"has-image":"",a="form-group card"+(this.props.imgFocus?" focus":"");return n.a.createElement("div",{className:"col-inner"},n.a.createElement("div",{className:"sticky",style:this.state.stickyStyle,ref:this.stickyRef},n.a.createElement("div",{className:"col-content"},n.a.createElement("legend",null,"Create your own"),n.a.createElement("div",{className:"field-description"},e.photo_desc),n.a.createElement("div",{id:"embedder"},n.a.createElement("fieldset",null,n.a.createElement("div",{className:"form-group field field-object"},n.a.createElement("div",{id:"embed-input",className:t},n.a.createElement("div",{className:a},n.a.createElement(q,{creator:this.props.creator,imgSrc:this.props.imgSrc,imgLoaded:this.props.imgLoaded,darkMode:this.state.darkMode,formData:this.props.formData,mediaData:this.props.mediaData,activeCorner:this.props.activeCorner}))),n.a.createElement("div",{id:"embed-output"},n.a.createElement("legend",null,this.props.creator.acf.embed_title),n.a.createElement("textarea",{className:"output form-control",id:"json",readOnly:!0,ref:this.outputRef,rows:3,value:this.embedCode(this.props.formData),onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this)}),n.a.createElement("p",{className:"field-description"},e.embed_desc),n.a.createElement("form",{className:"form-cols",name:"embed-opts",onChange:this.onChangeOpts.bind(this)},n.a.createElement("div",{className:"form-group form-col"},n.a.createElement("label",{className:"control-label"},"Color Options"),n.a.createElement("div",{className:"embed-opts checkboxes"},n.a.createElement("div",{className:"checkbox-widget form-group"},n.a.createElement("input",{className:"embed-opt",id:"lightMode",name:"dark",value:!1,type:"radio",defaultChecked:!0}),n.a.createElement("label",{className:"control-label checkbox",htmlFor:"lightMode"},n.a.createElement("div",{className:"label-inner"},n.a.createElement("span",null,"Light mode")))),n.a.createElement("div",{className:"checkbox-widget form-group"},n.a.createElement("input",{className:"embed-opt",id:"darkMode",name:"dark",value:!0,type:"radio",defaultChecked:!1}),n.a.createElement("label",{className:"control-label checkbox",htmlFor:"darkMode"},n.a.createElement("div",{className:"label-inner"},n.a.createElement("span",null,"Dark mode")))))),n.a.createElement("div",{className:"form-group form-col"},n.a.createElement("label",{className:"control-label"},"Embed Options"),n.a.createElement("div",{className:"embed-opts checkboxes"},n.a.createElement("div",{className:"checkbox-widget form-group"},n.a.createElement("input",{className:"embed-opt",id:"includeJs",name:"includeJs",type:"checkbox",defaultChecked:this.state.includeJs}),n.a.createElement("label",{className:"control-label checkbox",htmlFor:"includeJs"},n.a.createElement("div",{className:"label-inner"},n.a.createElement("span",null,"Include JavaScript file")))),n.a.createElement("div",{className:"checkbox-widget form-group"},n.a.createElement("input",{className:"embed-opt",id:"includeCss",name:"includeCss",type:"checkbox",defaultChecked:this.state.includeJs}),n.a.createElement("label",{className:"control-label checkbox",htmlFor:"includeCss"},n.a.createElement("div",{className:"label-inner"},n.a.createElement("span",null,"Include CSS file"))))))))))))))}};var I=class extends n.a.Component{constructor(e){super(e),this.state={creator:{},lang:"en",formData:{},mediaData:{context:[],backstory:[]},activeCorner:null},this.onLanguageChanged=this.onLanguageChanged.bind(this),this.outputRef=n.a.createRef()}componentDidMount(){let e=this,t=(window.location.href.split("/"),g.language),a=SiteSettings.url.api+"creators?lang="+t;fetch(a).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){e.setState({creator:t[0]})}),g.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){g.off("languageChanged",this.onLanguageChanged)}componentDidUpdate(){}onLanguageChanged(e){this.setState({lang:e})}getEmbedId(e,t){e&&isUrl(e)}setFormData(e){this.setState({formData:e})}setMediaData(e){this.setState({mediaData:e})}setActiveCorner(e){this.setState({activeCorner:e})}renderFormCol(){return n.a.createElement(T,{lang:this.state.lang,creator:this.state.creator,formData:this.state.formData,sendActiveCorner:this.setActiveCorner.bind(this),sendFormData:this.setFormData.bind(this),sendMediaData:this.setMediaData.bind(this)})}renderEmbedCol(){return n.a.createElement(B,{lang:this.state.lang,creator:this.state.creator,formData:this.state.formData,mediaData:this.state.mediaData,activeCorner:this.state.activeCorner})}render(){return this.state.lang,this.state.creator&&this.state.creator.ID?n.a.createElement("div",{id:"creator"},n.a.createElement("div",{className:"max-width"},n.a.createElement("div",{className:"row","data-sticky-container":!0},n.a.createElement("div",{className:"col col-12 col-sm-6 left"},this.renderEmbedCol()),n.a.createElement("div",{className:"col col-12 col-sm-6 right"},this.renderFormCol())))):null}};var A=()=>React.createElement("div",null,React.createElement("div",{className:"container"},React.createElement("h1",null,"Not Found")));a(316),a(317);const J=n.a.createElement(o.a,null,e=>n.a.createElement(i.a,null,n.a.createElement(n.a.Fragment,null,n.a.createElement(v,null),n.a.createElement(c.a,null,n.a.createElement(l.a,{exact:!0,path:SiteSettings.path,component:I}),n.a.createElement(l.a,{exact:!0,path:SiteSettings.path+"creator",component:I}),n.a.createElement(l.a,{path:"*",component:A})))));Object(s.render)(J,document.getElementById("page"))}});
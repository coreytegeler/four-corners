!function(e){function t(t){for(var a,o,i=t[0],l=t[1],c=t[2],m=0,p=[];m<i.length;m++)o=i[m],s[o]&&p.push(s[o][0]),s[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(d&&d(t);p.length;)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==s[l]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},s={0:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=l;r.push([381,1]),n()}({194:function(e,t){},378:function(e,t){},379:function(e,t,n){},381:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(12),o=n(68),i=n(384),l=n(385),c=n(386),d=n(2),m=n.n(d),p=n(106),h=n(157),u=n.n(h),f=n(158),g=n.n(f);p.a.use(u.a).use(g.a).use(o.b).init({fallbackLng:"en",debug:!0,react:{wait:!0,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"},detection:{order:["path","querystring","cookie","localStorage","navigator","htmlTag","subdomain"],lookupQuerystring:"lang",lookupCookie:"i18n",lookupLocalStorage:"i18nextLng"},backend:{loadPath:SiteSettings.url.api+"{{ns}}/{{lng}}"}});var b=p.a,v=n(383);var y=class extends s.a.Component{constructor(e){super(e),this.state={nextIndex:0,activeSlug:null,hoveredSlug:null,fourCorners:null,time:0}}componentDidMount(){this.interval=setInterval(()=>this.cycleCorner(),1750)}componentDidUpdate(e,t,n){}componentWillUnmount(){clearInterval(this.state.time)}cycleCorner(){const e=this.props.cornersInfo;let t=this.state.nextIndex;const n=e[t];t++,this.setState({activeSlug:n.slug,nextIndex:t<e.length?t:0})}onHover(e){const t=e.target.dataset.fcSlug,n=e.target.dataset.index;this.setState({hoveredSlug:t,activeSlug:t,nextIndex:n})}unHover(e){this.setState({hoveredSlug:null})}openPanel(e){this.setState({expandPanel:!1})}renderCorners(){const e=[];return this.props.cornersInfo.forEach((t,n)=>{const a=t.slug;let r="fc-corner fc-"+a;this.state.activeSlug!=a||this.state.hoveredSlug||(r+=" active"),e.push(s.a.createElement("div",{key:n,className:r,"data-fc-slug":a,"data-index":n,onMouseOver:this.onHover.bind(this),onMouseLeave:this.unHover.bind(this),onClick:this.openPanel.bind(this)}))}),e}renderTitles(){const e=[],t=this.props.options||{};return this.props.cornersInfo.forEach((n,a)=>{const r=n.slug;let o="corner-title";(this.state.hoveredSlug==r||this.state.activeSlug==r&&!this.state.hoveredSlug)&&(o+=" active"),e.push(s.a.createElement("div",{key:a,className:o},s.a.createElement("span",null,m()(t[r+"_brief"]))))}),e}render(){return this.state.activeSlug,s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"fc-embed-demo"},this.renderCorners(),this.renderTitles(),this.props.innerContent?s.a.createElement("div",{className:"inner-content"},m()(this.props.innerContent)):"",this.props.photo?s.a.createElement("div",{className:"fc-photo"},s.a.createElement("img",{className:"fc-img",src:this.props.photo})):""))}};var E=class extends s.a.Component{constructor(e){super(e),this.state={}}componentDidMount(){}componentDidUpdate(e,t,n){}onHover(e){}render(){return s.a.createElement("div",{id:"mc_embed_signup",className:"subscribe-form"},s.a.createElement("form",{action:this.props.formUrl,method:"post",id:"mc-embedded-subscribe-form",name:"mc-embedded-subscribe-form",className:"validate",target:"_blank",noValidate:!0},s.a.createElement("label",{htmlFor:"mce-EMAIL"},this.props.label),s.a.createElement("div",{className:"fields-group"},s.a.createElement("input",{type:"email",name:"EMAIL",className:"required email form-elem",id:"mce-EMAIL",placeholder:"email@example.org"}),s.a.createElement("div",{id:"mce-responses",className:"clear"},s.a.createElement("div",{className:"response",id:"mce-error-response",style:{display:"none"}}),s.a.createElement("div",{className:"response",id:"mce-success-response",style:{display:"none"}})),s.a.createElement("div",{style:{position:"absolute",left:"-5000px"},"aria-hidden":"true"},s.a.createElement("input",{type:"text",name:"b_a117064f3864003f8ca77acf1_fffda28ae6",tabIndex:"-1"})),s.a.createElement("input",{type:"submit",value:"Subscribe",name:"subscribe",id:"mc-embedded-subscribe",className:"button"}))))}};var C=class extends s.a.Component{constructor(e){super(e),this.state={page:{},info:{},options:{}},this.cornersInfo=[{title:"Author­ship",slug:"authorship"},{title:"Back­story",slug:"backstory"},{title:"Related Imagery",slug:"imagery"},{title:"Links",slug:"links"}]}componentDidMount(){let e=this,t=b.language,n=SiteSettings.url.api+"page?slug=home&lang="+t;fetch(n).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){t&&e.setState({page:t})});let a=SiteSettings.url.api+"info";fetch(a).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){t&&e.setState({info:t})});let s=SiteSettings.url.api+"options";fetch(s).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){t&&e.setState({options:t})}),b.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){b.off("languageChanged",this.onLanguageChanged)}onLanguageChanged(e){this.setState({lang:e})}renderCornerBlocks(){let e=[];const t=this.state.page.acf||{};return this.cornersInfo.forEach((n,a)=>{const r=t[n.slug+"_desc"];e.push(s.a.createElement("div",{className:"col col-6 col-sm-6 col-lg-3",key:a},s.a.createElement("div",{className:"col-content"},s.a.createElement("div",{className:"content-block corner-block"},s.a.createElement("h2",{id:n.slug},s.a.createElement("div",{className:"corner-title"},n.title)),s.a.createElement("div",{className:"corner-desc"},r)))))}),e}render(){return s.a.createElement("main",{id:"home"},s.a.createElement("section",{id:"home-intro"},s.a.createElement("div",{className:"max-width"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col col-12 col-md-6"},s.a.createElement("div",{className:"col-content"},s.a.createElement("h1",{id:"site-tagline"},this.state.info.tagline),s.a.createElement("div",{className:"prompts"},s.a.createElement(v.a,{to:SiteSettings.path+"create",className:"prompt-button"},s.a.createElement("u",null,"Try it out")),s.a.createElement(v.a,{to:SiteSettings.path+"how",className:"prompt-button"},s.a.createElement("u",null,"Learn more"))),s.a.createElement("div",{id:"home-subscribe"},s.a.createElement(E,{label:s.a.createElement("h3",null,s.a.createElement("strong",null,"Subscribe to receive updates")),formUrl:this.state.options.subscribe})))),s.a.createElement("div",{className:"col col-12 col-md-6"},s.a.createElement("div",{className:"col-content"},s.a.createElement(y,{cornersInfo:this.cornersInfo,options:this.state.options}),s.a.createElement("br",null),s.a.createElement("div",{className:"border-block"},m()(this.state.page.post_content))))))),s.a.createElement("section",{id:"home-about"},s.a.createElement("div",{className:"max-width"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col col-12 col-md-6 left"},s.a.createElement("div",{className:"col-content"},s.a.createElement("h3",null,"The ",s.a.createElement("strong",null,"Four Corners Project")," is meant to ",s.a.createElement("strong",null,"increase the authorship and authority")," of the photographer and the photograph itself by providing a fixed template to add context to each of the four corners of the image. By clicking on each of the corners, the interested reader is able to find out more about what is referenced by the photograph."))),s.a.createElement("div",{className:"col col-12 col-md-6 right"},s.a.createElement("div",{className:"col-content"},s.a.createElement("h3",null,"The platform is free and open source. ",s.a.createElement("strong",null,"It is the first major advance in contextualizing the photograph since the caption.")," It is also the first time that a photographer can immediately inform the reader of his or her own code of ethics as an image-maker.")))))),s.a.createElement("section",{id:"intro-end"},s.a.createElement("div",{className:"max-width"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col col-12 col-lg-6 left"},s.a.createElement("div",{className:"col-content"},s.a.createElement(v.a,{to:SiteSettings.path+"how",className:"prompt-button full"},s.a.createElement("u",null,"How it works")))),s.a.createElement("div",{className:"col col-12 col-lg-6 left"},s.a.createElement("div",{className:"col-content"},s.a.createElement(v.a,{to:SiteSettings.path+"gallery",className:"prompt-button full"},s.a.createElement("u",null,"View the gallery"))))))))}};var k=class extends s.a.Component{constructor(e){super(e),this.state={lang:"en",page:{}}}componentDidMount(){let e=this,t=b.language,n=SiteSettings.url.api+"page?slug=about&lang="+t;fetch(n).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){t&&e.setState({page:t})}),b.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){b.off("languageChanged",this.onLanguageChanged)}onLanguageChanged(e){this.setState({lang:e})}renderContribs(){const e=this.state.page.acf;if(!e)return;const t=e.contributors;let n=[];return t.forEach((e,t)=>{n.push(s.a.createElement("div",{className:"content-block contrib-block",key:t},s.a.createElement("h3",null,e.name),e.role?s.a.createElement("h4",null,e.role):"",m()(e.bio)))}),n}render(){this.state.lang;const e=this.state.page,t=this.renderContribs();return s.a.createElement("main",{id:"about"},s.a.createElement("div",{className:"max-width"},s.a.createElement("h1",null,m()(e.post_title)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col col-12"},s.a.createElement("div",{className:"col-content"},e.post_content?s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,m()(e.post_content))):"",t||"")))))}},N=n(65),x=n.n(N);var S=class extends s.a.Component{constructor(e){super(e),this.state={lang:"en",page:{},embeds:{},embedHtmls:{}},this.slugs=["authorship","backstory","imagery","links"],this.onLanguageChanged=this.onLanguageChanged.bind(this)}componentDidMount(){let e=this,t=b.language,n=SiteSettings.url.api+"page?slug=how&lang="+t;fetch(n).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){t&&e.setState({page:t})}),b.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){b.off("languageChanged",this.onLanguageChanged)}componentDidUpdate(){this.state.page&&this.state.page.acf&&this.slugs.forEach((e,t)=>{if(this.state.embedHtmls[e]){if(!this.state.embeds[e]){this.state.embedHtmls[e];const t=new x.a({elem:'.embed-wrapper[data-slug="'+e+'"] .fc-embed',active:e,static:!0});let n=this.state.embeds;n[e]=t,this.setState({embeds:n})}}else{const t=this.state.page.acf,n=m()(t[e+"_embed"]);let a=this.state.embedHtmls;a[e]=s.a.createElement("div",{className:"embed-wrapper","data-slug":e},n),this.setState({embedHtmls:a})}})}onLanguageChanged(e){this.setState({lang:e})}renderIntro(){return this.state.lang,this.state.page,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col col-12 col-lg-6 left"},s.a.createElement("div",{className:"col-content"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h4",null,"By using Four Corners you are able to add contextualizing information so that it is embedded into each of the four corners of your image. When a viewer hovers his or her mouse over the image, the Four Corners symbols appear and each corner is then clickable.")))),s.a.createElement("div",{className:"col col-12 col-lg-6 right"},s.a.createElement("div",{className:"col-content"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h4",null,"You can create your own Four Corners image with our online form. This provides fields you can fill in with various types of text and media. Once you fill in the provided fields, it automatically generates an embeddable code that you can copy and paste into your site.")))))}renderEmbed(e,t){if(this.state.page,!this.state.page.acf)return;const n=this.state.page.acf,a=m()(n[e+"_embed"]);return s.a.createElement("div",{key:t,className:"embed-wrapper","data-slug":e},a)}renderRow(e,t){const n="row how-block"+(t%2==0?"":" reverse"),a=this.state.page;let r={};return["title","desc","embed"].forEach((t,n)=>{a&&a.acf&&a.acf[e+"_"+t]?r[t]=m()(a.acf[e+"_"+t]):r[t]=""}),s.a.createElement("div",{className:n,key:t},s.a.createElement("div",{className:"col col-12 col-md-5 left"},s.a.createElement("div",{className:"col-content"},s.a.createElement("h2",null,r.title),r.desc)),s.a.createElement("div",{className:"col col-12 col-md-7 right"},s.a.createElement("div",{className:"col-content"},s.a.createElement("div",{className:"embed-wrapper"},this.state.embedHtmls[e]))))}render(){this.state.lang;const e=this.state.page,t=this.renderIntro();let n=[];return this.slugs.forEach((e,t)=>{n.push(this.renderRow(e,t))}),s.a.createElement("main",{id:"how"},s.a.createElement("div",{className:"max-width"},s.a.createElement("h1",null,m()(e.post_title)),t||"",n||""))}},_=n(159),w=n.n(_);var j=class extends s.a.Component{constructor(e){super(e),this.state={lang:"en",page:{},embeds:[]},this.onLanguageChanged=this.onLanguageChanged.bind(this)}componentDidMount(){let e=this,t=b.language,n=SiteSettings.url.api+"page?slug=gallery&lang="+t;fetch(n).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){t&&e.setState({page:t})}),b.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){b.off("languageChanged",this.onLanguageChanged)}componentDidUpdate(){const e=new x.a,t=new w.a("#gallery-embeds",{itemSelector:".embed-col",transitionDuration:0,gutter:0});e.forEach(function(e,n){e.elems.photo;let a=e.elems.embed;a.parentNode,a.classList.contains("loaded")||a.addEventListener("onImgLoad",function(e){console.log(e),t.layout(),a.classList.add("loaded")})}),window.onresize=function(e){}}onLanguageChanged(e){this.setState({lang:e})}renderEmbed(){const e=this.state.page;let t=[];return e.acf.embeds.forEach(function(e,n){const a=m()(e.embed_code);t.push(s.a.createElement("div",{className:"embed-col col col-12 col-xl-6",key:n},s.a.createElement("div",{className:"embed-wrap"},s.a.createElement("h2",null,e.title),a)))}),t}render(){this.state.lang;const e=this.state.page;return s.a.createElement("main",{id:"gallery"},s.a.createElement("div",{className:"max-width"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col col-8 m-auto"},s.a.createElement("h1",null,m()(e.post_title)),s.a.createElement("div",{className:"col-content"},e.post_content?m()(e.post_content):""))),s.a.createElement("div",{className:"row",id:"gallery-embeds"},e.acf?this.renderEmbed():"")))}};var D=class extends s.a.Component{constructor(e){super(e),this.state={lang:"en",page:{}},this.onLanguageChanged=this.onLanguageChanged.bind(this)}componentDidMount(){let e=this,t=b.language,n=SiteSettings.url.api+"page?slug=contact&lang="+t;fetch(n).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){t&&e.setState({page:t})}),b.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){b.off("languageChanged",this.onLanguageChanged)}componentDidUpdate(){}onLanguageChanged(e){this.setState({lang:e})}render(){this.state.lang;const e=this.state.page;return s.a.createElement("main",{id:"contact"},s.a.createElement("div",{className:"max-width"},s.a.createElement("h1",null,m()(e.post_title)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col col-12"},s.a.createElement("div",{className:"col-content"},e.post_content?s.a.createElement("div",{className:"content-block"},m()(e.post_content)):"")))))}};n(240);var F={photo:{fields:{src:{type:"text",format:"url"},width:{type:"text",format:"hidden"},height:{type:"text",format:"hidden"}}},authorship:{fields:{caption:{type:"textarea",rows:2},credit:{type:"text"},license:{type:"toggle",fields:{copyright:{type:"group",fields:{year:{type:"text",style:"one-third",default:!0},holder:{type:"text",style:"two-thirds"}}},commons:{type:"select"}}},ethics:{type:"select",customize:!0},bio:{type:"textarea"},website:{type:"text",format:"url"},website:{type:"text"},contact:{type:"group",fields:{info:{type:"text"},rights:{type:"text"}}}}},backstory:{fields:{text:{type:"textarea"},media:{type:"blocks",fields:{url:{type:"text",format:"url"},caption:{type:"textarea"},credit:{type:"text"}}}}},imagery:{fields:{media:{type:"blocks",fields:{url:{type:"text",format:"url"},caption:{type:"textarea"},credit:{type:"text"}}}}},links:{fields:{links:{type:"blocks",fields:{title:{type:"text"},url:{type:"text",format:"url"}}}}},opts:{fields:{dark:{type:"checkbox"},caption:{type:"checkbox"},credit:{type:"checkbox"},logo:{type:"checkbox"}}}};n(1);var L=class extends s.a.Component{constructor(e){super(e),this.state={opened:!1}}onClick(e){e.preventDefault(),this.setState({opened:!this.state.opened})}onMouseEnter(e){}onMouseLeave(e){}renderToggle(){return this.props.strings.desc?s.a.createElement("div",{className:"toggle-desc"},s.a.createElement("div",{onClick:this.onClick.bind(this),onFocus:this.onClick.bind(this)})):null}render(){const e=this.props.strings,t="field-desc desc"+(this.state.opened?" opened":"");return s.a.createElement("div",{className:"field-label",id:this.props.id},e&&e.label?s.a.createElement("label",{name:this.props.fieldKey,htmlFor:this.props.fieldKey},e.label,this.renderToggle()):null,e&&e.desc?s.a.createElement("div",{className:t},e.desc):null)}};var O=class extends s.a.Component{constructor(e){super(e),this.state={value:"",warn:!1,error:!1}}componentDidUpdate(){}onChange(e){const t=this,n=this.props,a=e.target.name,s=e.target.value;if("photo"===n.setKey){t.setState({error:!1});let r=new Image;r.onload=e=>{t.setState({warn:!1}),n.onChange("photo_width",r.width),n.onChange("photo_height",r.height),n.onChange(a,s)},r.onerror=e=>{t.setState({warn:"load"}),n.onChange(a,null)},r.src=e.currentTarget.value}else n.onChange(a,s)}onBlur(e){const t=this,n=this.props;e.target.name,e.target.value,"photo"===n.setKey&&this.state.warn&&t.setState({error:this.state.warn})}render(){const e=this.props,t=e.setKey,n=e.fieldKey,a=e.field.strings,r=e.field.style,o=e.field.format||"text",i=[t,n].join("_");e.field.default&&a.placeholder;const l=["field","input"];return r&&l.push(r),o&&l.push(o),this.state.error&&l.push("error"),this.state.warn&&l.push("warn"),s.a.createElement("div",{className:l.join(" ")},this.props.hideLabel?"":s.a.createElement(L,{strings:a,fieldKey:n}),s.a.createElement("input",{className:"form-elem",name:i,type:o,placeholder:a.placeholder,onBlur:this.onBlur.bind(this),onChange:this.onChange.bind(this)}),this.state.error?s.a.createElement("div",{className:"desc error-desc"},"This is not a proper URL"):"")}};var P=class extends s.a.Component{constructor(e){super(e)}onChange(e){const t=e.target.name,n=e.target.value;this.props.onChange(t,n)}render(){const e=this.props.setKey,t=this.props.fieldKey,n=this.props.field.strings,a=n.placeholder,r=this.props.field.rows,o=[e,t].join("_");return s.a.createElement("div",{className:"field input"},this.props.hideLabel?"":s.a.createElement(L,{strings:n,fieldId:t}),s.a.createElement("textarea",{name:o,className:"form-elem",rows:r||6,placeholder:a,onChange:this.onChange.bind(this)}))}};n(7);var I=class extends s.a.Component{constructor(e){super(e),this.state={custom:!1,customText:"",value:""},this.selectRef=s.a.createRef()}componentDidUpdate(){const e=this.props.fieldValue;e&&e!=this.state.value&&(this.setState({value:e}),e.label||this.setState({custom:e,customText:e.desc}))}onClick(e){if(e.preventDefault(),e.target.parentElement.classList.contains("toggle-desc"))return;const t=e.currentTarget.classList.contains("custom");let n=e.currentTarget.dataset.value;try{n=JSON.parse(n)}catch(e){console.warn(e)}"TEXTAREA"!==e.target.nodeName&&e.currentTarget.classList.contains("selected")&&(n={}),this.setState({value:n,custom:t});const a=this.selectRef.current.name;this.props.onChange(a,n)}onChangeCustom(e){const t=e.currentTarget.value,n={desc:t};this.setState({custom:!0,customText:t,value:n});const a=this.selectRef.current.name;this.props.onChange(a,n)}render(){const e=this.props.fieldKey,t=this.props.field.strings,n=[this.props.setKey,e].join("_"),a=this.props.field.options,r=this.state.value,o=this.props.field.customize;return s.a.createElement("div",{className:"field select"},this.props.hideLabel?"":s.a.createElement(L,{strings:t,fieldKey:e}),s.a.createElement("select",{name:n,className:"form-elem",ref:this.selectRef,onChange:this.onChange},a?a.map((e,t)=>{const n=JSON.stringify(e);let a=e.label,r=e.desc;return s.a.createElement("option",{key:t,value:n},a+(r?": "+r:""))}):""),s.a.createElement("div",{"data-field":e,className:"select-widget form-elem","data-value":void 0===r?"":r},a?a.map((t,a)=>{let i=t.label,l=t.desc;const c=o&&0==a;c&&(t.desc=this.state.customText);const d=JSON.stringify(t);let m=r.desc===t.desc?"option selected":"option";return m+=c?" custom":"",s.a.createElement("div",{key:a,className:m,"data-value":d,onClick:this.onClick.bind(this)},c?s.a.createElement(s.a.Fragment,null,s.a.createElement("label",null,i),l?s.a.createElement("div",{className:"option-desc desc"},l):"",s.a.createElement("textarea",{name:n+"Custom",className:"form-elem",value:this.state.customText,onChange:this.onChangeCustom.bind(this)})):s.a.createElement(L,{strings:t,fieldKey:e}))}):""))}};const K=n(105);var M=class extends s.a.Component{constructor(e){super(e),this.state={blocks:[],blockMedia:[],superIndex:0}}componentDidUpdate(){const e=this.props.setKey,t=this.props.fieldKey,n=this.props.fieldValue;n&&n!=this.state.blocks&&(n.map((a,s)=>{n[s].index=s,"media"===t&&a.url&&this.getMediaData(a,e,s)}),this.setState({blocks:n,superIndex:n.length+1}))}onChange(e){const t=e.target,n=t.name,a=t.value,s=n.split("_"),r=s[0],o=s[1],i=s[2],l=[r,o].join("_"),c=Number(t.parentElement.parentElement.dataset.index);let d=this.state.blocks,m=d[c];m[i]=a,"media"===o&&this.getMediaData(m,r,c),this.setState({blocks:d}),this.props.onChange(l,d)}onPsuedoChange(e){}getMediaData(e,t,n){const a=encodeURIComponent(e.url),s=e.source,r=Object.assign({},this.state.blockMedia);let o;if(a)switch(s){case"youtube":o="https://noembed.com/embed?url="+a;break;case"vimeo":o="https://vimeo.com/api/oembed.json?url="+a;break;case"soundcloud":o="https://soundcloud.com/oembed?format=json&url="+a;break;case"instagram":o="https://api.instagram.com/oembed/?url="+a;break;default:o=null}if(o){const e=new Headers;fetch(o,{method:"GET",headers:e,mode:"cors",cache:"default"}).then(e=>{if(!e.ok)throw Error(e.statusText);return e.json()}).then(e=>{const a=this.state.blockMedia;let o={source:s};switch(s){case"instagram":o.url=e.thumbnail_url,o.caption=e.title,o.credit="@"+e.author_name+" on Instagram",o.width=e.thumbnail_width,o.height=e.thumbnail_height;break;default:o.html=e.html,o.width=e.width,o.height=e.height}a[n]=o,this.setState({blockMedia:a}),r[t]=a,this.props.sendMediaData(r)}).catch(function(e){console.warn(e)})}else{const e=this.state.blockMedia;e[n]={url:a||null},this.setState({blockMedia:e}),r[t]=e,this.props.sendMediaData(r)}}renderBlocks(){let e=[];return this.state.blocks.forEach((t,n)=>{t.deleted||e.push(this.renderBlock(t,n))}),e}renderBlock(e,t){e.index=t;const n=this.state.blocks,a=this.props.setKey,r=this.props.fieldKey,o=this.props.field,i=o.fields,l=Object.keys(i);if(!o.types)return null;const c=o.types[e.source];if(!c)return null;c.slug=K(c.label,{lower:!0}),c.name=[a,r,"source"].join("_");let d=[];l.map((t,n)=>{const a=i[t],s=e[t];d.push(this.renderField(t,a,s,c,e.index,n))});const m=t-1,p=t+1;return s.a.createElement("div",{className:"block-widget","data-slug":e.sourceSlug,"data-index":t,key:e.index},s.a.createElement("input",{name:c.name,type:"hidden",value:c.slug,onChange:this.onPsuedoChange.bind(this)}),d,s.a.createElement("div",{className:"widget-buttons"},m>=0?s.a.createElement("button",{"data-dir":"up","data-new-index":m,className:"widget-button move-block",onClick:this.moveBlock.bind(this)}):"",p<n.length?s.a.createElement("button",{"data-dir":"down","data-new-index":p,className:"widget-button move-block",onClick:this.moveBlock.bind(this)}):"",s.a.createElement("button",{className:"widget-button delete-block",onClick:this.deleteBlock.bind(this)})))}renderField(e,t,n,a,r,o){const i=this.props.setKey,l=this.props.fieldKey,c=(this.props.data,[i,l,e,r].join("_"));let d;return d="url"==e?a:Object.assign({},t.strings),s.a.createElement("div",{className:"field",key:o},s.a.createElement(L,{strings:d,fieldKey:l}),"text"==t.type?s.a.createElement("input",{name:c,className:"form-elem",type:"text",placeholder:d.placeholder,onChange:this.onChange.bind(this)}):null,"textarea"==t.type?s.a.createElement("textarea",{name:c,className:"form-elem",rows:"2",placeholder:d.placeholder,onChange:this.onChange.bind(this)}):null)}renderButtons(){const e=this.props.field.types;if(!e)return;let t=[];return Object.keys(e).map((n,a)=>{let s=e[n];const r=this.renderButton(s,n,a);t.push(r)}),t}renderButton(e,t,n){return s.a.createElement("button",{key:n,className:"button add-block","data-slug":t,onClick:this.addBlock.bind(this)},"Add "+e.label)}addBlock(e){e.preventDefault();const t=[this.props.setKey,this.props.fieldKey].join("_"),n=this.state.blocks.concat([{source:e.target.dataset.slug,index:this.state.superIndex}]),a=this.state.blockMedia.concat([{source:e.target.dataset.slug,index:this.state.superIndex}]);this.setState({blocks:n,blockMedia:a,superIndex:this.state.superIndex+1}),this.props.onChange(t,n),this.props.sendActiveCorner(this.props.setKey)}deleteBlock(e){e.preventDefault(),this.state.blocks;const t=this.props.setKey,n=this.props.fieldKey,a=e.target.parentElement.parentElement,s=Number(a.dataset.index),r=[t,n].join("_"),o=this.state.blocks.filter((e,t)=>t!==s),i=this.state.blockMedia.filter((e,t)=>t!==s);this.setState({blocks:o,blockMedia:i}),this.props.onChange(r,o),this.props.sendActiveCorner(t);let l=Object.assign({},this.props.mediaData);l[t]=i,this.props.sendMediaData(l)}moveBlock(e){e.preventDefault();const t=this.props.setKey,n=[t,this.props.fieldKey].join("_"),a=e.target.parentElement.parentElement,s=Number(a.dataset.index),r=e.target.dataset.newIndex;let o=this.state.blocks,i=this.state.blockMedia,l=o.splice(s,1)[0];o.splice(r,0,l);let c=i.splice(s,1)[0];i.splice(r,0,c),this.setState({blocks:o,blockMedia:i}),this.props.onChange(n,o);let d=Object.assign({},this.props.mediaData);d[t]=i,this.props.sendMediaData(d)}render(){const e=this.props.setKey,t=this.props.fieldKey;return this.props.field.strings,[e,t].join("_"),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"blocks-widget"},this.renderBlocks()),s.a.createElement("div",{className:"buttons-group"},this.renderButtons()))}};var T=class extends s.a.Component{constructor(e){super(e),this.state={value:"",mediaData:[]}}onFocus(e){}onChange(e){const t=e.target,n=t.name,a=t.value;this.props.onChange(n,a)}renderGroup(){const e=this.props.field;if(!e)return;const t=e.fields,n=Object.keys(t);let a=[];return n.map((e,n)=>{const s=t[e],r=this.renderSubField(e,s,n);a.push(r)}),a}renderSubField(e,t,n){const a=this.props.setKey,r=this.props.fieldKey,o=t.style,i=t.strings,l=[a,r,e].join("_");return s.a.createElement("div",{className:"field input "+o,key:n},s.a.createElement(L,{strings:i,fieldKey:e}),s.a.createElement("input",{name:l,type:"text",defaultValue:t.default?i.placeholder:"",placeholder:t.placeholder,className:"form-elem",onFocus:this.onFocus.bind(this),onChange:this.onChange.bind(this)}))}render(){const e=this.props.setKey,t=(this.props.fieldKey,this.props.field.strings);return s.a.createElement("div",{className:"field fields-group"},this.props.hideLabel?"":s.a.createElement(L,{strings:t,setKey:e}),this.renderGroup())}};var H=class extends s.a.Component{constructor(e){super(e)}onChange(e){const t=e.target.name,n=e.target.checked;this.props.onChange(t,n)}render(){const e=this.props,t=e.fieldKey,n=e.field.strings,a=e.field.style,r=[e.setKey,t].join("_");return s.a.createElement("div",{className:"field checkbox "+(a||"")},s.a.createElement("div",{className:"checkbox-widget"},s.a.createElement("input",{className:"toggle",id:t,name:r,type:"checkbox",onChange:this.onChange.bind(this)}),s.a.createElement("label",{className:"checkbox",htmlFor:t},s.a.createElement("div",{className:"label-inner"},n&&n.label?s.a.createElement("span",null,n.label):""))),n&&n.desc?s.a.createElement("div",{className:"desc"},n.desc):"")}};var A=class extends s.a.Component{constructor(e){super(e),this.state={value:"",values:{},checked:null,mediaData:[]}}componentDidUpdate(){const e=this.props.fieldValue;e!=this.state.value&&this.setState({value:e,values:{fieldValue:e},checked:e?e.type:null})}onChange(e,t){this.state.formData;const n=e.split("_");n[0],n[1];let a=n[2],s=n[3],r=[n[0],n[1]].join("_"),o=Object.assign({},this.state.value);o.length||(o.type=a),"object"==typeof t?o=Object.assign(o,t):o[s]=t;let i=Object.assign({},this.state.values);i[a]=o,this.setState({values:i,value:o,checked:a}),this.props.onChange(r,o)}onToggle(e){const t=this.state.checked,n=e.target,a=n.checked;let s,r,o=n.id,i=(n.name,o.split("_")[2]);t!=i&&a&&(s=i,r=this.state.values[i]),this.setState({checked:s,value:r}),a?this.onChange(o,r):(o=o.substr(0,o.lastIndexOf("_")),this.props.onChange(o,r))}renderCheckboxes(){const e=this.props.field;if(!e)return;const t=e.fields,n=Object.keys(t);let a=[];return n.map((e,s)=>{const r=t[n],o=this.renderCheckbox(e,r,s);a.push(o)}),a}renderCheckbox(e,t,n){const a=this.props.setKey,r=this.props.fieldKey,o=this.props.field.fields[e].strings,i=([a,r].join("_"),[a,r,"type"].join("_")),l=[a,r,e].join("_"),c=this.state.checked;return s.a.createElement("div",{className:"field checkbox half",key:n},s.a.createElement("div",{className:"checkbox-widget"},s.a.createElement("input",{className:"toggle",id:l,name:i,type:"checkbox",checked:c==e,onChange:this.onToggle.bind(this)}),s.a.createElement("label",{className:"checkbox",htmlFor:l},s.a.createElement("div",{className:"label-inner"},o&&o.label?s.a.createElement("span",null,o.label):""))))}renderFields(){const e=this.props.field;if(!e)return;const t=e.fields,n=Object.keys(t);let a=[];return n.map((e,n)=>{const s=t[e],r=this.renderField(e,s,n);a.push(r)}),a}renderField(e,t,n){const a=this.props.setKey,r=this.props.fieldKey,o=this.props.field.fields[e],i=o.strings,l=([a,e].join("_"),[r,e].join("_")),c="field-toggle-field"+(this.state.checked==e?" active":"");let d,m=this.props.fieldValue;switch(o.type){case"text":d=s.a.createElement(O,{key:n,setKey:a,fieldKey:l,field:o,fieldValue:m,hideLabel:!0,onChange:this.onChange.bind(this)});break;case"textarea":d=s.a.createElement(P,{key:n,setKey:a,fieldKey:l,field:o,fieldValue:m,hideLabel:!0,onChange:this.onChange.bind(this)});break;case"select":d=s.a.createElement(I,{key:n,setKey:a,fieldKey:l,field:o,fieldValue:m,hideLabel:!0,onChange:this.onChange.bind(this)});break;case"group":d=s.a.createElement(T,{key:n,setKey:a,fieldKey:l,field:o,fieldValue:m,hideLabel:!0,onChange:this.onChange.bind(this),sendMediaData:this.props.sendMediaData})}return s.a.createElement("div",{className:c,key:n},i&&i.desc?s.a.createElement("div",{className:"desc",dangerouslySetInnerHTML:{__html:i.desc}}):"",d)}render(){const e=this.props.id,t=this.props.field.strings;return[this.props.setKey,e].join("_"),s.a.createElement("div",{className:"field field-toggle"},s.a.createElement(L,{strings:t,fieldId:e}),s.a.createElement("div",{className:"field-toggle-checkboxes"},this.renderCheckboxes()),s.a.createElement("div",{className:"field-toggle-fields"},this.renderFields()))}};var R=class extends s.a.Component{constructor(e){super(e),this.state={expand:!1}}onToggle(e){const t=this.props.setKey,n=t==this.props.activeFieldset?null:t;n&&this.props.sendActiveCorner(n),this.props.sendActiveFieldset(n)}renderFields(){const e=this.props.formData,t=this.props.data.fields,n=Object.keys(t),a=[];for(let r of n){const n=t[r],o=this.props.setKey,i=a.length;let l=e[o]?e[o][r]:null;switch(n.type){case"text":a.push(s.a.createElement(O,{key:i,setKey:o,fieldKey:r,field:n,onChange:this.props.onChange}));break;case"textarea":a.push(s.a.createElement(P,{key:i,setKey:o,fieldKey:r,field:n,onChange:this.props.onChange}));break;case"checkbox":a.push(s.a.createElement(H,{key:i,setKey:o,fieldKey:r,field:n,onChange:this.props.onChange}));break;case"select":a.push(s.a.createElement(I,{key:i,setKey:o,fieldKey:r,field:n,fieldValue:l,onChange:this.props.onChange}));break;case"blocks":a.push(s.a.createElement(M,{key:i,setKey:o,fieldKey:r,field:n,fieldValue:l,onChange:this.props.onChange,sendActiveCorner:this.props.sendActiveCorner,sendMediaData:this.props.sendMediaData}));break;case"group":a.push(s.a.createElement(T,{key:i,setKey:o,fieldKey:r,field:n,onChange:this.props.onChange,sendMediaData:this.props.sendMediaData}));break;case"toggle":a.push(s.a.createElement(A,{key:i,setKey:o,fieldKey:r,field:n,fieldValue:l,onChange:this.props.onChange,sendMediaData:this.props.sendMediaData}))}}return a}render(){const e=this.props.data,t=this.props.setKey,n=e.strings,a=t===this.props.activeFieldset;return s.a.createElement("fieldset",{id:t,className:"toggler "+(a?"expand":"collapse")},s.a.createElement("legend",{className:"toggle-label",onClick:this.onToggle.bind(this)},s.a.createElement("span",null,n.title)),s.a.createElement("div",{className:"fieldset-inner"},n.desc?s.a.createElement("div",{className:"fieldset-desc desc"},n.desc):"",this.renderFields()))}};const B=n(105);var U=class extends s.a.Component{constructor(e){super(e),this.state={mediaData:this.props.mediaData,formData:{authorship:{},backstory:{},imagery:{},links:{},opts:{},photo:{}}},this.translations=this.props.creator.acf}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(e,t,n){this.props.formData!=this.state.formData&&this.setState({formData:this.props.formData})}onFocus(e){const t=e.target.name.split("_")[0];this.props.sendActiveCorner(t),this.props.sendActiveFieldset(t)}onBlur(e){}onChange(e,t){const n=this.state.formData,a=e.split("_"),s=a[0],r=a[1],o=a[2];o?(n[s][r]||(n[s][r]={}),n[s][r][o]=t):n[s][r]=t,this.setState({formData:n}),this.props.sendFormData(n)}onToggle(e){}onError(e){}renderSchema(){let e=[];this.state.lang;const t=Object.keys(F),n=this.translations;if(n){for(let a of t){const t=F[a].fields,r=Object.keys(t);F[a].strings={title:n[[a,"title"].join("_")],desc:n[[a,"desc"].join("_")]};for(let e of r){let s=t[e];if(s)if(F[a].fields[e].strings={label:n[[a,e,"label"].join("_")],desc:n[[a,e,"desc"].join("_")],placeholder:n[[a,e,"placeholder"].join("_")]},"select"===s.type){const t=n[[a,e,"options"].join("_")];F[a].fields[e].options=t}else if("checkbox"===s.type){if(s.fields&&s.fields.length){F[a].fields[e].options={};for(let t of s.fields)F[a].fields[e].options[t]={label:n[[a,e,t,"label"].join("_")],desc:n[[a,e,t,"desc"].join("_")]}}}else if("blocks"===s.type){const t="types",s=F[a].fields[e].fields,r=Object.keys(s);for(let o of r){const r=s[o],i=n[[a,e,"types"].join("_")];if(F[a].fields[e][t]={},i)for(let n of i){let s=n.slug||B(n.label,{lower:!0});F[a].fields[e][t][s]=n}if(F[a].fields[e].fields[o].strings={label:n[[a,e,o,"label"].join("_")],placeholder:n[[a,e,o,"placeholder"].join("_")],desc:n[[a,e,o,"desc"].join("_")]},"select"==r.type){const t=n[[a,e,o,"options"].join("_")];F[a].fields[e].fields[o].options=t}}}else if("toggle"===s.type){const t=F[a].fields[e].fields,s=Object.keys(t);for(let r of s){const s=t[r];if(F[a].fields[e].fields[r].strings={label:n[[a,e,r,"label"].join("_")],placeholder:n[[a,e,r,"placeholder"].join("_")],desc:n[[a,e,r,"desc"].join("_")]},"group"===s.type){const t=this.buildGroup(F,a,e,r);F[a].fields[e].fields[r].fields=t}else if("select"===s.type){const t=n[[a,e,r,"options"].join("_")];F[a].fields[e].fields[r].options=t}}}else if("group"===s.type){const t=this.buildGroup(F,a,e);F[a].fields[e].fields=t}}e.push(s.a.createElement(R,{key:a,setKey:a,data:F[a],formData:this.state.formData,imgLoaded:this.props.imgLoaded,onChange:this.onChange.bind(this),activeCorner:this.props.activeCorner,activeFieldset:this.props.activeFieldset,sendActiveCorner:this.props.sendActiveCorner,sendActiveFieldset:this.props.sendActiveFieldset,sendMediaData:this.props.sendMediaData}))}return e}}buildGroup(e,t,n,a){let s=[t,n].join("_"),r=e[t].fields[n].fields;a&&(r=r[a].fields,s=[s,a].join("_"));const o=this.translations,i=Object.keys(r);for(let e of i)r[e].strings={label:o[[s,e,"label"].join("_")],placeholder:o[[s,e,"placeholder"].join("_")],desc:o[[s,e,"desc"].join("_")]};return r}render(){return s.a.createElement("div",{className:"col-inner"},s.a.createElement("div",{id:"forms",className:"col-content"},s.a.createElement("div",{className:"content-block",dangerouslySetInnerHTML:{__html:this.props.creator.post_content}}),s.a.createElement("form",null,this.renderSchema())))}},q=(n(374),n(382),n(31)),J=n.n(q);var z=class extends s.a.Component{constructor(e){super(e)}createLink(e,t,n=[]){return t||(t=this.extractRootDomain(e)),e.indexOf("@")>-1&&(e="mailto:"+e),s.a.createElement("a",{href:e,target:"_blank",className:n.join(" ")},t)}extractHostname(e){let t;return!!e&&(t=(t=(t=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0]).split("?")[0])}extractRootDomain(e){if(!e)return!1;let t=this.extractHostname(e),n=t.split("."),a=n.length;return a>2&&(t=n[a-2]+"."+n[a-1],2==n[a-2].length&&2==n[a-1].length&&(t=n[a-3]+"."+t)),t}render(){const e=this.props.panelData,t=e.license&&"copyright"==e.license.type;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"fc-row"},e.caption?s.a.createElement("div",{className:"fc-field","data-fc-field":"caption"},s.a.createElement("em",null,e.caption)):"",t||e.credit?s.a.createElement("div",{className:"fc-field","data-fc-field":"credit"},s.a.createElement("div",{className:"fc-content"},t?s.a.createElement("div",{className:"fc-copyright"},null!=e.license.year?s.a.createElement("span",null,e.license.year):s.a.createElement("span",null,"2019"),s.a.createElement("span",null,e.credit?e.credit:"",e.license.holder?(e.credit?"/":"")+e.license.holder:"")):s.a.createElement("span",null,e.credit))):"",e.license&&e.license.label&&"commons"==e.license.type?s.a.createElement("div",{className:"fc-field","data-fc-field":"license"},s.a.createElement("span",{className:"fc-label"},"License"),s.a.createElement("span",{className:"fc-content"},e.license.url?s.a.createElement("a",{href:e.license.url,target:"_blank"},e.license.label?e.license.label:""):e.license.label?e.license.label:"")):"",e.ethics&&e.ethics.desc?s.a.createElement("div",{className:"fc-field","data-fc-field":"ethics"},s.a.createElement("span",{className:"fc-label"},"Code of ethics"),s.a.createElement("span",{className:"fc-content"},e.ethics.desc)):"",e.bio?s.a.createElement("div",{className:"fc-field","data-fc-field":"bio"},s.a.createElement("span",{className:"fc-label"},"Bio"),s.a.createElement("div",{className:"fc-content"},e.bio)):"",e.website||e.contact?s.a.createElement("div",{className:"fc-field fc-contact"},e.website?s.a.createElement("div",{className:"fc-field fc-card","data-fc-field":"website"},s.a.createElement("div",{className:"fc-label"},"Website"),s.a.createElement("div",{className:"fc-content"},this.createLink(e.website))):"",e.contact?s.a.createElement("div",null,e.contact.info?s.a.createElement("div",{className:"fc-field fc-card","data-fc-field":"contact-info"},s.a.createElement("div",{className:"fc-label"},"For more info contact"),s.a.createElement("div",{className:"fc-content"},this.createLink(e.contact.info))):"",e.contact.rights?s.a.createElement("div",{className:"fc-field fc-card","data-fc-field":"contact-rights"},s.a.createElement("div",{className:"fc-label"},"For reproduction rights contact"),s.a.createElement("div",{className:"fc-content"},this.createLink(e.contact.rights))):""):""):""))}};var W=class extends s.a.Component{constructor(e){super(e)}renderMedia(e,t){const n=this.props.mediaData;if(n&&n[t]){if("image"==e.source)return e.url?s.a.createElement("div",{className:"fc-media"},s.a.createElement("img",{src:e.url})):"";{const e=n[t].html;return e?s.a.createElement("div",{className:"fc-media",dangerouslySetInnerHTML:{__html:e}}):""}}}renderBackstory(e){const t=e.text,n=t?t.split(/\n/g):[];let a=[];return a.push(n?s.a.createElement("div",{className:"fc-row",key:-1},n.map((e,t)=>e?s.a.createElement("p",{key:t},e):s.a.createElement("br",{key:t}))):""),e.media&&e.media.map((e,t)=>{a.push(s.a.createElement("div",{className:"fc-row",key:t},this.renderMedia(e,t),e.caption?s.a.createElement("div",{className:"fc-sub-caption"},e.caption):"",e.credit?s.a.createElement("div",{className:"fc-sub-credit"},e.credit):""))}),a}render(){const e=this.props.panelData;return s.a.createElement(s.a.Fragment,null,e?this.renderBackstory(e):"")}};var V=class extends s.a.Component{constructor(e){super(e)}renderMedia(e,t){const n=this.props.mediaData,a=n[t];if(n[t]){if("image"==a.source||"instagram"==a.source){const e=a.url;return e?s.a.createElement("div",{className:"fc-media"},s.a.createElement("img",{src:e})):""}{const e=a.html;return e?s.a.createElement("div",{className:"fc-media",dangerouslySetInnerHTML:{__html:e}}):""}}}renderImagery(e){let t=[];return e.map((e,n)=>{var a=this.renderMedia(e,n);t.push(s.a.createElement("div",{className:"fc-row",key:n},a,e.caption?s.a.createElement("div",{className:"fc-sub-caption"},e.caption):"",e.credit?s.a.createElement("div",{className:"fc-sub-credit"},e.credit):""))}),t}render(){const e=this.props.panelData;return s.a.createElement(s.a.Fragment,null,e&&e.media?this.renderImagery(e.media):"")}};var G=class extends s.a.Component{constructor(e){super(e)}createLink(e,t,n=[]){return t||(t=this.extractRootDomain(e)),e&&e.indexOf("@")>-1&&(e="mailto:"+e),s.a.createElement("a",{href:e,target:"_blank",className:n.join(" ")},t)}extractHostname(e){let t;return!!e&&(t=(t=(t=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0]).split("?")[0])}extractRootDomain(e){if(!e)return!1;let t=this.extractHostname(e),n=t.split("."),a=n.length;return a>2&&(t=n[a-2]+"."+n[a-1],2==n[a-2].length&&2==n[a-1].length&&(t=n[a-3]+"."+t)),t}renderLinks(e){let t=[];return e.forEach((e,n)=>{const a=this.extractRootDomain(e.url),r=e.url||e.title?s.a.createElement(s.a.Fragment,null,s.a.createElement("span",null,e.title?e.title:a),s.a.createElement("div",{className:"fc-sub-url"},a)):"";t.push(s.a.createElement("div",{className:"fc-row",key:n},this.createLink(e.url,r,["fc-card"])))}),t}render(){const e=this.props.panelData.links;return s.a.createElement(s.a.Fragment,null,e?this.renderLinks(e):"")}};var Q=class extends s.a.Component{constructor(e){super(e),this.corners=["imagery","links","authorship","backstory"],this.state={fourCorners:null,formData:{},expandPanel:!1}}componentDidMount(){const e=new FourCorners;e&&(this.fourCorners=e[0])}componentDidUpdate(e,t,n){}onChangeOpts(e){let t={formData:this.props.formData};t[e.target.id]=e.target.checked,this.setState(t)}onClick(e){this.props.sendActiveFieldset("photo")}onFocus(e){e.target.setSelectionRange(0,e.target.value.length)}onBlur(e){}onError(e){console.log("Error",e)}onScroll(e){}openPanel(e){const t=e.target.dataset.fcSlug;this.props.sendActiveCorner(t),this.setState({expandPanel:!1})}toggleExpandPanel(){this.setState({expandPanel:!this.state.expandPanel})}collapsePanel(){this.props.sendActiveCorner(null),this.setState({expandPanel:!1})}renderPanels(){const e=Object.entries(this.props.formData),t={};e.map(e=>this.corners.includes(e[0])?t[e[0]]=e[1]:"");const n=[],a=this.props.creator;return Object.entries(t).forEach((e,t)=>{const r=e[0],o=[r,"title"].join("_"),i=e[1];let l="";if(Object.keys(i).length)switch(r){case"authorship":l=s.a.createElement(z,{panelData:i});break;case"backstory":l=s.a.createElement(W,{panelData:i,mediaData:this.props.mediaData.backstory});break;case"imagery":l=s.a.createElement(V,{panelData:i,mediaData:this.props.mediaData.imagery});break;case"links":l=s.a.createElement(G,{panelData:i})}const c=a&&a.acf?a.acf[o]:"&nbsp;";let d="fc-panel fc-"+r;this.props.activeCorner===r&&(d+=" fc-active"),n.push(s.a.createElement("div",{className:d,"data-fc-slug":r,key:t},s.a.createElement("div",{className:"fc-panel-title"},c,s.a.createElement("div",{className:"fc-icon fc-expand",onClick:this.toggleExpandPanel.bind(this)}),s.a.createElement("div",{className:"fc-icon fc-close",onClick:this.collapsePanel.bind(this)})),s.a.createElement("div",{className:"fc-panel-title fc-pseudo"},c),l?s.a.createElement("div",{className:"fc-scroll"},s.a.createElement("div",{className:"fc-inner"},l)):""))}),n}renderCorners(){const e=[];return this.corners.forEach((t,n)=>{let a="fc-corner fc-"+t;this.props.activeCorner===t&&(a+=" fc-active"),e.push(s.a.createElement("div",{key:n,className:a,"data-fc-slug":t,onClick:this.openPanel.bind(this)}))}),e}renderCutline(){const e=this.props.formData;if(!e)return;const t=e.opts;return t&&(t.caption||t.credit||t.logo)?s.a.createElement("div",{className:"fc-cutline"},t.caption&&e.authorship?s.a.createElement("span",{className:"fc-caption"},e.authorship.caption):"",t.credit&&e.authorship?s.a.createElement("span",{className:"fc-credit"},e.authorship.credit):"",t.logo?s.a.createElement("a",{href:"https://fourcornersproject.org",target:"_blank"}):""):void 0}render(){const e=this.props.formData,t=(e.photo?e.photo.src:null)||null,n=e.opts;let a="fc-embed";n&&n.dark&&(a+=" fc-dark"),this.state.expandPanel&&(a+=" fc-full"),a+=t?" fc-loaded":" fc-empty";const r=this.props.activeCorner;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:a,"data-fc-active":this.corners.includes(r)?r:""},t?"":s.a.createElement("div",{className:"no-photo"},s.a.createElement("div",{className:"no-photo-text"},s.a.createElement("h2",null,"No photo added"),s.a.createElement("h4",null,'Add a link to your image file under "Add your photo"'))),s.a.createElement("div",{className:t?"fc-photo fc-loaded":"fc-photo"},t?s.a.createElement("img",{src:t,className:"fc-img"}):""),this.renderCorners(),this.renderPanels()),this.renderCutline())}};var X=class extends s.a.Component{constructor(e){super(e),this.state={includeCss:!1,includeJs:!1,expand:!1},this.imgInputRef=s.a.createRef(),this.outputRef=s.a.createRef(),this.includeJSRef=s.a.createRef(),this.includeCSSRef=s.a.createRef()}componentDidMount(){}componentWillUnmount(){}onChangeOpts(e){let t={formData:this.props.formData};"checkbox"==e.target.type&&(t[e.target.name]=e.target.checked),this.setState(t)}onFocus(e){e.target.setSelectionRange(0,e.target.value.length)}onBlur(e){}onError(e){console.log("Error",e)}onToggle(e){e.preventDefault();let t=e.currentTarget.parentElement.id;t==this.state.expand&&(t=null),this.setState({expand:t})}embedCode(e){this.props.imgLoaded;let t={lang:b.language},n=e.photo.src,a=JSON.parse(JSON.stringify(Object.assign(e,t),{}));return delete a.photo.src,"<div class='fc-embed' data-fc='"+this.sanitizeCode(a)+"'>"+(e.photo?"<img class='fc-img' src='"+n+"'/>":"")+"</div>"}sanitizeCode(e){const t=this;let n=JSON.parse(JSON.stringify(e));return Object.keys(n).forEach(function(e){const a=n[e];"object"==typeof a&&Object.keys(a).forEach(function(s){"string"==typeof a[s]?n[e][s]=t.sanitizeString(a[s]):a[s]instanceof Array&&a[s].forEach(function(a,r){Object.keys(a).forEach(function(o){n[e][s][r][o]=t.sanitizeString(a[o])})})})}),JSON.stringify(n)}sanitizeString(e){return"string"!=typeof e?e:e.replace(/'/g,"&apos;").replace(/"/g,'"').replace(/&quot;/g,'"').replace(/“/g,"&ldquo;").replace(/”/g,"&rdquo;").replace(/′/g,"&prime;").replace(/″/g,"&Prime;")}render(){const e=this.props.creator,t=this.props.imgLoaded?"has-image":"";return s.a.createElement("div",{className:"col-inner"},s.a.createElement("div",{className:"col-content"},s.a.createElement("div",{id:"preview",className:t},s.a.createElement(Q,{creator:e,formData:this.props.formData,imgLoaded:this.props.imgLoaded,mediaData:this.props.mediaData,activeCorner:this.props.activeCorner,activeFieldset:this.props.activeFieldset,sendActiveCorner:this.props.sendActiveCorner,sendActiveFieldset:this.props.sendActiveFieldset}),s.a.createElement("div",{id:"embed-output"},s.a.createElement("form",{name:"embed",onChange:this.onChangeOpts.bind(this)},s.a.createElement("fieldset",{id:"addScripts",className:"toggler "+(this.state.expand?"expand":"collapse")},s.a.createElement("legend",{className:"toggle-label",onClick:this.onToggle.bind(this)},s.a.createElement("span",null,e&&e.acf?e.acf.scripts_title:null)),s.a.createElement("div",{className:"fieldset-inner"},s.a.createElement("div",{className:"fields-group"},s.a.createElement("div",{className:"field"},e&&e.acf&&e.acf.scripts_desc?s.a.createElement("div",{className:"desc",dangerouslySetInnerHTML:{__html:e.acf.scripts_desc}}):"",s.a.createElement("textarea",{className:"output form-elem",id:"libraries",readOnly:!0,rows:3,value:'<script src="https://cdn.jsdelivr.net/gh/four-corners/four-corners.js@1.1.2/dist/four-corners.min.js" type="text/javascript"><\/script><script type="text/javascript">window.onload=function(){new FourCorners()}<\/script><link href="https://cdn.jsdelivr.net/gh/four-corners/four-corners.js@1.1.2/dist/four-corners.min.css" rel="stylesheet" type="text/css">',onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this)}))))),s.a.createElement("fieldset",{id:"embedPhoto"},s.a.createElement("legend",null,s.a.createElement("span",null,e&&e.acf?e.acf.embed_title:null)),s.a.createElement("div",{className:"fieldset-inner"},s.a.createElement("div",{className:"fields-group"},s.a.createElement("div",{className:"field"},e&&e.acf&&e.acf.embed_desc?s.a.createElement("div",{className:"desc",dangerouslySetInnerHTML:{__html:e.acf.embed_desc}}):"",s.a.createElement("textarea",{className:"output form-elem",id:"json",readOnly:!0,ref:this.outputRef,rows:3,value:this.embedCode(this.props.formData),onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this)}))))))))))}};var Y=class extends s.a.Component{constructor(e){super(e),this.state={activeRow:!1,error:!1}}componentDidUpdate(e,t,n){this.props!=e&&this.setState({error:this.props.error})}onChange(e){this.setState({error:!1})}importCode(e){e.preventDefault();const t=document.getElementsByName("import-code")[0].value;let n;t?(this.props.clearFormData(),this.props.updateFormData(t),n=!1):n="No embed code was added.",this.setState({error:n})}render(){const e=this.props.strings,t=["field","input"];return this.state.error&&t.push("error"),s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"button close-popup",onClick:this.props.closePopup.bind(this)}),s.a.createElement("form",{onSubmit:this.importCode.bind(this)},s.a.createElement("legend",null,e.import_label),s.a.createElement("div",{className:"desc instruct-desc"},m()(e.import_desc)),s.a.createElement("div",{className:t.join(" ")},s.a.createElement("textarea",{name:"import-code",className:"form-elem",rows:6,onChange:this.onChange.bind(this)}),this.state.error?s.a.createElement("div",{className:"desc error-desc"},this.state.error):""),s.a.createElement("div",{className:"buttons-group"},s.a.createElement("button",{className:"button",type:"submit",onClick:this.importCode.bind(this)},e.import_button))))}};var $=class extends s.a.Component{constructor(e){super(e),this.state={active:!1,hidden:!1},this.textarea=s.a.createRef()}componentDidMount(){}onFocus(e){const t=e.currentTarget;this.copyHistoryRow(t)}onClickRow(e){e.currentTarget.dataset.time;const t=!this.state.active;this.setState({active:t})}onClickButton(e){switch(e.preventDefault(),e.currentTarget.dataset.action){case"delete":this.deleteHistoryRow();break;case"copy":this.copyHistoryRow();break;case"import":this.importHistoryRow()}}deleteHistoryRow(){const e=localStorage.getItem("FourCornersHistory");try{const t=JSON.parse(e),n=this.props.timestamp;if(t[n]){delete t[n];const e=JSON.stringify(t);localStorage.setItem("FourCornersHistory",e),this.setState({hidden:!0})}}catch(e){console.warn(e)}}copyHistoryRow(e){e.setSelectionRange(0,e.value.length)}importHistoryRow(e){const t=this.textarea.current.dataset.value;this.props.timestamp,this.props.clearFormData(),this.props.updateFormData(t)}renderWarning(){}renderEmpty(){return!1}renderModule(e,t){e=Object.assign({},e);const n=t?t.src:null,a=JSON.stringify(e);return s.a.createElement("div",{className:"fc-embed","data-fc":a},n?s.a.createElement("img",{src:n,className:"fc-img"}):"")}renderRow(){const e=this.props.strings,t=this.props.timestamp,n=this.props.dataObj,a=new Date(Number(t)).toLocaleDateString(this.props.lang,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),r=n.formData.photo,o=this.renderModule(n.formData,r),i=J.a.renderToStaticMarkup(o).replace(/&quot;/g,"'"),l=J.a.renderToStaticMarkup(o);let c="toggler saved-state";return c+=this.state.active?" expand":" collapse",s.a.createElement("div",{key:t,className:c},s.a.createElement("div",{className:"toggle-label","data-time":t,onClick:this.onClickRow.bind(this)},s.a.createElement("span",null,s.a.createElement("strong",null,a))),s.a.createElement("div",{className:"saved-inner"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col col-6"},o),s.a.createElement("div",{className:"col col-6"},s.a.createElement("textarea",{ref:this.textarea,className:"output form-elem",rows:6,readOnly:!0,value:i,"data-value":l,onFocus:this.onFocus.bind(this)}),s.a.createElement("div",{className:"buttons-group"},s.a.createElement("button",{className:"button",type:"submit","data-action":"import",onClick:this.onClickButton.bind(this)},m()(e.history_import)),s.a.createElement("button",{className:"button red",type:"button","data-action":"delete",onClick:this.onClickButton.bind(this)},m()(e.history_delete)))))))}render(){return!this.state.hidden&&this.renderRow()}};var Z=class extends s.a.Component{constructor(e){super(e),this.state={activeRow:null}}componentDidMount(){}renderWarning(){}renderHistory(){const e=this,t=(e.state.hiddenRows,localStorage.getItem("FourCornersHistory"));let n=JSON.parse(t)||{},a=Object.keys(n).sort(function(e,t){return t-e}),r=[];return a.forEach(function(t,a){e.props.timestamp!=t&&r.push(s.a.createElement($,{key:a,strings:e.props.strings,dataObj:n[t],timestamp:t,lang:e.props.lang,clearFormData:e.props.clearFormData.bind(this),updateFormData:e.props.updateFormData.bind(this)}))}),s.a.createElement("div",{className:"saved-states"},r)}deleteHistory(){const e=localStorage.getItem("FourCornersHistory"),t=JSON.parse(e)||{};this.setState({hiddenRows:Object.keys(t)}),localStorage.removeItem("FourCornersHistory")}render(){const e=this.props.strings,t=localStorage.getItem("FourCornersHistory");return s.a.createElement(s.a.Fragment,null,s.a.createElement("legend",null,e.history_label),s.a.createElement("button",{className:"button close-popup",onClick:this.props.closePopup.bind(this)}),s.a.createElement("div",{className:"desc instruct-desc"},m()(e.history_desc)),t?this.renderHistory():s.a.createElement("h3",null,"There is no edit history found."),s.a.createElement("div",{className:"buttons-group"},s.a.createElement("button",{className:"button",onClick:this.props.toggleSave.bind(this)},this.props.saveHistory?e.history_opt_out:e.history_opt_in),s.a.createElement("button",{className:"button red",onClick:this.deleteHistory.bind(this)},e.history_delete_all)))}};n(105);var ee=class extends s.a.Component{constructor(e){super(e),this.state={activeDesc:null,activeTab:null},this.strings=this.props.creator.acf||{}}toggleDesc(e){const t=e.currentTarget;let n;n=this.state.activeDesc==t.dataset.tab?null:t.dataset.tab,this.setState({activeDesc:n})}openDesc(e){this.setState({activeDesc:e.currentTarget.dataset.tab})}openPopup(e){this.setState({activeTab:e.currentTarget.dataset.tab})}closePopup(e){this.setState({activeTab:null})}updateFormData(e){const t=this;try{const n=m()(e)[0],a=(n.props.children[0],n.props["data-fc"]);let s=JSON.parse(a);t.props.sendFormData(s),Object.keys(F).forEach(function(e){const n=F[e];setTimeout(function(){t.updateFieldsData([e],n,s)},100)}),t.closePopup()}catch(e){t.setState({error:"The embed code is not valid."}),console.warn(e)}}updateFieldsData(e,t,n){const a=this,s=t.fields,r=n[e[0]];r&&Object.keys(s).forEach(function(t){const n=s[t],o=r[t];let i=e.slice(0);switch(i.push(t),n.type){case"text":case"textarea":case"select":case"blocks":a.updateFieldData(i,o)}})}updateFieldData(e,t){let n,a;switch(typeof t){case"object":Array.isArray(t)&&t.forEach(function(t){const s=t.index;delete t.index,Object.keys(t).forEach(function(r){const o=t[r];let i=e.slice(0);i.push(r,s),n=i.join("_"),(a=document.getElementsByName(n)[0])&&(a.value=o)})});break;case"string":n=e.join("_"),(a=document.getElementsByName(n)[0])&&(a.value=t)}}updateFieldValue(){}render(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"embed-import",className:this.state.activeTab?"opened":""},s.a.createElement("div",{id:"popup-links"},s.a.createElement("div",{className:"popup-link"},s.a.createElement("label",null,s.a.createElement("a",{onClick:this.openPopup.bind(this),"data-tab":"import",href:"#"},m()(this.strings.import_label)),s.a.createElement("a",{href:"#",className:"toggle-desc","data-tab":"import",onClick:this.toggleDesc.bind(this)},s.a.createElement("div",null)))),s.a.createElement("div",{className:"popup-link"},s.a.createElement("label",null,s.a.createElement("a",{onClick:this.openPopup.bind(this),"data-tab":"history",href:"#"},m()(this.strings.history_label)),s.a.createElement("a",{href:"#",className:"toggle-desc","data-tab":"history",onClick:this.toggleDesc.bind(this)},s.a.createElement("div",null))))),s.a.createElement("div",{className:"popup-link-descs"},s.a.createElement("div",{className:"desc field-desc"+("import"==this.state.activeDesc?" opened":"")},m()(this.strings.import_desc)),s.a.createElement("div",{className:"desc field-desc"+("history"==this.state.activeDesc?" opened":"")},m()(this.strings.history_desc))),s.a.createElement("div",{id:"creator-popup"},s.a.createElement("div",{id:"popup-back",onClick:this.closePopup.bind(this)}),s.a.createElement("div",{className:"content-block tab-content"+("import"==this.state.activeTab?" opened":"")},s.a.createElement(Y,{strings:this.strings,error:this.state.error,warn:this.state.warn,closePopup:this.closePopup.bind(this),clearFormData:this.props.clearFormData.bind(this),updateFormData:this.updateFormData.bind(this)})),s.a.createElement("div",{className:"content-block tab-content"+("history"==this.state.activeTab?" opened":"")},s.a.createElement(Z,{strings:this.strings,error:this.state.error,warn:this.state.warn,timestamp:this.props.timestamp,saveHistory:this.props.saveHistory,toggleSave:this.props.toggleSave.bind(this),closePopup:this.closePopup.bind(this),clearFormData:this.props.clearFormData.bind(this),updateFormData:this.updateFormData.bind(this)})))))}};var te=class extends s.a.Component{constructor(e){super(e),this.state={creator:{},lang:"en",formData:{authorship:{},backstory:{},imagery:{},links:{},opts:{},photo:{}},mediaData:{imagery:[],backstory:[]},activeCorner:null,activeFieldset:"photo",saveHistory:!0},this.timestamp=Date.now(),this.corners=["imagery","authorship","backstory","links"],this.outputRef=s.a.createRef()}componentDidMount(){let e=this,t=b.language,n=SiteSettings.url.api+"creators?lang="+t;fetch(n).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){if(!t.length)return!1;e.setState({creator:t[0]})}).catch(function(e){console.warn(e)});const a=localStorage.getItem("FourCornersSettings");let s=JSON.parse(a)||{};const r=s.saveHistory;if("boolean"==typeof r)this.setState({saveHistory:r});else{s.saveHistory=this.state.saveHistory;const e=JSON.stringify(s);localStorage.setItem("FourCornersSettings",e)}b.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){b.off("languageChanged",this.onLanguageChanged)}onLanguageChanged(e){this.setState({lang:e})}clearFormData(){this.setState({formData:{}})}setFormData(e){if(!e)return;if(this.setState({formData:e}),!this.state.saveHistory)return;const t=localStorage.getItem("FourCornersHistory"),n=JSON.parse(t)||{};Object.keys(n).sort(function(e,t){return t-e}).forEach(function(e,t){t>=10&&delete n[e]});let a=n&&"object"==typeof n&&!Array.isArray(n)?n:{};a[this.timestamp]={lang:this.state.lang,dateCreated:new Date,formData:e},localStorage.setItem("FourCornersHistory",JSON.stringify(a))}setMediaData(e){this.setState({mediaData:e})}setActiveCorner(e){e||(e=""),this.setState({activeCorner:e})}setActiveFieldset(e=""){this.setState({activeFieldset:e})}toggleSave(){const e=!this.state.saveHistory,t=localStorage.getItem("FourCornersSettings");let n=JSON.parse(t);n.saveHistory=e;const a=JSON.stringify(n);localStorage.setItem("FourCornersSettings",a),this.setState({saveHistory:e})}renderFormCol(){return s.a.createElement(U,{lang:this.state.lang,creator:this.state.creator,formData:this.state.formData,activeCorner:this.state.activeCorner,activeFieldset:this.state.activeFieldset,sendActiveCorner:this.setActiveCorner.bind(this),sendActiveFieldset:this.setActiveFieldset.bind(this),sendFormData:this.setFormData.bind(this),sendMediaData:this.setMediaData.bind(this)})}renderPreviewCol(){return s.a.createElement(X,{lang:this.state.lang,creator:this.state.creator,formData:this.state.formData,mediaData:this.state.mediaData,activeCorner:this.state.activeCorner,activeFieldset:this.state.activeFieldset,sendActiveCorner:this.setActiveCorner.bind(this),sendActiveFieldset:this.setActiveFieldset.bind(this)})}render(){this.state.lang;const e=this.state.creator&&this.state.creator.ID;return s.a.createElement("main",{id:"creator"},s.a.createElement("div",{className:"max-width"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col col-12 col-sm-6 col-md-5 left"},s.a.createElement("h2",null,"Create your own")),s.a.createElement("div",{className:"col col-12 col-sm-6 col-md-7 right"},e?s.a.createElement(ee,{lang:this.state.lang,creator:this.state.creator,timestamp:this.timestamp,saveHistory:this.state.saveHistory,toggleSave:this.toggleSave.bind(this),clearFormData:this.clearFormData.bind(this),sendFormData:this.setFormData.bind(this)}):"")),s.a.createElement("div",{className:"row","data-sticky-container":!0},s.a.createElement("div",{className:"col col-12 col-sm-6 col-md-5 left col-form"},e?this.renderFormCol():null),s.a.createElement("div",{className:"col col-12 col-sm-6 col-md-7 right col-preview"},this.renderPreviewCol()))))}};var ne=class extends s.a.Component{constructor(e){super(e),this.state={slug:null,page:null}}componentDidMount(){let e=window.location.href.split("/"),t=e.pop()||e.pop();this.getPage(t),b.on("languageChanged",this.onLanguageChanged)}componentWillReceiveProps(e){let t=e.location.pathname.split("/"),n=t.pop()||t.pop();n!==this.state.slug&&(this.setState({slug:null,page:null}),this.getPage(n))}componentWillUnmount(){b.off("languageChanged",this.onLanguageChanged)}onLanguageChanged(e){this.setState({lang:e})}getPage(e){let t=this,n=b.language,a=SiteSettings.url.api+"page?slug="+e+"&lang="+n;this.setState({slug:e}),fetch(a).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){e&&t.setState({page:e})})}render(){this.state.lang;const e=this.state.page;return s.a.createElement("main",{id:this.state.slug},e?s.a.createElement("div",{className:"max-width"},s.a.createElement("h1",null,m()(e.post_title)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col col-12"},s.a.createElement("div",{className:"col-content"},e.post_content?m()(e.post_content):"")))):"")}};n(378),n(379);const ae=s.a.createElement(o.a,null,e=>s.a.createElement(i.a,null,s.a.createElement(s.a.Fragment,null,s.a.createElement(l.a,null,s.a.createElement(c.a,{exact:!0,path:SiteSettings.path,render:e=>s.a.createElement(C,null)}),s.a.createElement(c.a,{exact:!0,path:SiteSettings.path+"about",render:e=>s.a.createElement(k,null)}),s.a.createElement(c.a,{path:SiteSettings.path+"how",render:e=>s.a.createElement(S,null)}),s.a.createElement(c.a,{path:SiteSettings.path+"gallery",render:e=>s.a.createElement(j,null)}),s.a.createElement(c.a,{path:SiteSettings.path+"contact",render:e=>s.a.createElement(D,null)}),s.a.createElement(c.a,{path:SiteSettings.path+"create",render:e=>s.a.createElement(te,null)}),s.a.createElement(c.a,{path:"*",component:ne})))));Object(r.render)(ae,document.getElementById("page"))},65:function(module,exports,__webpack_require__){var factory;window,factory=function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n__webpack_require__(/*! styles.scss */ "./src/styles.scss");\n\nvar FourCornersPhoto =\n/*#__PURE__*/\nfunction () {\n  function FourCornersPhoto(embed, opts) {\n    _classCallCheck(this, FourCornersPhoto);\n\n    this.corners = [\'authorship\', \'backstory\', \'imagery\', \'links\'];\n    this.cornerTitles = [\'Authorship\', \'Backstory\', \'Related Imagery\', \'Links\'];\n    this.elems = {\n      embed: embed\n    };\n    var defaultOpts = {\n      selector: \'.fc-embed\',\n      "static": false,\n      caption: false,\n      credit: false,\n      logo: false,\n      active: \'\'\n    };\n    var data = parseData(this);\n    this.photo = data ? data.photo : {};\n    this.opts = Object.assign(defaultOpts, opts);\n    this.opts = data ? Object.assign(this.opts, data.opts) : {};\n    this.content = {\n      authorship: data ? data.authorship : {},\n      backstory: data ? data.backstory : {},\n      imagery: data ? data.imagery : {},\n      links: data ? data.links : {}\n    };\n    this.onImgLoad = new Event(\'onImgLoad\');\n    this.onImgFail = new Event(\'onImgFail\');\n    this.elems.photo = addPhoto(this);\n    this.elems.panels = addPanels(this);\n    this.elems.media = embedMedia(this);\n    this.elems.corners = addCorners(this);\n    this.elems.cutline = addCutline(this);\n    initEmbed(this);\n  }\n\n  _createClass(FourCornersPhoto, [{\n    key: "getPanel",\n    value: function getPanel(slug) {\n      var embed = this.elems.embed;\n\n      if (!embed) {\n        return;\n      }\n\n      var panelSelector = \'.fc-panel\';\n\n      if (slug) {\n        panelSelector += \'[data-fc-slug="\' + slug + \'"]\';\n        return embed.querySelector(panelSelector);\n      }\n\n      return embed.querySelectorAll(panelSelector);\n    }\n  }, {\n    key: "openPanel",\n    value: function openPanel(slug) {\n      var inst = this;\n      var corners = inst.corners;\n      var embed = inst.elems.embed;\n      var corner = inst.elems.corners[slug];\n      var panel = inst.getPanel(slug);\n      embed.classList.remove(\'fc-full\');\n\n      if (embed && corner && panel) {\n        embed.dataset.fcActive = slug;\n        embed.classList.add(\'fc-active\');\n        corner.classList.add(\'fc-active\');\n        panel.classList.add(\'fc-active\');\n      }\n\n      corners.forEach(function (_slug, i) {\n        if (_slug != slug) {\n          inst.closePanel(_slug);\n        }\n      });\n    }\n  }, {\n    key: "closePanel",\n    value: function closePanel(slug) {\n      var inst = this;\n      var embed = inst.elems.embed;\n\n      if (!slug) {\n        slug = embed.dataset.fcActive;\n      }\n\n      if (!slug) {\n        return;\n      }\n\n      var corner = inst.elems.corners[slug];\n      var panel = inst.getPanel(slug);\n\n      if (slug == embed.dataset.fcActive) {\n        embed.dataset.fcActive = \'\';\n        embed.classList.remove(\'fc-active\');\n      }\n\n      if (corner) {\n        corner.classList.remove(\'fc-active\');\n      }\n\n      if (panel) {\n        panel.classList.remove(\'fc-active\');\n      }\n    }\n  }, {\n    key: "toggleExpandPanel",\n    value: function toggleExpandPanel() {\n      var inst = this;\n      inst.elems.embed.classList.toggle(\'fc-full\');\n    }\n  }]);\n\n  return FourCornersPhoto;\n}();\n\nvar initEmbed = function initEmbed(inst) {\n  var embed = inst.elems.embed;\n  embed.classList.add(\'fc-init\');\n\n  if (inst.opts.dark) {\n    embed.classList.add(\'fc-dark\');\n  }\n\n  if (inst.opts["static"]) {\n    embed.classList.add(\'fc-static\');\n  } else {\n    embed.addEventListener(\'click\', function (e) {\n      var onPanels = isChildOf(e.target, inst.getPanel());\n      var onCorners = isChildOf(e.target, inst.elems.corners);\n      var inCreator = isChildOf(e.target, Array.from(document.querySelectorAll(\'#creator\')));\n\n      if (!onPanels && !onCorners && !inCreator) {\n        inst.closePanel();\n        inst.elems.embed.classList.remove(\'fc-full\');\n      }\n    });\n  }\n\n  window.addEventListener(\'resize\', function (e) {\n    resizeEmbed(e, inst);\n  });\n  resizeEmbed(null, inst);\n};\n\nvar resizeEmbed = function resizeEmbed(e, inst) {\n  var panels = inst.getPanel();\n\n  if (!panels) {\n    return;\n  }\n\n  Object.keys(panels).forEach(function (slug, i) {\n    resizePanel(panels[slug]);\n  });\n};\n\nvar resizePanel = function resizePanel(panel) {\n  if (typeof panel.querySelector !== \'function\') {\n    return;\n  }\n\n  var panelScroll = panel.querySelector(\'.fc-scroll\');\n\n  if (!panelScroll) {\n    return;\n  }\n\n  if (panelScroll.scrollHeight > panelScroll.clientHeight) {\n    panel.classList.add(\'fc-overflow\');\n  } else {\n    panel.classList.remove(\'fc-overflow\');\n  }\n};\n\nvar addPhoto = function addPhoto(inst) {\n  var photo,\n      img,\n      embed = inst.elems.embed,\n      width = inst.photo.width,\n      height = inst.photo.height,\n      ratio = width / height,\n      imgSelector = \'.fc-img\';\n  embed.style.paddingBottom = 100 / ratio + \'%\';\n  img = embed.querySelector(imgSelector);\n\n  if (!img) {\n    embed.classList.add(\'fc-empty\');\n  }\n\n  var pseudoImg = new Image();\n  embed.classList.add(\'fc-loading\');\n\n  pseudoImg.onload = function (e) {\n    embed.style.paddingBottom = \'\';\n    embed.classList.remove(\'fc-loading\');\n    embed.dispatchEvent(inst.onImgLoad);\n  };\n\n  pseudoImg.onerror = function (e) {\n    embed.classList.remove(\'fc-loading\');\n    embed.classList.add(\'fc-empty\');\n    embed.dispatchEvent(inst.onImgFail);\n  };\n\n  pseudoImg.src = img ? img.src : null;\n  return img;\n};\n\nvar addPanels = function addPanels(inst) {\n  var data,\n      panels = {};\n  var embed = inst.elems.embed;\n\n  if (!embed) {\n    return;\n  }\n\n  inst.corners.forEach(function (slug, i) {\n    var active = inst.opts.active;\n    var panel = inst.getPanel(slug);\n\n    if (!panel) {\n      var panelInner = \'\';\n\n      if (inst.content && inst.content[slug]) {\n        var panelContent = inst.content[slug];\n\n        switch (slug) {\n          case \'authorship\':\n            panelInner = buildAuthorship(inst, panelContent);\n            break;\n\n          case \'backstory\':\n            panelInner = buildBackstory(inst, panelContent);\n            break;\n\n          case \'imagery\':\n            panelInner = buildImagery(inst, panelContent);\n            break;\n\n          case \'links\':\n            panelInner = buildLinks(inst, panelContent);\n            break;\n        }\n      }\n\n      var panelTile = inst.cornerTitles[i];\n      var panelClass = \'fc-panel fc-\' + slug;\n\n      if (slug == active) {\n        panelClass += \' fc-active\';\n      }\n\n      var panelHTML = "<div data-fc-slug=\\"".concat(slug, "\\" class=\\"").concat(panelClass, "\\">\\n\\t\\t\\t\\t\\t<div class=\\"fc-panel-title\\">\\n\\t\\t\\t\\t\\t\\t<span>").concat(panelTile, "</span>\\n\\t\\t\\t\\t\\t\\t<div class=\\"fc-icon fc-expand\\" title=\\"Expand this panel\\"></div>\\n\\t\\t\\t\\t\\t\\t<div class=\\"fc-icon fc-close\\" title=\\"Close this panel\\"></div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div class=\\"fc-panel-title fc-pseudo\\">\\n\\t\\t\\t\\t\\t\\t<span>").concat(inst.corners.indexOf(slug), "</span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t").concat(panelInner ? "<div class=\\"fc-scroll\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\"fc-inner\\">\\n\\t\\t\\t\\t\\t\\t\\t".concat(panelInner, "\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>") : \'\', "\\n\\t\\t\\t\\t</div>");\n      inst.elems.embed.innerHTML += panelHTML;\n    }\n  });\n  inst.corners.forEach(function (slug, i) {\n    var panel = inst.getPanel(slug);\n    panels[slug] = panel;\n    var panelExpand = panel.querySelector(\'.fc-expand\');\n    panelExpand.addEventListener(\'click\', function (e) {\n      inst.toggleExpandPanel();\n    });\n    var panelClose = panel.querySelector(\'.fc-close\');\n    panelClose.addEventListener(\'click\', function (e) {\n      inst.closePanel(slug);\n      inst.elems.embed.classList.remove(\'fc-full\');\n    });\n  });\n  return panels;\n};\n\nvar createRow = function createRow(panelContent, obj, includeLabel) {\n  var label = includeLabel ? "<div class=\\"fc-label\\">".concat(obj.label, "</div>") : \'\';\n  var content = panelContent[obj.prop];\n  return panelContent[obj.prop] ? "<div class=\\"fc-row\\">\\n\\t\\t\\t".concat(label, "\\n\\t\\t\\t").concat(content, "\\n\\t\\t</div>") : \'\';\n};\n\nvar buildAuthorship = function buildAuthorship(inst, panelContent) {\n  var html,\n      innerHtml = "";\n  innerHtml += panelContent[\'caption\'] ? "<div class=\\"fc-field\\">\\n\\t\\t\\t<em>".concat(panelContent[\'caption\'], "</em>\\n\\t\\t</div>") : \'\';\n  var creditHtml = [];\n\n  if (!panelContent.license) {\n    panelContent.license = {};\n  }\n\n  var hasCopyright = panelContent.license.type == \'copyright\';\n\n  if (panelContent.license.year) {\n    creditHtml.push("<span>".concat(panelContent.license.year, "</span>"));\n  }\n\n  if (panelContent.credit) {\n    creditHtml.push("<span>".concat(panelContent.license.holder ? panelContent.credit + \'/\' + panelContent.license.holder : panelContent.credit, "</span>"));\n  }\n\n  innerHtml += hasCopyright || panelContent.credit ? "<div class=\\"fc-field\\" data-fc-field=\\"credit\\">\\n\\t\\t\\t\\t<div class=\\"fc-content\\">\\n\\t\\t\\t\\t\\t".concat(hasCopyright ? "<div class=\\"fc-copyright\\">\\n\\t\\t\\t\\t\\t\\t\\t".concat(creditHtml.join(\'\'), "\\n\\t\\t\\t\\t\\t\\t</div>") : "<div>".concat(panelContent.credit, "</div>"), "\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>") : \'\';\n  innerHtml += panelContent.license && panelContent.license.label && panelContent.license.type == \'commons\' ? "<div class=\\"fc-field\\" data-fc-field=\\"license\\">\\n\\t\\t\\t\\t<span class=\\"fc-label\\">License</span>\\n\\t\\t\\t\\t<span class=\\"fc-content\\">\\n\\t\\t\\t\\t\\t".concat(panelContent.license.url ? "<a href=\\"".concat(panelContent.license.url, "\\" target=\\"_blank\\">\\n\\t\\t\\t\\t\\t\\t").concat(panelContent.license.label ? panelContent.license.label : \'\', "\\n\\t\\t\\t\\t\\t</a>") : panelContent.license.label ? panelContent.license.label : \'\', "\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t</div>") : \'\';\n  innerHtml += panelContent.ethics && panelContent.ethics.desc ? "<div class=\\"fc-field\\" data-fc-field=\\"ethics\\">\\n\\t\\t\\t\\t<span class=\\"fc-label\\">Code of ethics</span>\\n\\t\\t\\t\\t<span class=\\"fc-content\\">".concat(panelContent.ethics.desc, "</span>\\n\\t\\t\\t</div>") : \'\';\n  innerHtml += panelContent[\'bio\'] ? "<div class=\\"fc-field\\">\\n\\t\\t\\t<span class=\\"fc-label\\">Bio</span>\\n\\t\\t\\t".concat(panelContent[\'bio\'], "\\n\\t\\t</div>") : \'\';\n  innerHtml += panelContent[\'website\'] || panelContent[\'0-contact\'] || panelContent[\'1-contact\'] ? "<div class=\\"fc-field fc-contact\\">\\n\\n\\t\\t\\t".concat(panelContent[\'website\'] ? "<div class=\\"fc-field fc-card\\">\\n\\t\\t\\t\\t<div class=\\"fc-label\\">Website</div>\\n\\t\\t\\t\\t".concat(createLink(panelContent[\'website\']), "\\n\\t\\t\\t</div>") : \'\', "\\n\\n\\t\\t\\t").concat(panelContent[\'0-contact\'] ? "<div class=\\"fc-field fc-card\\">\\n\\t\\t\\t\\t<div class=\\"fc-label\\">For more info contact</div>\\n\\t\\t\\t\\t".concat(createLink(panelContent[\'0-contact\']), "\\n\\t\\t\\t</div>") : \'\', "\\n\\n\\t\\t\\t").concat(panelContent[\'1-contact\'] ? "<div class=\\"fc-field fc-card\\">\\n\\t\\t\\t\\t<div class=\\"fc-label\\">For reproduction rights contact</div>\\n\\t\\t\\t\\t".concat(createLink(panelContent[\'1-contact\']), "\\n\\t\\t\\t</div>") : \'\', "\\n\\n\\t\\t</div>") : \'\';\n\n  if (innerHtml.length) {\n    html = "<div class=\\"fc-row\\">".concat(innerHtml, "</div>");\n  }\n\n  return html;\n};\n\nvar buildBackstory = function buildBackstory(inst, panelContent) {\n  var html = "".concat(panelContent[\'text\'] ? "<div class=\\"fc-row\\">\\n\\t\\t\\t".concat(wrapParagraphs(panelContent[\'text\']), "\\n\\t\\t</div>") : \'\', "\\n\\t\\t").concat(panelContent.media ? panelContent.media.map(function (obj, i) {\n    embedIframe(inst, obj, \'backstory\', i);\n    return "<div class=\\"fc-row\\">\\n\\t\\t\\t\\t<div class=\\"fc-media\\" data-fc-source=\\"".concat(obj.source, "\\"></div>\\n\\t\\t\\t\\t").concat(obj.caption ? "<div class=\\"fc-sub-caption\\">".concat(obj.caption, "</div>") : \'\', "\\n\\t\\t\\t\\t").concat(obj.credit ? "<div class=\\"fc-sub-credit\\">".concat(obj.credit, "</div>") : \'\', "\\n\\t\\t\\t</div>");\n  }).join(\'\') : \'\');\n  return html;\n};\n\nvar buildImagery = function buildImagery(inst, panelContent) {\n  if (!panelContent.media) {\n    return;\n  }\n\n  var html = "".concat(panelContent.media.map(function (obj, i) {\n    return "<div class=\\"fc-row\\">\\n\\t\\t\\t\\t<div class=\\"fc-media\\" data-fc-source=\\"".concat(obj.source, "\\">\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t").concat(obj.caption ? "<div class=\\"fc-sub-caption\\">".concat(obj.caption, "</div>") : \'\', "\\n\\t\\t\\t\\t").concat(obj.credit ? "<div class=\\"fc-sub-credit\\">".concat(obj.credit, "</div>") : \'\', "\\n\\t\\t\\t</div>");\n  }).join(\'\'));\n  return html;\n};\n\nvar buildLinks = function buildLinks(inst, panelContent) {\n  if (!panelContent.links) {\n    return;\n  }\n\n  var html = panelContent.links.map(function (obj) {\n    if (!obj || !obj.url) {\n      return null;\n    }\n\n    var rootUrl = extractRootDomain(obj.url);\n    var text = obj.url ? "".concat(obj.title ? obj.title : rootUrl, "\\n\\t\\t\\t<div class=\\"fc-sub-url\\">").concat(rootUrl, "</div>") : \'\';\n    return "<div class=\\"fc-row\\">".concat(createLink(obj.url, text, [\'fc-card\']), "</div>");\n  }).join(\'\');\n  return html;\n};\n\nvar embedMedia = function embedMedia(inst) {\n  var media = inst.content.imagery.media;\n\n  if (!media) {\n    return;\n  }\n\n  var mediaKeys = Object.keys(media);\n  mediaKeys.forEach(function (key, i) {\n    var obj = media[key];\n\n    if (obj.source == \'image\' || obj.source == \'instagram\' || !obj.source) {\n      embedImage(inst, obj, \'imagery\', i);\n    } else {\n      embedIframe(inst, obj, \'imagery\', i);\n    }\n  }); // panelContent.media.map((obj, i) => {\n  // \tobj.source == \'image\' || !obj.source ? embedImage(inst, obj, \'imagery\', i) : embedIframe(inst, obj, \'imagery\', i);\n  // });\n};\n\nvar embedImage = function embedImage(inst, obj, panelKey, index) {\n  if (!obj.url) {\n    return;\n  }\n\n  var pseudoImg = new Image();\n\n  pseudoImg.onload = function (e) {\n    var img = "<img src=\\"".concat(obj.url, "\\"/>");\n    var panel = inst.elems.panels[panelKey];\n    var media = panel.querySelectorAll(\'.fc-media\')[index];\n    media.innerHTML += img;\n  }; // pseudoImg.onerror = (e) => {\n  // console.warn(\'Four Corners cannot load this as an image: \'+obj.url, e);\n  // const img = `<img src="${obj.url}"/>`;\n  // const panel = inst.elems.panels[panelKey];\n  // let media = panel.querySelectorAll(\'.fc-media\')[index];\n  // media.innerHTML += img;\n  // }\n\n\n  pseudoImg.src = obj.url;\n  return;\n};\n\nvar embedIframe = function embedIframe(inst, obj, panelKey, index) {\n  //requests third party APIs to retrieve embed data\n  var req = \'\';\n\n  switch (obj.source) {\n    case \'youtube\':\n      req = \'https://noembed.com/embed?url=\' + obj.url;\n      break;\n\n    case \'vimeo\':\n      req = \'https://vimeo.com/api/oembed.json?url=\' + obj.url;\n      break;\n\n    case \'soundcloud\':\n      req = \'https://soundcloud.com/oembed?format=json&url=\' + obj.url;\n      break;\n\n    default:\n      return false;\n      break;\n  }\n\n  var headers = new Headers();\n  fetch(req, {\n    method: \'GET\',\n    headers: headers\n  }).then(function (res) {\n    if (!res.ok) {\n      throw Error(res.statusText);\n    }\n\n    return res.json();\n  }).then(function (res) {\n    var panel = inst.elems.panels[panelKey];\n    var subMedia = panel.querySelectorAll(\'.fc-media\')[index],\n        html = res.html;\n\n    if (Number.isInteger(res.width, res.height)) {\n      var ratio = res.height / res.width;\n      subMedia.classList.add(\'fc-responsive\');\n      subMedia.style.paddingBottom = ratio * 100 + \'%\';\n    }\n\n    subMedia.innerHTML = html;\n  })["catch"](function (err) {\n    console.warn(\'Four Corners cannot load this media source: \' + obj.url, err);\n  });\n};\n\nvar addCorners = function addCorners(inst) {\n  var data,\n      corners = {};\n  var embed = inst.elems.embed;\n  var photo = inst.elems.photo;\n  var active = inst.opts.active;\n  inst.corners.forEach(function (slug, i) {\n    var cornerSelector = \'.fc-corner[data-fc-slug="\' + slug + \'"]\';\n\n    if (embed.querySelector(cornerSelector)) {\n      return;\n    }\n\n    var corner = document.createElement(\'div\');\n    corner.dataset.fcSlug = slug;\n    corner.title = \'View \' + slug;\n    corner.classList.add(\'fc-corner\');\n    corner.classList.add(\'fc-\' + slug);\n\n    if (slug == active) {\n      corner.classList.add(\'fc-active\');\n    }\n\n    if (inst.content) {\n      data = inst.content[slug];\n\n      if (!data || !Object.keys(data).length) {\n        corner.classList.add(\'fc-empty\');\n      }\n    }\n\n    if (!inst.opts["static"]) {\n      corner.addEventListener(\'mouseenter\', function (e) {\n        hoverCorner(e, inst);\n      });\n      corner.addEventListener(\'mouseleave\', function (e) {\n        unhoverCorner(e, inst);\n      });\n      corner.addEventListener(\'click\', function (e) {\n        clickCorner(e, inst);\n      });\n    }\n\n    corners[slug] = corner;\n    embed.appendChild(corner);\n  });\n  return corners;\n};\n\nvar addCutline = function addCutline(inst) {\n  var content = inst.content.authorship;\n\n  if (!content && !inst.opts.caption && !inst.opts.credit && !inst.opts.logo) {\n    return;\n  }\n\n  var data = inst.content[\'authorship\'];\n\n  if (!data) {\n    return;\n  }\n\n  var embed = inst.elems.embed;\n  var caption = inst.opts.caption && content.caption ? "<span class=\\"fc-caption\\">".concat(content.caption, "</span>") : \'\';\n  var credit = inst.opts.credit && (content.credit || content.license.holder) ? "<span class=\\"fc-credit\\">\\n\\t\\t\\t".concat((content.credit ? "<span>".concat(content.credit, "</span>") : \'\') + (content.license.holder ? "<span>".concat(content.license.holder, "</span>") : \'\'), "\\n\\t\\t</span>") : \'\';\n  var logo = inst.opts.logo ? "<a href=\\"https://fourcornersproject.org\\" target=\\"_blank\\" class=\\"fc-logo\\" title=\\"This is a Four Corners photo\\"></a>" : \'\';\n  var cutline = "<div class=\\"fc-cutline\\">\\n\\t\\t\\t".concat(caption + credit + logo, "\\n\\t\\t</div>");\n  embed.insertAdjacentHTML(\'afterend\', cutline);\n  return cutline;\n};\n\nvar parseData = function parseData(inst) {\n  if (!inst.elems || !inst.elems.embed) {\n    return;\n  }\n\n  var stringData = inst.elems.embed.dataset.fc;\n\n  if (!stringData) {\n    return;\n  }\n\n  delete inst.elems.embed.dataset.fc;\n  return JSON.parse(stringData);\n};\n\nvar hoverCorner = function hoverCorner(e, inst) {\n  var corner = e.target;\n  corner.classList.add(\'fc-hover\');\n};\n\nvar unhoverCorner = function unhoverCorner(e, inst) {\n  var corner = e.target;\n  corner.classList.remove(\'fc-hover\');\n};\n\nvar clickCorner = function clickCorner(e, inst) {\n  var corner = e.target;\n  var slug = corner.dataset.fcSlug;\n  var active = inst.elems.embed.dataset.fcActive;\n\n  if (!slug) {\n    return;\n  }\n\n  if (slug == active) {\n    inst.closePanel(slug);\n  } else {\n    inst.openPanel(slug);\n  }\n};\n\nvar isChildOf = function isChildOf(target, ref) {\n  var answer = false;\n  Object.entries(ref).forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        elem = _ref2[1];\n\n    if (elem && elem.contains && elem.contains(target)) {\n      answer = true;\n    }\n  });\n  return answer;\n};\n\nvar wrapParagraphs = function wrapParagraphs(val) {\n  var array = val.split(/\\n/g);\n  var text = [];\n  var html = array ? "".concat(array.map(function (str, i) {\n    return str ? "<p>".concat(str, "</p>") : "<br/>";\n  }).join(\'\')) : \'\';\n  return html;\n};\n\nvar createLink = function createLink(href, text) {\n  var classes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  if (!text) {\n    text = extractRootDomain(href);\n  }\n\n  if (href.indexOf(\'@\') > -1) {\n    href = \'mailto:\' + href;\n  }\n\n  return "<a href=\\"".concat(href, "\\" target=\\"_blank\\" class=\\"").concat(classes.join(\' \'), "\\">").concat(text, "</a>");\n};\n\nvar extractHostname = function extractHostname(url) {\n  var hostname;\n\n  if (!url) {\n    return false;\n  }\n\n  if (url.indexOf(\'//\') > -1) {\n    hostname = url.split(\'/\')[2];\n  } else {\n    hostname = url.split(\'/\')[0];\n  }\n\n  hostname = hostname.split(\':\')[0];\n  hostname = hostname.split(\'?\')[0];\n  return hostname;\n};\n\nvar extractRootDomain = function extractRootDomain(url) {\n  if (!url) {\n    return false;\n  }\n\n  var domain = extractHostname(url);\n  var splitArr = domain.split(\'.\');\n  var arrLen = splitArr.length;\n\n  if (arrLen > 2) {\n    domain = splitArr[arrLen - 2] + \'.\' + splitArr[arrLen - 1];\n\n    if (splitArr[arrLen - 2].length == 2 && splitArr[arrLen - 1].length == 2) {\n      domain = splitArr[arrLen - 3] + \'.\' + domain;\n    }\n  }\n\n  return domain;\n};\n\nvar hasField = function hasField(panelContent, fieldKey, subFieldKey) {\n  if (!panelContent) {\n    return false;\n  }\n\n  if (!panelContent[fieldKey]) {\n    return false;\n  }\n\n  if (_typeof(panelContent[fieldKey]) == \'object\') {\n    if (!Object.keys(panelContent[fieldKey]).length) {\n      return false;\n    }\n  } else {\n    if (!panelContent[fieldKey].length) {\n      return false;\n    }\n  }\n\n  if (!subFieldKey || !panelContent[fieldKey][subFieldKey]) {\n    return false;\n  }\n\n  if (_typeof(panelContent[fieldKey][subFieldKey]) == \'object\') {\n    if (!Object.keys(panelContent[fieldKey][subFieldKey]).length) {\n      return false;\n    }\n  } else {\n    if (!panelContent[fieldKey][subFieldKey].length) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nvar FourCorners = function FourCorners() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  _classCallCheck(this, FourCorners);\n\n  var embeds = [];\n\n  if (opts.elem instanceof Element) {\n    embeds = [opts.elem];\n  } else if (NodeList.prototype.isPrototypeOf(opts.elem)) {\n    embeds = Array.from(opts.elem);\n  } else {\n    var selector = typeof opts.elem == \'string\' ? opts.elem : \'.fc-embed\';\n    embeds = Array.from(document.querySelectorAll(selector + \':not(.fc-init)\'));\n  }\n\n  var insts = [];\n  embeds.forEach(function (embed, i) {\n    var inst = new FourCornersPhoto(embed, opts);\n    insts.push(inst);\n  });\n  return insts;\n};\n\nmodule.exports = FourCorners;\n\n//# sourceURL=webpack://FourCorners/./src/index.js?')},"./src/styles.scss":
/*!*************************!*\
  !*** ./src/styles.scss ***!
  \*************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack://FourCorners/./src/styles.scss?")},0:
/*!****************************!*\
  !*** multi ./src/index.js ***!
  \****************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__(/*! /Users/coreytegeler/Sites/fourcorners.js/src/index.js */"./src/index.js");\n\n\n//# sourceURL=webpack://FourCorners/multi_./src/index.js?')}})},module.exports=factory()}});
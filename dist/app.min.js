!function(e){function t(t){for(var a,o,i=t[0],l=t[1],c=t[2],p=0,u=[];p<i.length;p++)o=i[p],r[o]&&u.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(d&&d(t);u.length;)u.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={0:0},s=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=l;s.push([375,1]),n()}({152:function(module,exports,__webpack_require__){!function(e,t){module.exports=t()}(window,function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _src_styles_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/styles.scss */ "./src/styles.scss");\n/* harmony import */ var _src_styles_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_src_styles_scss__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _src_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/index.js */ "./src/index.js");\n\n\n/* harmony default export */ __webpack_exports__["default"] = (_src_index_js__WEBPACK_IMPORTED_MODULE_1__["default"]);\n\n//# sourceURL=webpack://FourCorners/./index.js?')},"./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar FourCorners =\n/*#__PURE__*/\nfunction () {\n  function FourCorners(embed, opts) {\n    _classCallCheck(this, FourCorners);\n\n    this.elems = {};\n    this.opts = opts;\n    this.corners = ['context', 'links', 'authorship', 'backstory'];\n    this.elems.embed = embed;\n    this.data = parseData(this);\n    this.elems.photo = addPhoto(this);\n    this.elems.panels = addPanels(this);\n    this.elems.corners = addCorners(this);\n    this.elems.caption = addCutline(this);\n    initEmbed(this);\n  }\n\n  _createClass(FourCorners, [{\n    key: \"init\",\n    value: function init(userOpts) {\n      var proto = this;\n      proto.embeds = [];\n      var defaultOpts = {\n        selector: '.fc-embed:not(.fc-init)',\n        interactive: true,\n        active: null,\n        cutline: true,\n        posDur: 0.2,\n        transDur: 0.1\n      };\n      var opts = Object.assign(defaultOpts, userOpts);\n      var embeds = Array.from(document.querySelectorAll(opts.selector));\n      embeds.forEach(function (embed, i) {\n        var inst = new FourCorners(embed, opts);\n        proto.embeds.push(inst);\n      });\n      return proto.embeds;\n    }\n  }, {\n    key: \"openCorner\",\n    value: function openCorner(slug) {\n      var inst = this;\n      var corners = this.corners;\n      var embed = this.elems.embed;\n      var corner = this.elems.corners[slug];\n      var panel = this.elems.panels[slug];\n      embed.classList.remove('fc-full');\n\n      if (embed && corner && panel) {\n        embed.dataset.fcActive = slug;\n        embed.classList.add('fc-active');\n        corner.classList.add('fc-active');\n        panel.classList.add('fc-active');\n      }\n\n      corners.forEach(function (_slug, i) {\n        if (_slug != slug) {\n          inst.closeCorner(_slug);\n        }\n      });\n    }\n  }, {\n    key: \"closeCorner\",\n    value: function closeCorner(slug) {\n      var inst = this;\n      var embed = inst.elems.embed;\n\n      if (!slug) {\n        slug = embed.dataset.fcActive;\n      }\n\n      var corner = inst.elems.corners[slug];\n      var panel = inst.elems.panels[slug];\n\n      if (slug == embed.dataset.fcActive) {\n        embed.dataset.fcActive = '';\n        embed.classList.remove('fc-active');\n      }\n\n      if (corner) {\n        corner.classList.remove('fc-active');\n      }\n\n      if (panel) {\n        panel.classList.remove('fc-active');\n      }\n    }\n  }, {\n    key: \"toggleExpandPanel\",\n    value: function toggleExpandPanel() {\n      var inst = this;\n      inst.elems.embed.classList.toggle('fc-full');\n    }\n  }]);\n\n  return FourCorners;\n}();\n\nvar initEmbed = function initEmbed(inst) {\n  var embed = inst.elems.embed;\n  embed.classList.add('fc-init');\n\n  if (inst.data && inst.data.opts && inst.data.opts.dark) {\n    embed.classList.add('fc-dark');\n  }\n\n  if (inst.opts.interactive) {\n    // embed.addEventListener('mouseenter', function(e) {\n    // \thoverEmbed(e, inst);\n    // });\n    // embed.addEventListener('mouseleave', function(e) {\n    // \tunhoverEmbed(e, inst);\n    // });\n    window.addEventListener('resize', function (e) {\n      resizeEmbed(e, inst);\n    });\n    window.addEventListener('click', function (e) {\n      var onPanels = isChildOf(e.target, inst.elems.panels);\n      var onCorners = isChildOf(e.target, inst.elems.corners);\n      var inCreator = isChildOf(e.target, Array.from(document.querySelectorAll('#creator')));\n\n      if (!onPanels && !onCorners && !inCreator) {\n        inst.closeCorner();\n      }\n    });\n  }\n\n  resizeEmbed(null, inst);\n};\n\nvar resizeEmbed = function resizeEmbed(e, inst) {\n  var panels = inst.elems.panels;\n\n  if (!panels) {\n    return;\n  }\n\n  Object.keys(panels).forEach(function (slug, i) {\n    resizePanel(panels[slug]);\n  });\n};\n\nvar resizePanel = function resizePanel(panel) {\n  var panelScroll = panel.querySelector('.fc-scroll');\n\n  if (!panelScroll) {\n    return;\n  }\n\n  if (panelScroll.scrollHeight > panelScroll.clientHeight) {\n    panel.classList.add('fc-overflow');\n  } else {\n    panel.classList.remove('fc-overflow');\n  }\n};\n\nvar addPhoto = function addPhoto(inst) {\n  var embed = inst.elems.embed;\n  var data = inst.data;\n\n  if (!data) {\n    return;\n  }\n\n  var img = document.createElement('img');\n  img.classList.add('fc-img');\n  var photo = '';\n  var photoSelector = '.fc-photo';\n\n  if (!embed.querySelector(photoSelector)) {\n    photo = document.createElement('div');\n    photo.classList.add('fc-photo');\n    var pseudoImg = new Image();\n    var photoData = data.photo;\n\n    if (!photoData) {\n      return;\n    }\n\n    var src = photoData.file;\n\n    pseudoImg.onload = function (e) {\n      img.src = src;\n      photo.classList.add('fc-loaded');\n    };\n\n    pseudoImg.onerror = function (e) {\n      console.log(e);\n    };\n\n    pseudoImg.src = src;\n    photo.appendChild(img);\n  } else {\n    photo = embed.querySelector(photoSelector);\n  }\n\n  embed.appendChild(photo);\n  return photo;\n};\n\nvar addPanels = function addPanels(inst) {\n  var data,\n      panels = {};\n  var embed = inst.elems.embed;\n  inst.corners.forEach(function (slug, i) {\n    var data = null;\n\n    if (inst.data) {\n      data = inst.data[slug];\n      var dataKeys = Object.keys(data);\n\n      if (!data || !dataKeys.length) {\n        return;\n      }\n    }\n\n    var active = inst.opts.active;\n    var panelSelector = '.fc-panel[data-fc-slug=\"' + slug + '\"]';\n    var panel = embed.querySelector(panelSelector);\n\n    if (!panel) {\n      panel = document.createElement('div');\n      panel.dataset.fcSlug = slug;\n      panel.classList.add('fc-panel');\n      panel.classList.add('fc-' + slug);\n\n      if (slug == active) {\n        panel.classList.add('fc-active');\n      }\n\n      var panelScroll = document.createElement('div');\n      panelScroll.classList.add('fc-scroll');\n      var panelInner = document.createElement('div');\n      panelInner.classList.add('fc-inner');\n      var panelTitle = document.createElement('div');\n      panelTitle.classList.add('fc-panel-title');\n      var panelTitleSpan = document.createElement('span');\n      panelTitleSpan.innerHTML = slug;\n      panelTitle.appendChild(panelTitleSpan);\n      var panelExpand = document.createElement('div');\n      panelExpand.className = 'fc-icon fc-expand';\n      panelExpand.addEventListener('click', function (e) {\n        inst.toggleExpandPanel(e, inst);\n      });\n      panelTitle.appendChild(panelExpand);\n      var panelClose = document.createElement('div');\n      panelClose.className = 'fc-icon fc-close';\n      panelClose.addEventListener('click', function (e) {\n        closePanel(e, inst);\n      });\n      panelTitle.appendChild(panelClose);\n      panelInner.appendChild(panelTitle);\n\n      if (data) {\n        Object.entries(data).forEach(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n              prop = _ref2[0],\n              val = _ref2[1];\n\n          if (!val) {\n            return;\n          }\n\n          var row = document.createElement('div');\n          row.classList.add('fc-row', 'fc-' + prop);\n\n          if (prop == 'media') {\n            var mediaElems = addMedia(val);\n\n            if (mediaElems) {\n              row.appendChild(mediaElems);\n            }\n          } else if (prop == 'links') {\n            var linkElems = addLinks(val);\n\n            if (linkElems) {\n              row.appendChild(linkElems);\n            }\n          } else if (prop == 'license') {\n            var licenseElems = addLicense(val);\n\n            if (licenseElems) {\n              row.appendChild(licenseElems);\n            }\n          } else if (prop == 'ethics') {\n            row.innerHTML = '<strong>Code of ethics</strong>: ' + val;\n          } else if (prop == 'copyright') {\n            row.innerHTML = '&copy; ' + val;\n          } else {\n            row.innerHTML += wrapUrls(val);\n          }\n\n          if (row.childNodes.length) {\n            panelInner.appendChild(row);\n          }\n        });\n      }\n\n      panelScroll.appendChild(panelInner);\n      panel.appendChild(panelScroll);\n      embed.appendChild(panel);\n    }\n\n    panels[slug] = panel;\n  });\n  return panels;\n};\n\nvar addMedia = function addMedia(arr) {\n  var subRows = document.createElement('div');\n  subRows.className = 'fc-sub-rows';\n  arr.forEach(function (obj, index) {\n    if (!Object.keys(obj).length) {\n      return;\n    }\n\n    var subRow = document.createElement('div');\n    subRow.className = 'fc-sub-row';\n\n    if (obj.type == 'image') {\n      embedImage(obj, subRow);\n    } else {\n      embedIframe(obj, subRow);\n    }\n\n    if (obj.credit) {\n      var credit = document.createElement('div');\n      credit.className = 'fc-sub-credit';\n      credit.innerHTML = obj.credit;\n      subRow.appendChild(credit);\n    }\n\n    subRows.appendChild(subRow);\n  });\n\n  if (subRows.childNodes.length) {\n    return subRows;\n  }\n};\n\nvar addLinks = function addLinks(arr) {\n  var subRows = document.createElement('div');\n  subRows.className = 'fc-sub-rows';\n  arr.forEach(function (obj, index) {\n    var subRow = document.createElement('div');\n    subRow.className = 'fc-sub-row';\n    var a = document.createElement('a');\n    a.href = obj.url; // const headers = new Headers();\n    // const req = obj.url;\n    // fetch(req, {\n    // \tmethod: 'GET',\n    // \theaders: headers,\n    // \tmode: 'cors',\n    // \tcache: 'default'\n    // })\n    // .then(res => {\n    // \tif (!res.ok) {throw Error(res.statusText)}\n    // \tconsole.log(res);\n    // \treturn res.json();\n    // })\n    // .then(res => {\n    // \tconsole.log(res);\n    // })\n    // .catch(function(err) {\n    // \tconsole.log(err);\n    // });\n\n    a.target = '_blank';\n\n    if (obj.title) {\n      a.innerHTML = obj.title;\n    }\n\n    subRow.appendChild(a);\n    var rootUrl = extractRootDomain(obj.url);\n\n    if (rootUrl) {\n      var url = document.createElement('div');\n      url.className = 'fc-sub-url';\n      url.innerHTML = rootUrl;\n      subRow.appendChild(url);\n    }\n\n    subRows.appendChild(subRow);\n  });\n  return subRows;\n};\n\nvar addLicense = function addLicense(val) {\n  var a = document.createElement('a');\n  a.href = val;\n  a.target = '_blank';\n  a.innerHTML = val;\n  var text = document.createTextNode('License this photo: ');\n  var span = document.createElement('span');\n  span.appendChild(text);\n  span.appendChild(a);\n  return span;\n};\n\nvar embedImage = function embedImage(obj, subRow) {\n  var mediaWrap = document.createElement('div');\n  mediaWrap.className = 'fc-media';\n  var img = document.createElement('img');\n  img.src = obj.url;\n  mediaWrap.appendChild(img);\n  subRow.appendChild(mediaWrap);\n};\n\nvar embedIframe = function embedIframe(obj, subRow) {\n  var req = '';\n\n  switch (obj.type) {\n    case 'youtube':\n      // req = 'https://www.youtube.com/oembed?url='+obj.url;\n      req = 'https://noembed.com/embed?url=' + obj.url;\n      break;\n\n    case 'vimeo':\n      req = 'https://vimeo.com/api/oembed.json?url=' + obj.url;\n      break;\n\n    case 'soundcloud':\n      req = 'https://soundcloud.com/oembed?format=json&url=' + obj.url;\n      break;\n\n    default:\n      return false;\n      break;\n  } // const headers = new Headers();\n\n\n  fetch(req, {\n    method: 'GET',\n    // headers: headers,\n    // mode: 'no-cors',\n    // cache: 'default',\n    // referrer: 'no-referrer', //'client'\n    // credentials: 'include',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }).then(function (res) {\n    if (!res.ok) {\n      throw Error(res.statusText);\n    }\n\n    return res.json();\n  }).then(function (res) {\n    var mediaWrap = document.createElement('div');\n    mediaWrap.className = 'fc-media';\n    mediaWrap.innerHTML = res.html;\n\n    if (Number.isInteger(res.width, res.height)) {\n      var ratio = res.height / res.width;\n      mediaWrap.classList.add('fc-responsive');\n      mediaWrap.style.paddingBottom = ratio * 100 + '%';\n    }\n\n    if (subRow.childNodes) {\n      subRow.insertBefore(mediaWrap, subRow.childNodes[0]);\n    } else {\n      subRow.prepend(mediaWrap);\n    }\n  }).catch(function (err) {\n    subRow.remove();\n    console.log(err);\n  });\n};\n\nvar extractHostname = function extractHostname(url) {\n  var hostname;\n\n  if (!url) {\n    return false;\n  }\n\n  if (url.indexOf('//') > -1) {\n    hostname = url.split('/')[2];\n  } else {\n    hostname = url.split('/')[0];\n  }\n\n  hostname = hostname.split(':')[0];\n  hostname = hostname.split('?')[0];\n  return hostname;\n};\n\nvar extractRootDomain = function extractRootDomain(url) {\n  if (!url) {\n    return false;\n  }\n\n  var domain = extractHostname(url);\n  var splitArr = domain.split('.');\n  var arrLen = splitArr.length;\n\n  if (arrLen > 2) {\n    domain = splitArr[arrLen - 2] + '.' + splitArr[arrLen - 1];\n\n    if (splitArr[arrLen - 2].length == 2 && splitArr[arrLen - 1].length == 2) {\n      domain = splitArr[arrLen - 3] + '.' + domain;\n    }\n  }\n\n  return domain;\n};\n\nvar addCorners = function addCorners(inst) {\n  var data,\n      corners = {};\n  var embed = inst.elems.embed;\n  var photo = inst.elems.photo;\n  var active = inst.opts.active;\n  inst.corners.forEach(function (slug, i) {\n    var cornerSelector = '.fc-corner[data-fc-slug=\"' + slug + '\"]';\n\n    if (embed.querySelector(cornerSelector)) {\n      return;\n    }\n\n    var corner = document.createElement('div');\n    corner.dataset.fcSlug = slug;\n    corner.classList.add('fc-corner');\n    corner.classList.add('fc-' + slug); // let cornerShadow = document.createElement('div');\n    // cornerShadow.classList.add('fc-shadow');\n    // corner.appendChild(cornerShadow);\n\n    if (slug == active) {\n      corner.classList.add('fc-active');\n    }\n\n    if (inst.data) {\n      data = inst.data[slug];\n\n      if (!data || !Object.keys(data).length) {\n        corner.classList.add('fc-inactive');\n      }\n    }\n\n    if (inst.opts.interactive) {\n      corner.addEventListener('mouseenter', function (e) {\n        hoverCorner(e, inst);\n      });\n      corner.addEventListener('mouseleave', function (e) {\n        unhoverCorner(e, inst);\n      });\n      corner.addEventListener('click', function (e) {\n        clickCorner(e, inst);\n      });\n    }\n\n    corners[slug] = corner;\n    embed.appendChild(corner);\n  });\n  return corners;\n};\n\nvar addCutline = function addCutline(inst) {\n  if (!inst.data || !inst.opts.cutline) {\n    return;\n  }\n\n  var data = inst.data['authorship'];\n\n  if (!data || !Object.keys(data).length) {\n    return;\n  }\n\n  var embed = inst.elems.embed;\n  var cutline = document.createElement('div');\n  cutline.classList.add('fc-cutline');\n  var cutlineArray = [];\n\n  if (data.credit) {\n    cutlineArray.push(data.credit);\n  } // if(data.copyright) {\n  // \tcutlineArray.push('&copy;');\n  // }\n\n\n  var fcLink = '<a href=\"#\" class=\"fc\">Four Corners</a>';\n  cutlineArray.push(fcLink);\n  var cutlineText = cutlineArray.join(' ');\n  cutline.innerHTML = cutlineText;\n  embed.parentNode.insertBefore(cutline, embed.nextSibling);\n};\n\nvar parseData = function parseData(inst) {\n  if (!inst.elems.embed) {\n    return;\n  }\n\n  var stringData = inst.elems.embed.dataset.fc;\n\n  if (!stringData) {\n    return;\n  }\n\n  stringData = stringData;\n  delete inst.elems.embed.dataset.fc;\n  return JSON.parse(stringData);\n}; // const hoverEmbed = (e, inst) => {\n// \tlet embed = inst.elems.embed;\n// \tlet corners = inst.elems.corners;\n// \tconst css = inst.css;\n// \tconst posDur = inst.opts.posDur;\n// }\n// const unhoverEmbed = (e, inst) => {\n// \tlet embed = inst.elems.embed;\n// \tlet corners = inst.elems.corners;\n// \tconst css = inst.css;\n// \tconst posDur = inst.opts.posDur;\n// }\n\n\nvar hoverCorner = function hoverCorner(e, inst) {\n  var corner = e.target;\n  corner.classList.add('fc-hover');\n};\n\nvar unhoverCorner = function unhoverCorner(e, inst) {\n  var corner = e.target;\n  corner.classList.remove('fc-hover');\n};\n\nvar clickCorner = function clickCorner(e, inst) {\n  var corner = e.target;\n  var slug = corner.dataset.fcSlug;\n  var active = inst.elems.embed.dataset.fcActive;\n\n  if (!slug) {\n    return;\n  }\n\n  if (slug == active) {\n    inst.closeCorner(slug);\n  } else {\n    inst.openCorner(slug);\n  }\n};\n\nvar clickPhoto = function clickPhoto(e, inst) {\n  inst.closeCorner();\n};\n\nvar closePanel = function closePanel(e, inst) {\n  inst.closeCorner();\n};\n\nvar isChildOf = function isChildOf(target, ref) {\n  var answer = false;\n  Object.entries(ref).forEach(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        key = _ref4[0],\n        elem = _ref4[1];\n\n    if (elem.contains(target)) {\n      answer = true;\n    }\n  });\n  return answer;\n};\n\nvar wrapUrls = function wrapUrls(str) {\n  var urlPattern = /(?:(?:https?|ftp):\\/\\/)?(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\x{00a1}\\-\\x{ffff}0-9]+-?)*[a-z\\x{00a1}\\-\\x{ffff}0-9]+)(?:\\.(?:[a-z\\x{00a1}\\-\\x{ffff}0-9]+-?)*[a-z\\x{00a1}\\-\\x{ffff}0-9]+)*(?:\\.(?:[a-z\\x{00a1}\\-\\x{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?/ig;\n  return str.replace(urlPattern, function (url) {\n    var protocol_pattern = /^(?:(?:https?|ftp):\\/\\/)/i;\n    var href = protocol_pattern.test(url) ? url : 'http://' + url;\n    return '<a href=\"' + href + '\" target=\"_blank\">' + url + '</a>';\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FourCorners);\n\n//# sourceURL=webpack://FourCorners/./src/index.js?")},"./src/styles.scss":
/*!*************************!*\
  !*** ./src/styles.scss ***!
  \*************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack://FourCorners/./src/styles.scss?")},0:
/*!************************!*\
  !*** multi ./index.js ***!
  \************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__(/*! /Users/coreytegeler/Sites/four-corners.js/index.js */"./index.js");\n\n\n//# sourceURL=webpack://FourCorners/multi_./index.js?')}})})},200:function(e,t){},230:function(e,t){},372:function(e,t){},373:function(e,t,n){},375:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(51),o=n(62),i=n(378),l=n(379),c=n(380),d=n(377),p=n(96),u=n(150),m=n.n(u),h=n(151),f=n.n(h);p.a.use(m.a).use(f.a).use(o.b).init({fallbackLng:"en",debug:!0,react:{wait:!0,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"},detection:{order:["path","querystring","cookie","localStorage","navigator","htmlTag","subdomain"],lookupQuerystring:"lang",lookupCookie:"i18n",lookupLocalStorage:"i18nextLng"},backend:{loadPath:SiteSettings.url.api+"{{ns}}/{{lng}}"}});var g=p.a;var v=class extends r.a.Component{constructor(e){super(e),this.state={lang:"en",langs:{}},this.onLanguageChanged=this.onLanguageChanged.bind(this)}componentDidMount(){let e=this,t=(g.language,SiteSettings.url.api+"get_langs");fetch(t).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){e.setState({langs:JSON.parse(t)})}),g.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){g.off("languageChanged",this.onLanguageChanged)}onLanguageChanged(e){this.setState({lang:e})}renderLangList(){const e=this.state.langs;return r.a.createElement("select",{onChange:this.changeLang.bind(this),className:"form-control"},Object.keys(this.state.langs).map(function(t,n){const a=e[t];return r.a.createElement("option",{key:t,value:t},a.name)}))}changeLang(e){console.log(e)}render(){return this.state.lang,r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"max-width"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-12 col-sm-12 col-md-6 left"},r.a.createElement("div",{className:"col-content"},r.a.createElement("div",{id:"title"},r.a.createElement("h1",{id:"site-title"},r.a.createElement(d.a,{to:SiteSettings.path},"Four Corners"))))),r.a.createElement("div",{className:"col col-12 col-sm-12 col-md-6 right"},r.a.createElement("div",{className:"col-content"},r.a.createElement("nav",{id:"nav"},r.a.createElement(d.a,{to:"#"},"About"),r.a.createElement(d.a,{to:"#"},"How Does It Work"),r.a.createElement(d.a,{to:SiteSettings.path+"creator"},"Create Your Own"),r.a.createElement(d.a,{to:"#"},"Gallery"),r.a.createElement(d.a,{to:"#"},"Contact")))))))}};var b=n(95),E=n.n(b),_=(n(230),n(152)),C=n.n(_);var k=class extends r.a.Component{constructor(e){super(e),this.state={lang:"en",homeData:{},embeds:{},embedHtmls:{}},this.slugs=["authorship","backstory","context","links"],this.onLanguageChanged=this.onLanguageChanged.bind(this)}componentDidMount(){let e=this,t=(window.location.href.split("/"),g.language),n=SiteSettings.url.api+"page?slug=home&lang="+t;fetch(n).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){t&&(e.setState({homeData:t}),e.initEmbeds())}),g.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){g.off("languageChanged",this.onLanguageChanged)}componentDidUpdate(){}onLanguageChanged(e){this.setState({lang:e})}initEmbeds(){this.slugs.forEach((e,t)=>{if(this.state.homeData&&this.state.homeData.acf){const t=this.state.homeData.acf,n=E()(t[e+"_embed"]);let a=this.state.embedHtmls;a[e]=n,this.setState({embedHtmls:a}),C.a.prototype.init({cutline:!1,active:e})}})}renderRow(e,t){const n="row explainer"+(t%2==0?"":" reverse"),a=this.state.homeData;let s={};return["title","desc","embed"].forEach((t,n)=>{a&&a.acf&&a.acf[e+"_"+t]?s[t]=E()(a.acf[e+"_"+t]):s[t]=""}),r.a.createElement("div",{className:n,key:t},r.a.createElement("div",{className:"col col-5"},r.a.createElement("div",{className:"col-content"},r.a.createElement("h2",null,s.title),s.desc)),r.a.createElement("div",{className:"col col-7"},r.a.createElement("div",{className:"col-content"},this.state.embedHtmls[e])))}render(){this.state.lang,this.state.homeData;let e=[];return this.slugs.forEach((t,n)=>{e.push(this.renderRow(t,n))}),r.a.createElement("main",{id:"home"},r.a.createElement("div",{className:"max-width"},e))}};n(107),n(368);var y={photo:{fields:{file:{type:"file"}}},authorship:{fields:{credit:{type:"text"},caption:{type:"text"},ethics:{type:"select"},copyright:{type:"toggle"},license:{type:"toggle"}}},backstory:{fields:{text:{type:"textarea"},media:{type:"blocks",fields:{source:{type:"select",options:["image","youtube","vimeo","soundcloud"]},url:{type:"text",format:"uri"},caption:{type:"text"}}}}},context:{fields:{text:{type:"textarea"}}},links:{fields:{links:{type:"blocks",fields:{title:{type:"text"},url:{type:"text",format:"uri"},caption:{type:"text"}}}}},opts:{fields:{dark:{type:"checkbox"}}}};n(1);var x=class extends r.a.Component{constructor(e){super(e),this.state={value:""}}onChange(e){const t=e.target.name,n=e.target.value;this.props.onChange(t,n)}render(){const e=this.props.id,t=this.props.data.text,n=[this.props.fieldset,e].join("_");return r.a.createElement("div",{className:"field input"},t&&t.label?r.a.createElement("label",{name:e},t.label):"",t&&t.desc?r.a.createElement("div",{className:"desc"},t.desc):"",r.a.createElement("input",{name:n,className:"form-elem",onChange:this.onChange.bind(this),onFocus:e=>{}}))}};var w=class extends r.a.Component{constructor(e){super(e),this.state={value:""}}onChange(e){const t=e.target.name,n=e.target.value;this.props.onChange(t,n)}render(){const e=this.props.id,t=this.props.data.text,n=t.placeholder,a=[this.props.fieldset,e].join("_");return r.a.createElement("div",{className:"field input"},t&&t.label?r.a.createElement("label",{name:e},t.label):"",t&&t.desc?r.a.createElement("div",{className:"desc"},t.desc):"",r.a.createElement("textarea",{name:a,className:"form-elem",rows:5,placeholder:n,onChange:this.onChange.bind(this)}))}};const S=SiteSettings.url.theme+"/assets/images/placeholder.svg";var L=class extends r.a.Component{constructor(e){super(e),this.state={value:"",imgSrc:"",srcMode:"urlMode",urlSrc:"",fileSrc:"",properSrc:!1,isLoaded:!1}}updateSrcMode(e){const t=e.replace("Mode","Src");if(!t)return;const n=this.state[t];this.setState({srcMode:e,imgSrc:n,properSrc:"urlMode"==e&&n}),this.props.onChange("photo_file",n)}onChangeSrc(e,t){let n=null;if("urlMode"==t){let a=new Image;n=e,a.onload=(e=>{this.setState({urlSrc:n,imgSrc:n,isLoaded:!0}),this.updateSrcMode(t),this.props.onChange("photo_file",n)}),a.onerror=(e=>{this.setState({urlSrc:S,imgSrc:S,isLoaded:!1}),this.props.onChange("photo_file",S)}),a.src=n}else"fileMode"==t&&(n=URL.createObjectURL(e),this.updateSrcMode(t),this.setState({fileSrc:n,imgSrc:n,isLoaded:!0}),this.props.onChange("photo_file",n))}onChange(e){const t=e.target.id;this.updateSrcMode(t)}render(){const e=this.props.id,t=this.props.data.text,n=[this.props.fieldset,e].join("_"),a=e+"Url",s=e+"File";return r.a.createElement("div",{className:"field file"},t&&t.label?r.a.createElement("label",{name:e},t.label):"",t&&t.desc?r.a.createElement("div",{className:"desc"},t.desc):"",r.a.createElement("label",{className:"control-label",htmlFor:"fileMode"},"From a URL"),r.a.createElement("div",{className:"checkbox-widget"},r.a.createElement("input",{name:n,type:"radio",className:"form-elem",id:"urlMode",checked:"urlMode"==this.state.srcMode,onChange:this.onChange.bind(this)}),r.a.createElement("label",{className:"control-label checkbox",htmlFor:"urlMode"}),r.a.createElement("div",{className:"checkbox-content"},r.a.createElement("input",{id:a,name:a,type:"url",className:"form-control",placeholder:"https://sample.org/photo.jpg",onChange:e=>{this.onChangeSrc(e.target.value,"urlMode")}}))),r.a.createElement("label",{className:"control-label",htmlFor:"fileMode"},"From a file (temporary)"),r.a.createElement("div",{className:"checkbox-widget"},r.a.createElement("input",{className:"",id:"fileMode",name:"photo",value:"",type:"radio",checked:"fileMode"==this.state.srcMode,onChange:e=>{this.updateSrcMode("fileMode")}}),r.a.createElement("label",{className:"control-label checkbox",htmlFor:"fileMode"}),r.a.createElement("div",{className:"checkbox-content"},r.a.createElement("label",{className:"control-label btn",htmlFor:s},"Browse file"),r.a.createElement("input",{id:s,name:s,type:"file",className:"form-control",onChange:e=>{e.target.files&&this.onChangeSrc(e.target.files[0],"fileMode")}}))))}};n(8);var N=class extends r.a.Component{constructor(e){super(e),this.state={value:"",custom:!1,customText:""},this.selectRef=r.a.createRef()}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(e,t,n){}onClick(e){const t=e.currentTarget.dataset.value;this.setState({value:t});const n=this.selectRef.current.name;this.props.onChange(n,t)}onChange(){}render(){const e=this.props.id,t=this.props.data.text,n=[this.props.fieldset,e].join("_"),a=this.props.data.options;return r.a.createElement("div",{className:"field select"},t&&t.label?r.a.createElement("label",{name:e},t.label):"",t&&t.desc?r.a.createElement("div",{className:"desc"},t.desc):"",r.a.createElement("select",{name:n,className:"form-elem",value:this.state.value,ref:this.selectRef,onChange:this.onChange},a.map(({desc:e,label:t},n)=>r.a.createElement("option",{key:n,value:e},t+(e?": "+e:"")))),r.a.createElement("div",{"data-id":e,className:"select-widget form-elem","data-value":"undefined"==typeof value?"":value},a.map(({desc:e,label:t},n)=>r.a.createElement("div",{className:this.state.value===e||this.state.value===t?"option selected":"option","data-value":e,key:n,onClick:this.onClick.bind(this)},r.a.createElement("div",{className:"option-label"},t),e?r.a.createElement("div",{className:"option-desc"},e):""))))}};var D=class extends r.a.Component{constructor(e){super(e),this.state={value:"",blocks:[{}],mediaData:[]}}onChange(e){const t=e.target.name,n=e.target.value,a=t.split("_"),r=a[0],s=a[1],o=a[2],i=[r,s].join("_"),l=Number(e.target.dataset.index);let c=this.state.blocks;c[l],c[l][o]=n,c[l].url&&this.getMediaData(c[l],r,l),this.setState({blocks:c}),this.props.onChange(i,c)}getMediaData(e,t,n){const a=e.url,r=e.source,s=encodeURIComponent(a),o=Object.assign({},this.state.mediaData);let i="";switch(o[t]=[],r){case"youtube":i="https://noembed.com/embed?url="+s;break;case"vimeo":i="https://vimeo.com/api/oembed.json?url="+s;break;case"soundcloud":i="https://soundcloud.com/oembed?format=json&url="+s;break;default:return!1}const l=new Headers;fetch(i,{method:"GET",headers:l,mode:"cors",cache:"default"}).then(e=>{if(!e.ok)throw Error(e.statusText);return e.json()}).then(e=>{o[t][n]={html:e.html,width:e.width,height:e.height},this.setState({mediaData:o}),this.props.sendMediaData(o)}).catch(function(e){console.log(e)})}renderField(e,t,n,a){const s=this.props.id,o=(this.props.data,t.text),i=t.type,l=[this.props.fieldset,s,e].join("_");let c="";switch(i){case"text":c=r.a.createElement("input",{name:l,type:"text","data-index":n,className:"form-elem",onChange:this.onChange.bind(this)});break;case"select":const e=t.options,a=[];for(let t of e)a.push(r.a.createElement("option",{value:t,key:a.length},t));c=r.a.createElement("select",{name:l,"data-index":n,className:"form-elem",onChange:this.onChange.bind(this)},a)}return r.a.createElement("div",{className:"field input",key:a},o&&o.label?r.a.createElement("label",{name:s},o.label):"",o&&o.desc?r.a.createElement("div",{className:"desc"},o.desc):"",c)}renderBlock(e,t){const n=this.props.data.fields;let a=[];return Object.keys(n).map((e,r)=>{const s=n[e],o=this.renderField(e,s,t,r);a.push(o)}),r.a.createElement("div",{className:"block-widget",key:t},a,r.a.createElement("div",{className:"delete-block","data-index":t,onClick:this.deleteBlock.bind(this)}))}renderBlocks(){let e=[];return this.state.blocks.map((t,n)=>{const a=this.renderBlock(t,n);e.push(a)}),e}addBlock(e){e.preventDefault();let t=this.state.blocks;t.push({}),this.setState({blocks:t})}deleteBlock(e){let t=this.state.blocks;delete t[e.target.dataset.index],this.setState({blocks:t})}render(){const e=this.props.id,t=this.props.data.text;return[this.props.fieldset,e].join("_"),r.a.createElement("div",{className:"field input"},t&&t.label?r.a.createElement("label",{name:e},t.label):"",t&&t.desc?r.a.createElement("div",{className:"desc"},t.desc):"",r.a.createElement("div",{className:"blocks-widget"},this.renderBlocks()),r.a.createElement("button",{className:"add-block",onClick:this.addBlock.bind(this)},"Add ",e.replace("s","")))}};var j=class extends r.a.Component{constructor(e){super(e),this.state={value:""}}onChange(e){const t=e.target.name,n=e.target.checked;this.props.onChange(t,n)}render(){const e=this.props.id,t=this.props.data.text,n=[this.props.fieldset,e].join("_");return r.a.createElement("div",{className:"field input"},r.a.createElement("div",{className:"checkbox-widget"},r.a.createElement("input",{className:"toggle",id:e,name:n,type:"checkbox",defaultChecked:!1,onChange:this.onChange.bind(this)}),r.a.createElement("label",{className:"control-label checkbox",htmlFor:e},r.a.createElement("div",{className:"label-inner"},t&&t.label?r.a.createElement("span",null,t.label):""))),t&&t.desc?r.a.createElement("div",{className:"desc"},t.desc):"")}};var M=class extends r.a.Component{constructor(e){super(e),this.state={expand:!1}}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(){}toggleExpand(){this.setState({expand:!this.state.expand})}renderFields(){const e=this.props.data.fields,t=Object.keys(e),n=[];for(let a of t){const t=e[a];switch(t.type){case"text":n.push(r.a.createElement(x,{id:a,fieldset:this.props.id,data:t,key:n.length,onChange:this.props.onChange}));break;case"textarea":n.push(r.a.createElement(w,{id:a,fieldset:this.props.id,data:t,key:n.length,onChange:this.props.onChange}));break;case"checkbox":n.push(r.a.createElement(j,{id:a,fieldset:this.props.id,data:t,key:n.length,onChange:this.props.onChange}));break;case"select":n.push(r.a.createElement(N,{id:a,fieldset:this.props.id,data:t,key:n.length,onChange:this.props.onChange}));break;case"file":n.push(r.a.createElement(L,{id:a,fieldset:this.props.id,data:t,key:n.length,onChange:this.props.onChange}));break;case"blocks":n.push(r.a.createElement(D,{id:a,fieldset:this.props.id,data:t,key:n.length,onChange:this.props.onChange,sendMediaData:this.props.sendMediaData}))}}return n}render(){const e=this.props.data.text;return r.a.createElement("fieldset",{id:this.props.id,className:this.state.expand?"expand":"collapse"},r.a.createElement("legend",{onClick:this.toggleExpand.bind(this)},r.a.createElement("span",null,e.title)),r.a.createElement("div",{className:"fieldset-inner"},e.desc?r.a.createElement("div",{className:"desc"},e.desc):"",this.renderFields()))}};var R=class extends r.a.Component{constructor(e){super(e),this.state={mediaData:this.props.mediaData,formData:{photo:{},authorship:{},backstory:{},context:{},links:{},opts:{}},imgSrc:null}}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(e,t,n){}onFocus(e){const t=e.target.name.split("_")[0];this.props.sendActiveCorner(t)}onBlur(e){}onChange(e,t){const n=this.state.formData,a=e.split("_");let r=a[0],s=a[1];n[r]&&(n[r][s]=t,this.setState({formData:n}),this.props.sendFormData(n),this.props.sendActiveCorner(r))}onError(e){}renderSchema(){this.state.lang;const e=this.props.creator.acf,t=Object.keys(y);let n=[];for(let a of t){const t=y[a].fields,s=Object.keys(t);y[a].text={title:e[[a,"title"].join("_")],desc:e[[a,"desc"].join("_")]};for(let n of s){let r=t[n];if(r){if(y[a].fields[n].text={label:e[[a,n,"label"].join("_")],desc:e[[a,n,"desc"].join("_")],placeholder:e[[a,n,"placeholder"].join("_")]},"select"==r.type){const t=e[[a,n,"options"].join("_")];y[a].fields[n].options=t}if("blocks"==r.type){const t=y[a].fields[n].fields,r=Object.keys(t);for(let t of r)e[[a,n,"fields"].join("_")],y[a].fields[n].fields[t].text={label:e[[a,n,t,"label"].join("_")],placeholder:e[[a,n,t,"placeholder"].join("_")],desc:e[[a,n,t,"desc"].join("_")]}}}}const o=r.a.createElement(M,{id:a,data:y[a],key:a,onChange:this.onChange.bind(this),sendMediaData:this.props.sendMediaData});n.push(o)}return n}render(){return r.a.createElement("div",{className:"col-inner"},r.a.createElement("div",{id:"forms",className:"col-content"},r.a.createElement("form",{onFocus:this.onFocus.bind(this)},this.renderSchema())))}};n(376),n(146);var P=class extends r.a.Component{constructor(e){super(e),this.state={}}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(e,t,n){}renderMedia(){const e=[];if(this.props.cornerSlug,this.props.fieldSlug,this.props.fieldData)return this.props.fieldData.forEach((t,n)=>{let a="";if("image"!=t.source&&t.source){const e=this.props.mediaData[n];a=!!e&&r.a.createElement("div",{className:"fc-media",dangerouslySetInnerHTML:{__html:e.html}})}else a=!!t.url&&r.a.createElement("img",{src:t.url,alt:""});const s=t.caption?r.a.createElement("div",{className:"fc-sub-caption"},t.caption):"",o=r.a.createElement("div",{className:"fc-sub-row",key:n},a,s);e.push(o)}),r.a.createElement("div",{className:"fc-sub-rows"},e)}extractHostname(e){let t;return!!e&&(t=(t=(t=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0]).split("?")[0])}extractRootDomain(e){if(!e)return!1;let t=this.extractHostname(e),n=t.split("."),a=n.length;return a>2&&(t=n[a-2]+"."+n[a-1],2==n[a-2].length&&2==n[a-1].length&&(t=n[a-3]+"."+t)),t}renderLinks(){const e=[];return this.props.fieldData.forEach((t,n)=>{const a=r.a.createElement("div",{className:"fc-sub-row",key:n},r.a.createElement("a",{href:t.url},t.title),t.url?r.a.createElement("div",{className:"fc-sub-url"},this.extractRootDomain(t.url)):"",t.caption?r.a.createElement("div",{className:"fc-sub-caption"},t.caption):"");e.push(a)}),r.a.createElement("div",{className:"fc-sub-rows"},e)}renderLicense(){const e=this.props.fieldData;return r.a.createElement("span",null,"License this photo"," ",r.a.createElement("a",{href:e,target:"_blank"},e))}renderEntry(){switch(this.props.fieldSlug){case"media":return this.renderMedia();case"links":return this.renderLinks();case"license":return this.renderLicense();default:return this.props.fieldData}}render(){this.props.cornerSlug;const e=this.props.fieldSlug;return r.a.createElement("div",{className:"fc-row fc-"+e},this.props.fieldData?this.renderEntry():"")}};var O=class extends r.a.Component{constructor(e){super(e),this.corners=["context","links","authorship","backstory"],this.state={fourCorners:null,formData:{},expandPanel:!1}}componentDidMount(){const e=FourCorners.default.prototype.init()[0];this.fourCorners=e}componentDidUpdate(e,t,n){this.props.activeCorner}onChangeOpts(e){let t={formData:this.props.formData};t[e.target.id]=e.target.checked,this.setState(t)}onFocus(e){e.target.setSelectionRange(0,e.target.value.length)}onBlur(e){}onError(e){console.log("Error",e)}onScroll(e){}openPanel(e){const t=e.target.dataset.fcSlug;this.props.sendActiveCorner(t),this.setState({expandPanel:!1})}toggleExpandPanel(){this.setState({expandPanel:!this.state.expandPanel})}collapsePanel(){this.props.sendActiveCorner(null),this.setState({expandPanel:!1})}renderPanels(){const e={};Object.entries(this.props.formData).map(t=>this.corners.includes(t[0])?e[t[0]]=t[1]:"");const t=[],n=this.props.creator.acf;return Object.entries(e).forEach((e,a)=>{const s=e[0],o=[s,"title"].join("_"),i=n[o],l=e[1],c=[];Object.entries(l).forEach((e,t)=>{const a=e[0],o=e[1];let i="";if(!["media","links"].includes(a)){const e=[s,a,"label"].join("_");i=n[e]}const l=this.props.mediaData[s];o&&c.push(r.a.createElement(P,{cornerSlug:s,fieldLabel:i,fieldSlug:a,fieldData:o,mediaData:l,key:t}))});let d="fc-panel fc-"+s;this.props.activeCorner==s&&(d+=" fc-active",console.log(s,d)),t.push(r.a.createElement("div",{className:d,"data-fc-slug":s,key:a},r.a.createElement("div",{className:"fc-scroll"},r.a.createElement("div",{className:"fc-inner"},r.a.createElement("div",{className:"fc-panel-title"},r.a.createElement("span",null,i),r.a.createElement("div",{className:"fc-icon fc-expand",onClick:this.toggleExpandPanel.bind(this)}),r.a.createElement("div",{className:"fc-icon fc-close",onClick:this.collapsePanel.bind(this)})),c))))}),t}renderCorners(){const e=[];return this.corners.forEach((t,n)=>{let a="fc-corner fc-"+t;this.props.activeCorner==t&&(a+=" fc-active"),e.push(r.a.createElement("div",{key:n,className:a,"data-fc-slug":t,onClick:this.openPanel.bind(this)}))}),e}render(){const e=this.props.formData.photo,t=e?e.file:"";let n="fc-embed";return this.props.formData.opts&&this.props.formData.opts.dark&&(n+=" fc-dark"),this.state.expandPanel&&(n+=" fc-full"),t&&(n+=" fc-loaded"),r.a.createElement("div",{className:n,"data-fc-active":this.props.activeCorner},t?"":r.a.createElement("div",{className:"no-photo"},r.a.createElement("h2",null,"No photo")),r.a.createElement("div",{className:t?"fc-photo fc-loaded":"fc-photo"},r.a.createElement("img",{src:t,className:"fc-img"})),this.renderCorners(),this.renderPanels())}};var T=class extends r.a.Component{constructor(e){super(e),this.state={includeCss:!1,includeJs:!1,stickyStyle:{},expand:!1},this.imgInputRef=r.a.createRef(),this.outputRef=r.a.createRef(),this.includeJSRef=r.a.createRef(),this.includeCSSRef=r.a.createRef(),this.stickyRef=r.a.createRef()}componentDidMount(){document.body.addEventListener("scroll",this.onScroll.bind(this)),window.addEventListener("resize",this.onScroll.bind(this))}componentWillUnmount(){document.body.removeEventListener("scroll",this.onScroll.bind(this)),window.removeEventListener("resize",this.onScroll.bind(this))}shouldComponentUpdate(e,t){return!0}componentDidUpdate(e){}onChangeOpts(e){let t={formData:this.props.formData};"checkbox"==e.target.type&&(t[e.target.name]=e.target.checked),this.setState(t)}onFocus(e){e.target.setSelectionRange(0,e.target.value.length)}onBlur(e){}onError(e){console.log("Error",e)}toggleExpand(e){e.preventDefault();const t=!this.state.expand;this.setState({expand:t})}onScroll(e){const t=this.stickyRef.current.parentElement.getBoundingClientRect(),n=t.top,a=t.left,r=t.width,s=t.height,o=window.innerHeight;let i={};n<=0&&s>=o&&(i={width:r+"px",height:"100%",position:"fixed",top:0,left:a+"px"}),this.setState({stickyStyle:i})}embedCode(e){let t={lang:g.language,img:this.props.imgLoaded?this.props.imgSrc:void 0},n=Object.assign(e,t),a="<div class='fc-embed' data-fc='"+JSON.stringify(n).replace(/'/g,"&apos;")+"'></div>";return a+=this.state.includeCss?'<link href="https://cdn.jsdelivr.net/gh/four-corners/four-corners.js/dist/four-corners.min.css" rel="stylesheet" type="text/css">':"",a+=this.state.includeJs?'<script src="https://cdn.jsdelivr.net/gh/four-corners/four-corners.js/dist/four-corners.min.js" type="text/javascript"><\/script>':""}render(){this.props.creator.acf;const e=this.props.imgLoaded?"has-image":"";return r.a.createElement("div",{className:"col-inner"},r.a.createElement("div",{className:"sticky",style:this.state.stickyStyle,ref:this.stickyRef},r.a.createElement("div",{className:"col-content"},r.a.createElement("div",{id:"embedder",className:e},r.a.createElement(O,{creator:this.props.creator,imgLoaded:this.props.imgLoaded,formData:this.props.formData,mediaData:this.props.mediaData,activeCorner:this.props.activeCorner,sendActiveCorner:this.props.sendActiveCorner}),r.a.createElement("div",{id:"embed-output"},r.a.createElement("form",{name:"embed",onChange:this.onChangeOpts.bind(this)},r.a.createElement("fieldset",{className:this.state.expand?"expand":"collapse"},this.state.expand?"":r.a.createElement("button",{onClick:this.toggleExpand.bind(this)},r.a.createElement("strong",null,this.props.creator.acf.embed_title)),r.a.createElement("div",{className:"fieldset-inner"},r.a.createElement("div",{className:"field"},r.a.createElement("textarea",{className:"output form-elem",id:"json",readOnly:!0,ref:this.outputRef,rows:3,value:this.embedCode(this.props.formData),onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this)})),r.a.createElement("div",{className:"desc"},"Paste this into your website.")))))))))}};var A=class extends r.a.Component{constructor(e){super(e),this.state={creator:{},lang:"en",formData:{context:{},links:{},authorship:{},backstory:{}},mediaData:{backstory:[]},activeCorner:null},this.corners=["context","links","authorship","backstory"],this.onLanguageChanged=this.onLanguageChanged.bind(this),this.outputRef=r.a.createRef()}componentDidMount(){let e=this,t=(window.location.href.split("/"),g.language),n=SiteSettings.url.api+"creators?lang="+t;fetch(n).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){e.setState({creator:t[0]})}),g.on("languageChanged",this.onLanguageChanged)}componentWillUnmount(){g.off("languageChanged",this.onLanguageChanged)}componentDidUpdate(){}onLanguageChanged(e){this.setState({lang:e})}getEmbedId(e,t){e&&isUrl(e)}setFormData(e){this.setState({formData:e})}setMediaData(e){this.setState({mediaData:e})}setActiveCorner(e){this.setState({activeCorner:e})}renderFormCol(){return r.a.createElement(R,{lang:this.state.lang,creator:this.state.creator,formData:this.state.formData,sendActiveCorner:this.setActiveCorner.bind(this),sendFormData:this.setFormData.bind(this),sendMediaData:this.setMediaData.bind(this)})}renderEmbedCol(){return r.a.createElement(T,{lang:this.state.lang,creator:this.state.creator,formData:this.state.formData,mediaData:this.state.mediaData,activeCorner:this.state.activeCorner,sendActiveCorner:this.setActiveCorner.bind(this)})}render(){return this.state.lang,this.state.creator&&this.state.creator.ID?r.a.createElement("main",{id:"creator"},r.a.createElement("div",{className:"max-width"},r.a.createElement("div",{className:"row","data-sticky-container":!0},r.a.createElement("div",{className:"col col-12 col-sm-6 left col-embed"},r.a.createElement("div",{className:"desc"},"Fill in the content for each of the Four Corners below. You can begin working on whichever corner that you prefer. Although it is not required to fill in information for all of the Four Corners, it is highly recommended for a better experience by the reader.  Only the corners that are utilized will appear to the viewer."),this.renderEmbedCol()),r.a.createElement("div",{className:"col col-12 col-sm-6 right col-form"},this.renderFormCol())))):null}};var F=()=>React.createElement("div",null,React.createElement("div",{className:"container"},React.createElement("h1",null,"Not Found")));n(372),n(373);const U=r.a.createElement(o.a,null,(console.log(SiteSettings.path+"creator"),e=>r.a.createElement(i.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(v,null),r.a.createElement(l.a,null,r.a.createElement(c.a,{exact:!0,path:SiteSettings.path,component:k}),r.a.createElement(c.a,{path:SiteSettings.path+"creator",component:A}),r.a.createElement(c.a,{path:"*",component:F}))))));Object(s.render)(U,document.getElementById("page"))}});